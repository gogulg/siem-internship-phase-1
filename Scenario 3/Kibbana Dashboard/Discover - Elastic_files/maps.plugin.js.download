/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t={93304:(e,t,n)=>{"use strict";n.d(t,{fM:()=>r});var i=n(68915);let a=function(e){return e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram",e}({}),r=function(e){return e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing",e}({});class KbnFieldType{constructor(e={}){(0,i.default)(this,"name",void 0),(0,i.default)(this,"sortable",void 0),(0,i.default)(this,"filterable",void 0),(0,i.default)(this,"esTypes",void 0),this.name=e.name||r.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}new KbnFieldType({name:r.UNKNOWN});new KbnFieldType({name:r.STRING,sortable:!0,filterable:!0,esTypes:[a.STRING,a.TEXT,a.MATCH_ONLY_TEXT,a.KEYWORD,a.VERSION,a._TYPE,a._ID]}),new KbnFieldType({name:r.NUMBER,sortable:!0,filterable:!0,esTypes:[a.FLOAT,a.HALF_FLOAT,a.SCALED_FLOAT,a.DOUBLE,a.INTEGER,a.LONG,a.UNSIGNED_LONG,a.SHORT,a.BYTE,a.TOKEN_COUNT,a.AGGREGATE_METRIC_DOUBLE]}),new KbnFieldType({name:r.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[a.FLOAT_RANGE,a.DOUBLE_RANGE,a.INTEGER_RANGE,a.LONG_RANGE]}),new KbnFieldType({name:r.DATE,sortable:!0,filterable:!0,esTypes:[a.DATE,a.DATE_NANOS]}),new KbnFieldType({name:r.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[a.DATE_RANGE]}),new KbnFieldType({name:r.IP,sortable:!0,filterable:!0,esTypes:[a.IP]}),new KbnFieldType({name:r.IP_RANGE,sortable:!0,filterable:!0,esTypes:[a.IP_RANGE]}),new KbnFieldType({name:r.BOOLEAN,sortable:!0,filterable:!0,esTypes:[a.BOOLEAN]}),new KbnFieldType({name:r.OBJECT,esTypes:[a.OBJECT]}),new KbnFieldType({name:r.NESTED,esTypes:[a.NESTED]}),new KbnFieldType({name:r.GEO_POINT,esTypes:[a.GEO_POINT]}),new KbnFieldType({name:r.GEO_SHAPE,esTypes:[a.GEO_SHAPE]}),new KbnFieldType({name:r.ATTACHMENT,esTypes:[a.ATTACHMENT]}),new KbnFieldType({name:r.MURMUR3,esTypes:[a.MURMUR3]}),new KbnFieldType({name:r._SOURCE,esTypes:[a._SOURCE]}),new KbnFieldType({name:r.HISTOGRAM,filterable:!0,esTypes:[a.HISTOGRAM]}),new KbnFieldType({name:r.CONFLICT})},31600:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var i=n(84286),a=n.n(i),r=n(96791);function s(e,t={}){const n=a().lazy(e);return a().forwardRef(((e,s)=>{var o;return(0,r.jsx)(i.Suspense,{fallback:null!==(o=t.fallback)&&void 0!==o?o:null},a().createElement(n,{...e,ref:s}))}))}},17927:(e,t,n)=>{"use strict";n.d(t,{J$:()=>S,PT:()=>y,mL:()=>h,Qr:()=>L,cH:()=>d,y8:()=>A,B_:()=>f,LK:()=>I,P4:()=>a,jg:()=>O,Sd:()=>R,fr:()=>s,yW:()=>_});var i=n(80190);const a=()=>[new i.BehaviorSubject(null),()=>{},()=>!0];var r=n(84286);const s=(...e)=>{const[t,n]=(0,r.useState)((()=>o(e))),a=(0,r.useMemo)((()=>(0,i.combineLatest)(e).pipe((0,i.skip)(1),(0,i.debounceTime)(0)).subscribe((e=>{n(e)}))),[]);return(0,r.useEffect)((()=>()=>a.unsubscribe()),[a]),t},o=e=>e.map((e=>{var t,n;return null!==(t=null==e||null===(n=e.getValue)||void 0===n?void 0:n.call(e))&&void 0!==t?t:void 0}));var l=n(55964),c=n(4513),p=n.n(c);const u=e=>Boolean(e&&void 0!==(null==e?void 0:e.timeRange$)),d=e=>Boolean(e&&u(e)&&(e=>Boolean(e&&void 0!==(null==e?void 0:e.filters$)))(e)&&void 0!==(null==e?void 0:e.query$));function _({filters:e,query:t,timeRange:n}){const a=(0,r.useMemo)((()=>({filters$:new i.BehaviorSubject(e),query$:new i.BehaviorSubject(t),timeRange$:new i.BehaviorSubject(n)})),[]);return(0,r.useEffect)((()=>{(0,l.onlyDisabledFiltersChanged)(a.filters$.getValue(),e,{...l.COMPARE_ALL_OPTIONS,state:!1})||a.filters$.next(e)}),[e,a.filters$]),(0,r.useEffect)((()=>{p()(a.query$.getValue(),t)||a.query$.next(t)}),[t,a.query$]),(0,r.useEffect)((()=>{p()(a.timeRange$.getValue(),n)||a.timeRange$.next(n)}),[n,a.timeRange$]),a}const E=e=>Boolean(e&&void 0!==(null==e?void 0:e.searchSessionId$)),g=e=>Boolean(e&&void 0!==(null==e?void 0:e.parentApi)),m=e=>Boolean(e&&void 0!==(null==e?void 0:e.reload$));function T(e,t){var n,i,a,r,s,o,l,c,p,u,d,_,E;const g=e;return{isReload:t,filters:null==g||null===(n=g.parentApi)||void 0===n||null===(i=n.filters$)||void 0===i?void 0:i.value,query:null==g||null===(a=g.parentApi)||void 0===a||null===(r=a.query$)||void 0===r?void 0:r.value,searchSessionId:null==g||null===(s=g.parentApi)||void 0===s||null===(o=s.searchSessionId$)||void 0===o?void 0:o.value,timeRange:null!==(l=null==g||null===(c=g.timeRange$)||void 0===c?void 0:c.value)&&void 0!==l?l:null==g||null===(p=g.parentApi)||void 0===p||null===(u=p.timeRange$)||void 0===u?void 0:u.value,timeslice:null!=g&&null!==(d=g.timeRange$)&&void 0!==d&&d.value||null==g||null===(_=g.parentApi)||void 0===_||null===(E=_.timeslice$)||void 0===E?void 0:E.value}}function b(e){return!(!g(e)||!E(e.parentApi))&&"string"==typeof e.parentApi.searchSessionId$.value}function f(e){const t=function(e){const t=[];if(u(e)&&t.push(e.timeRange$.pipe((0,i.skip)(1))),g(e)&&d(e.parentApi)&&t.push((0,i.combineLatest)([e.parentApi.filters$,e.parentApi.query$]).pipe((0,i.skip)(1),(0,i.filter)((()=>!b(e))))),g(e)&&u(e.parentApi)){const n=[e.parentApi.timeRange$];e.parentApi.timeslice$&&n.push(e.parentApi.timeslice$),t.push((0,i.combineLatest)(n).pipe((0,i.skip)(1),(0,i.filter)((()=>!b(e)&&!function(e){return!!u(e)&&"object"==typeof e.timeRange$.value}(e)))))}return t}(e),n=function(e){const t=[];return g(e)&&E(e.parentApi)&&t.push(e.parentApi.searchSessionId$.pipe((0,i.skip)(1))),g(e)&&m(e.parentApi)&&t.push(e.parentApi.reload$.pipe((0,i.filter)((()=>!b(e))))),t}(e);if(0===n.length)return(0,i.merge)(...t).pipe((0,i.startWith)(T(e,!1)),(0,i.debounceTime)(0),(0,i.map)((()=>T(e,!1))));const a=new i.Subject,r=(0,i.merge)(...t).pipe((0,i.switchMap)((t=>(0,i.of)(t).pipe((0,i.delay)(0),(0,i.takeUntil)(a),(0,i.map)((()=>T(e,!1))))))),s=(0,i.merge)(...n).pipe((0,i.tap)((()=>a.next())),(0,i.map)((()=>T(e,!0))));return(0,i.merge)(s,r).pipe((0,i.startWith)(T(e,!1)))}const O=e=>{const t=new i.BehaviorSubject(e.timeRange);function n(e){t.next(e)}return{serialize:()=>({timeRange:t.value}),comparators:{timeRange:[t,n,p()]},api:{timeRange$:t,setTimeRange:n}}},S=e=>void 0!==e.getAppContext&&"function"==typeof e.getAppContext,v=e=>Boolean(e&&"boolean"==typeof e.disableTriggers);function A(e){function t(e){return!!v(e)&&e.disableTriggers}return t(e)||t(g(e)?e.parentApi:void 0)}const y=e=>Boolean(e&&e.type),h=(e,t)=>Boolean(e&&e.type)&&e.type===t;function I(e){var t,n,i;return null!==(t=null===(n=e.title$)||void 0===n?void 0:n.value)&&void 0!==t?t:null===(i=e.defaultTitle$)||void 0===i?void 0:i.value}const L=e=>Boolean(e&&void 0!==(null==e?void 0:e.title$)&&void 0!==(null==e?void 0:e.hideTitle$)),R=e=>{const t=new i.BehaviorSubject(e.title),n=new i.BehaviorSubject(e.description),a=new i.BehaviorSubject(e.hidePanelTitles),r=e=>{e!==t.value&&t.next(e)},s=e=>{e!==a.value&&a.next(e)},o=e=>{e!==n.value&&n.next(e)};return{api:{title$:t,hideTitle$:a,setTitle:r,setHideTitle:s,description$:n,setDescription:o},comparators:{title:[t,r],description:[n,o],hidePanelTitles:[a,s,(e,t)=>Boolean(e)===Boolean(t)]},serialize:()=>({title:t.value,hidePanelTitles:a.value,description:n.value})}}},22787:(e,t,n)=>{"use strict";n.d(t,{$z:()=>j,AZ:()=>s,B4:()=>d,B8:()=>C,C3:()=>l,C8:()=>g,Ch:()=>a,D8:()=>ve,DQ:()=>k,EH:()=>I,El:()=>he,GK:()=>Ge,HT:()=>Ce,I6:()=>se,Ic:()=>f,JZ:()=>q,Jc:()=>Pe,K5:()=>Z,Kg:()=>T,Ly:()=>x,M$:()=>le,Mj:()=>E,Ml:()=>Ve,N1:()=>Ae,Nl:()=>L,Oo:()=>X,PB:()=>U,Q2:()=>o,QK:()=>Te,Qo:()=>z,RV:()=>$e,Rk:()=>$,SK:()=>te,SV:()=>F,Sh:()=>Ue,Tr:()=>ke,Ty:()=>ne,UP:()=>S,VM:()=>Ie,Vj:()=>P,Vx:()=>Oe,Wd:()=>K,X3:()=>c,X7:()=>re,XB:()=>M,YX:()=>ge,Z5:()=>ye,_:()=>m,bJ:()=>Fe,cS:()=>Se,d8:()=>w,dP:()=>Me,dy:()=>h,e$:()=>N,eN:()=>Re,fT:()=>y,fy:()=>H,hY:()=>we,hw:()=>me,iT:()=>be,j4:()=>pe,j7:()=>xe,jc:()=>Q,kA:()=>ie,kI:()=>je,ki:()=>_e,m7:()=>R,mE:()=>ae,mp:()=>ce,mt:()=>de,nD:()=>G,o0:()=>p,ol:()=>fe,pH:()=>v,pe:()=>Y,pw:()=>Ee,qL:()=>De,qr:()=>Ne,rI:()=>b,rT:()=>Be,sD:()=>oe,sZ:()=>r,tE:()=>A,ty:()=>ue,uM:()=>O,vW:()=>V,vj:()=>B,vr:()=>D,wj:()=>Le,xo:()=>ee,xw:()=>J,zN:()=>W});var i=n(75008);const a="map",r="maps",s="gisApp",o="logoKibana",l=i.i18n.translate("xpack.maps.visTypeAlias.title",{defaultMessage:"Maps"}),c=i.i18n.translate("xpack.maps.embeddableDisplayName",{defaultMessage:"map"}),p="initialLayers",u=`app/${r}`,d="map",_=`internal/${r}`,E=`/${_}/indexSettings`,g=`/${_}/fonts`,m=`/${_}/docSource`,T=`/${_}/feature`,b=`/${_}/getMatchingIndexes`,f=`/${_}/checkIsDrawingIndex`,O=`/${_}/mvt/getTile`,S=`/${_}/mvt/getGridTile`,v="openLayerWizard",A="__kbn_is_centroid_feature__",y="__kbn__feature_id__";function h(e){return`/${u}${I(e)}`}function I(e){return e?`/${d}/${e}`:`/${d}`}let L=function(e){return e.RASTER_TILE="RASTER_TILE",e.GEOJSON_VECTOR="GEOJSON_VECTOR",e.EMS_VECTOR_TILE="EMS_VECTOR_TILE",e.HEATMAP="HEATMAP",e.BLENDED_VECTOR="BLENDED_VECTOR",e.MVT_VECTOR="MVT_VECTOR",e.LAYER_GROUP="LAYER_GROUP",e}({}),R=function(e){return e.EMS_TMS="EMS_TMS",e.EMS_FILE="EMS_FILE",e.ES_GEO_GRID="ES_GEO_GRID",e.ES_GEO_LINE="ES_GEO_LINE",e.ES_SEARCH="ES_SEARCH",e.ES_PEW_PEW="ES_PEW_PEW",e.ES_ML_ANOMALIES="ML_ANOMALIES",e.ESQL="ESQL",e.EMS_XYZ="EMS_XYZ",e.WMS="WMS",e.KIBANA_TILEMAP="KIBANA_TILEMAP",e.GEOJSON_FILE="GEOJSON_FILE",e.MVT_SINGLE_LAYER="MVT_SINGLE_LAYER",e.ES_DISTANCE_SOURCE="ES_DISTANCE_SOURCE",e.ES_TERM_SOURCE="ES_TERM_SOURCE",e.TABLE_SOURCE="TABLE_SOURCE",e}({}),N=function(e){return e.SOURCE="source",e.JOIN="join",e}({});const M="__kbnjoin__",P="meta",C="formatters",D="source",w=`${D}_${P}`,x=`${D}_${C}`,B=`${D}_bounds`,k=0,G=24,j=5,U=2,F=1e4,$=100,V=65535,K="__kbn_isvisibleduetojoin__",H="_";let Y=function(e){return e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e}({});const z=["geo_point","geo_shape"];let Z=function(e){return e.POINT="Point",e.MULTI_POINT="MultiPoint",e.LINE_STRING="LineString",e.MULTI_LINE_STRING="MultiLineString",e.POLYGON="Polygon",e.MULTI_POLYGON="MultiPolygon",e.GEOMETRY_COLLECTION="GeometryCollection",e}({});const q=0,W=0,J=1,X={type:"FeatureCollection",features:[]};let Q=function(e){return e.DRAW_SHAPES="DRAW_SHAPES",e.DRAW_POINTS="DRAW_POINTS",e.DRAW_FILTERS="DRAW_FILTERS",e.NONE="NONE",e}({}),ee=function(e){return e.BOUNDS="BOUNDS",e.DISTANCE="DISTANCE",e.POLYGON="POLYGON",e.POINT="POINT",e.LINE="LINE",e.SIMPLE_SELECT="SIMPLE_SELECT",e.DELETE="DELETE",e.WAIT="WAIT",e}({});const te="_of_";let ne=function(e){return e.AVG="avg",e.COUNT="count",e.MAX="max",e.MIN="min",e.SUM="sum",e.TERMS="terms",e.PERCENTILE="percentile",e.UNIQUE_COUNT="cardinality",e}({}),ie=function(e){return e.HEATMAP="heatmap",e.POINT="point",e.GRID="grid",e.HEX="hex",e}({}),ae=function(e){return e.COARSE="COARSE",e.FINE="FINE",e.MOST_FINE="MOST_FINE",e.SUPER_FINE="SUPER_FINE",e}({});const re="gridSplit",se="gridCentroid",oe="__percentage",le=50,ce="doc_count";let pe=function(e){return e.STATIC="STATIC",e.DYNAMIC="DYNAMIC",e}({}),ue=function(e){return e.VECTOR="VECTOR",e.HEATMAP="HEATMAP",e.TILE="TILE",e.EMS_VECTOR_TILE="EMS_VECTOR_TILE",e}({}),de=function(e){return e.CATEGORICAL="CATEGORICAL",e.ORDINAL="ORDINAL",e}({});const _e=["string","ip","boolean"],Ee=["number","date"];let ge=function(e){return e.CIRCLE="circle",e.ICON="icon",e}({}),me=function(e){return e.NONE="NONE",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e}({}),Te=function(e){return e.BOTTOM="BOTTOM",e.CENTER="CENTER",e.TOP="TOP",e}({});const be="marker",fe=.25,Oe=.25,Se=64,ve="__kbn__custom_icon_sdf__",Ae=16,ye=Ae/2;let he=function(e){return e.CUSTOM="CUSTOM",e.MAKI="MAKI",e}({}),Ie=function(e){return e.SYMBOLIZE_AS="symbolizeAs",e.FILL_COLOR="fillColor",e.LINE_COLOR="lineColor",e.LINE_WIDTH="lineWidth",e.ICON="icon",e.ICON_SIZE="iconSize",e.ICON_ORIENTATION="iconOrientation",e.LABEL_TEXT="labelText",e.LABEL_ZOOM_RANGE="labelZoomRange",e.LABEL_COLOR="labelColor",e.LABEL_SIZE="labelSize",e.LABEL_BORDER_COLOR="labelBorderColor",e.LABEL_BORDER_SIZE="labelBorderSize",e.LABEL_POSITION="labelPosition",e}({}),Le=function(e){return e.LIMIT="LIMIT",e.CLUSTERS="CLUSTERS",e.TOP_HITS="TOP_HITS",e.MVT="MVT",e}({}),Re=function(e){return e.STRING="String",e.NUMBER="Number",e}({});const Ne="SPATIAL_FILTERS_LAYER_ID";let Me=function(e){return e.LAST_SAVED_LOCATION="LAST_SAVED_LOCATION",e.FIXED_LOCATION="FIXED_LOCATION",e.BROWSER_LOCATION="BROWSER_LOCATION",e.AUTO_FIT_TO_BOUNDS="AUTO_FIT_TO_BOUNDS",e}({}),Pe=function(e){return e.ELASTICSEARCH="ELASTICSEARCH",e.REFERENCE="REFERENCE",e.SOLUTIONS="SOLUTIONS",e}({}),Ce=function(e){return e.POINT="POINT",e.LINE="LINE",e.POLYGON="POLYGON",e}({}),De=function(e){return e.GET="get",e.FEATURE_STATE="feature-state",e}({}),we=function(e){return e.INTERPOLATE="INTERPOLATE",e.PERCENTILES="PERCENTILES",e}({});const xe=[50,75,90,95,99],Be="none",ke="autoselect",Ge="world_countries";let je=function(e){return e.CHOROPLETH="choropleth",e.GEO_FILE="uploadGeoFile",e.LAYER_GROUP="layerGroup",e.NEW_VECTOR="newVectorLayer",e.OBSERVABILITY="observabilityLayer",e.SECURITY="securityLayer",e.EMS_BOUNDARIES="emsBoundaries",e.EMS_BASEMAP="emsBaseMap",e.CLUSTERS="clusters",e.HEATMAP="heatmap",e.GEO_LINE="geoLine",e.POINT_2_POINT="point2Point",e.ES_DOCUMENT="esDocument",e.ES_TOP_HITS="esTopHits",e.ESQL="ESQL",e.KIBANA_BASEMAP="kibanaBasemap",e.MVT_VECTOR="mvtVector",e.WMS_LAYER="wmsLayer",e.TMS_LAYER="tmsLayer",e.SPATIAL_JOIN="spatialJoin",e}({}),Ue=function(e){return e.ABOVE="ABOVE",e.BELOW="BELOW",e}({});const Fe=1e3,$e={truncation:"middle"},Ve={asPlainText:!0}},32407:(e,t,n)=>{"use strict";n.d(t,{X:()=>i,o:()=>a});const i=1,a="map"},5850:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AGG_TYPE:()=>i.Ty,APP_ID:()=>i.sZ,COLOR_MAP_TYPE:()=>i.mt,DECIMAL_DEGREES_PRECISION:()=>i.$z,ES_GEO_FIELD_TYPE:()=>i.pe,FIELD_ORIGIN:()=>i.e$,INITIAL_LOCATION:()=>i.dP,LABEL_BORDER_SIZES:()=>i.hw,LABEL_POSITIONS:()=>i.QK,LAYER_TYPE:()=>i.Nl,LAYER_WIZARD_CATEGORY:()=>i.Jc,MAP_SAVED_OBJECT_TYPE:()=>i.Ch,MAX_ZOOM:()=>i.nD,MIN_ZOOM:()=>i.DQ,SCALING_TYPES:()=>i.wj,SOURCE_TYPES:()=>i.m7,STYLE_TYPE:()=>i.j4,SYMBOLIZE_AS_TYPES:()=>i.YX,VECTOR_SHAPE_TYPE:()=>i.HT,VECTOR_STYLES:()=>i.VM});var i=n(22787)},39730:(e,t,n)=>{"use strict";n.d(t,{AH:()=>o,d:()=>r,hn:()=>a,sp:()=>s});const i=[];function a(e){i.push({checkVisibility:async()=>!0,getIsDisabled:async()=>!1,isBeta:!1,...e})}function r(e){if(e.order<100)throw new Error("layerWizard.order should be greater than or equal to '100'");a(e)}async function s(){const e=i.map((async e=>({...e,isVisible:await e.checkVisibility(),isDisabled:await e.getIsDisabled()})));return(await Promise.all(e)).filter((({isVisible:e})=>e)).sort(((e,t)=>e.order-t.order))}function o(e){return i.find((t=>t.id===e))}},97853:(e,t,n)=>{"use strict";n.d(t,{V:()=>a,z:()=>r});const i=[];function a(e){if(i.some((({type:t})=>e.type===t)))throw new Error(`Unable to register source type ${e.type}. ${e.type} has already been registered`);i.push(e)}function r(e){return i.find((t=>t.type===e))}},65218:(e,t,n)=>{"use strict";n.d(t,{$:()=>o,u:()=>r});var i=n(32407),a=n(99723);function r(e=(0,a.pZ)()){return{get:async t=>e.client.get({contentTypeId:i.o,id:t}),create:async({data:t,options:n})=>await e.client.create({contentTypeId:i.o,data:t,options:n}),update:async({id:t,data:n,options:a})=>await e.client.update({contentTypeId:i.o,id:t,data:n,options:a}),delete:async t=>await e.client.delete({contentTypeId:i.o,id:t}),search:async(t={},n)=>e.client.search({contentTypeId:i.o,query:t,options:n})}}const s=n(75008).i18n.translate("xpack.maps.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"}),o=async({id:e,title:t,lastSavedTitle:n,copyOnSave:i,isTitleDuplicateConfirmed:a,getDisplayName:o,onTitleDuplicate:l},{overlays:c})=>{if(a)return!0;if(t===n&&!i)return!0;const{hits:p}=await r().search({text:`"${t}"`,limit:10},{onlyTitle:!0}),u=p.find((e=>e.attributes.title.toLowerCase()===t.toLowerCase()));return!u||u.id===e||(l(),Promise.reject(new Error(s)))}},94499:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GEOJSON_FEATURE_ID_PROPERTY_NAME:()=>x.fT,MAPS_APP_LOCATOR:()=>L.n,MAP_SAVED_OBJECT_TYPE:()=>x.Ch,isMapApi:()=>re,plugin:()=>se});var i=n(68915),a=n(84286),r=n.n(a),s=n(64390),o=n(84839),l=n(67546),c=n(12548),p=n(28436),u=n(75008),d=n(18657);const _=()=>({name:"tilemap",type:"render",help:u.i18n.translate("xpack.maps.tileMap.function.help",{defaultMessage:"Tilemap visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},async fn(e,t){const n=e.query;return{type:"render",as:d.ff,value:{visType:d.s4,visConfig:JSON.parse(t.visConfig),filters:e.filters,query:Array.isArray(n)?n[0]:n,timeRange:e.timeRange}}}});var E=n(22874),g=n.n(E),m=n(31600),T=n(20482),b=n(99723),f=n(96791);const O=(0,m.O)((async()=>{const{TileMapVisualization:e}=await Promise.all([n.e(302),n.e(450),n.e(116),n.e(476),n.e(636),n.e(888)]).then(n.bind(n,60884));return{default:e}})),S={name:d.ff,reuseDomNode:!0,render:async(e,{filters:t,query:n,timeRange:i,visConfig:a},r)=>{r.onDestroy((()=>{(0,E.unmountComponentAtNode)(e)}));const s={onInitialRenderComplete:()=>{r.done()},filters:t,query:n,timeRange:i,visConfig:a};(0,E.render)((0,f.jsx)(T.KibanaRenderContextProvider,(0,b.M1)(),(0,f.jsx)(O,s)),e)}};var v=n(78603),A=n(73005);const y=()=>({name:"regionmap",type:"render",help:u.i18n.translate("xpack.maps.regionMap.function.help",{defaultMessage:"Regionmap visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},async fn(e,t){const n=e.query;return{type:"render",as:A.p,value:{visType:A.a,visConfig:JSON.parse(t.visConfig),filters:e.filters,query:Array.isArray(n)?n[0]:n,timeRange:e.timeRange}}}}),h=(0,m.O)((async()=>{const{RegionMapVisualization:e}=await Promise.all([n.e(302),n.e(450),n.e(116),n.e(476),n.e(736),n.e(95)]).then(n.bind(n,84476));return{default:e}})),I={name:A.p,reuseDomNode:!0,render:async(e,{filters:t,query:n,timeRange:i,visConfig:a},r)=>{r.onDestroy((()=>{(0,E.unmountComponentAtNode)(e)}));const s={onInitialRenderComplete:()=>{r.done()},filters:t,query:n,timeRange:i,visConfig:a};(0,E.render)((0,f.jsx)(T.KibanaRenderContextProvider,(0,b.M1)(),(0,f.jsx)(h,s)),e)}};var L=n(29144);class MapsAppTileMapLocatorDefinition{constructor(e){(0,i.default)(this,"id","MAPS_APP_TILE_MAP_LOCATOR"),(0,i.default)(this,"getLocation",(async e=>{const{getLocation:t}=await Promise.all([n.e(302),n.e(450),n.e(116),n.e(636),n.e(391)]).then(n.bind(n,54843));return t(e,this.deps)})),this.deps=e}}class MapsAppRegionMapLocatorDefinition{constructor(e){(0,i.default)(this,"id","MAPS_APP_REGION_MAP_LOCATOR"),(0,i.default)(this,"getLocation",(async e=>{const{getLocation:t}=await Promise.all([n.e(302),n.e(450),n.e(116),n.e(736),n.e(560)]).then(n.bind(n,32335));return t(e,this.deps)})),this.deps=e}}var R=n(56919),N=n(97853),M=n(39730);const P={async createSecurityLayerDescriptors(e,t){const{createSecurityLayerDescriptors:i}=await Promise.all([n.e(302),n.e(450),n.e(116),n.e(354),n.e(499),n.e(480)]).then(n.bind(n,13480));return i(e,t)},async createBasemapLayerDescriptor(){const{createBasemapLayerDescriptor:e}=await Promise.all([n.e(302),n.e(450),n.e(476)]).then(n.bind(n,15476));return e()},async createESSearchSourceLayerDescriptor(e){const{createLayerDescriptor:t}=await Promise.all([n.e(302),n.e(450),n.e(116),n.e(354)]).then(n.bind(n,49354));return t(e)}};async function C(e){const{suggestEMSTermJoinConfig:t}=await n.e(141).then(n.bind(n,5141));return await t(e)}var D=n(17927),w=n(22500),x=n(22787),B=n(36479);const k="FILTER_BY_MAP_EXTENT",G=e=>Boolean((0,D.PT)(e));function j(e){var t;return G(e)&&"dashboard"===(null===(t=e.parentApi)||void 0===t?void 0:t.type)?u.i18n.translate("xpack.maps.filterByMapExtentMenuItem.dashboardLabel",{defaultMessage:"dashboard"}):u.i18n.translate("xpack.maps.filterByMapExtentMenuItem.pageLabel",{defaultMessage:"page"})}function U(e){return u.i18n.translate("xpack.maps.filterByMapExtentMenuItem.displayName",{defaultMessage:"Filter {containerLabel} by map bounds",values:{containerLabel:j(e)}})}const F=(0,o.createAction)({id:k,type:k,order:20,getDisplayName:({embeddable:e})=>U(e),getDisplayNameTooltip:({embeddable:e})=>u.i18n.translate("xpack.maps.filterByMapExtentMenuItem.displayNameTooltip",{defaultMessage:"As you zoom and pan the map, the {containerLabel} updates to display only the data visible in the map bounds.",values:{containerLabel:j(e)}}),getIconType:()=>"filter",isCompatible:async({embeddable:e})=>!(!G(e)||(0,D.y8)(e))&&((0,D.mL)(e,x.Ch)||(0,w.apiHasVisualizeConfig)(e)&&(0,B.a)(e)),execute:async({embeddable:e})=>{const{openModal:t}=await n.e(665).then(n.bind(n,10665));t(U(e))}}),$="SYNCHRONIZE_MOVEMENT_ACTION",V=(0,o.createAction)({id:$,type:$,order:21,getDisplayName:()=>u.i18n.translate("xpack.maps.synchronizeMovementAction.title",{defaultMessage:"Synchronize map movement"}),getDisplayNameTooltip:()=>u.i18n.translate("xpack.maps.synchronizeMovementAction.tooltipContent",{defaultMessage:"Synchronize maps, so that if you zoom and pan in one map, the movement is reflected in other maps"}),getIconType:()=>"crosshairs",isCompatible:async({embeddable:e})=>{if(t=e,!Boolean((0,D.PT)(t)))return!1;var t;const{isCompatible:i}=await n.e(727).then(n.bind(n,26727));return i(e)},execute:async()=>{const{openModal:e}=await n.e(823).then(n.bind(n,87823));e()}});var K=n(66744);const H=(0,o.createAction)({id:o.ACTION_VISUALIZE_GEO_FIELD,type:o.ACTION_VISUALIZE_GEO_FIELD,getDisplayName:()=>u.i18n.translate("xpack.maps.discover.visualizeFieldLabel",{defaultMessage:"Visualize in Maps"}),isCompatible:async e=>Boolean(!!(0,b.$n)().show&&e.dataViewSpec&&e.fieldName),getHref:async e=>{const{getMapsLink:t}=await n.e(382).then(n.bind(n,22382)),{app:i,path:a}=await t(e);return(0,b.M1)().application.getUrlForApp(i,{path:a,absolute:!1})},execute:async e=>{const{getMapsLink:t}=await n.e(382).then(n.bind(n,22382)),{app:i,path:a,state:r}=await t(e),s=(0,b.er)();null==s||s.reportUiCounter(x.sZ,K.METRIC_TYPE.CLICK,`create_maps_vis_${e.originatingApp?e.originatingApp:"unknownOriginatingApp"}`),(0,b.M1)().application.navigateToApp(i,{path:a,state:r})}});var Y=n(65218);const z={id:x.sZ,title:x.C3,subtitle:u.i18n.translate("xpack.maps.featureCatalogue.mapsSubtitle",{defaultMessage:"Plot geographic data."}),description:u.i18n.translate("xpack.maps.feature.appDescription",{defaultMessage:"Explore geospatial data from Elasticsearch and the Elastic Maps Service."}),icon:x.AZ,path:"/app/maps",showOnHomePage:!1,category:"data",solutionId:"kibana",order:400};var Z=n(13647),q=n(68187),W=n(98634),J=n(3185);const X="lens_choropleth_chart_renderer",Q=()=>({name:"lens_choropleth_chart",type:"render",help:"A choropleth chart. Metrics are joined to vector features to compare values across political boundaries",args:{title:{types:["string"],help:""},description:{types:["string"],help:""},layerId:{types:["string"],help:""},emsField:{types:["string"],help:"Elastic Map Service boundaries layer field provides the vector feature join key"},emsLayerId:{types:["string"],help:"Elastic Map Service boundaries layer id that provides vector features"},regionAccessor:{types:["string"],help:"Bucket accessor identifies the region key column"},valueAccessor:{types:["string"],help:"Value accessor identifies the value column"}},inputTypes:["datatable"],fn(e,t,n){var i;if(null!=n&&null!==(i=n.inspectorAdapters)&&void 0!==i&&i.tables){n.inspectorAdapters.tables.reset(),n.inspectorAdapters.tables.allowCsvExport=!0;const i=(0,W.prepareLogTable)(e,[[t.valueAccessor?[t.valueAccessor]:void 0,u.i18n.translate("xpack.maps.logDatatable.value",{defaultMessage:"Value"})],[t.regionAccessor?[t.regionAccessor]:void 0,u.i18n.translate("xpack.maps.logDatatable.region",{defaultMessage:"Region key"})]],!0);n.inspectorAdapters.tables.logDatatable("default",i)}return{type:"render",as:X,value:{data:e,args:t}}}});const ee=(0,m.O)((async()=>{const{PassiveMap:e}=await Promise.all([n.e(302),n.e(450),n.e(476),n.e(917)]).then(n.bind(n,86917));return{default:e}}));function te(e){return(0,f.jsx)(ee,e)}var ne=n(32407);const ie=(0,m.O)((async()=>{const{MapRenderer:e}=await Promise.all([n.e(302),n.e(450),n.e(476),n.e(559)]).then(n.bind(n,46559));return{default:e}}));function ae(e){return(0,f.jsx)(ie,e)}class MapsPlugin{constructor(e){(0,i.default)(this,"_initializerContext",void 0),this._initializerContext=e}setup(e,t){var i,a;(0,R.oq)(t.licensing);const o=this._initializerContext.config.get();(0,b.MV)({...o,preserveDrawingBuffer:!(null===(i=t.screenshotMode)||void 0===i||!i.isScreenshotMode())||o.preserveDrawingBuffer});const l=t.share.url.locators.create(new L.a({useHash:e.uiSettings.get("state:storeInSessionStorage")}));var d,E,m,O;return t.share.url.locators.create(new MapsAppTileMapLocatorDefinition({locator:l})),t.share.url.locators.create(new MapsAppRegionMapLocatorDefinition({locator:l})),t.inspector.registerView(q.K),t.inspector.registerView(Z.P),t.home&&t.home.featureCatalogue.register(z),t.visualizations.registerAlias(function(){const e=u.i18n.translate("xpack.maps.visTypeAlias.description",{defaultMessage:"Create and style maps with multiple layers and indices."});return{alias:{app:x.sZ,path:`/${x.B4}`},name:x.sZ,title:x.C3,description:e,icon:x.AZ,stage:"production",order:40,appExtensions:{visualizations:{docTypes:[x.Ch],searchFields:["title^3"],client:Y.u,toListItem(e){const{id:t,type:n,updatedAt:i,attributes:a,managed:r}=e,{title:s,description:o}=a;return{id:t,title:s,description:o,updatedAt:i,managed:r,editor:{editUrl:(0,x.EH)(t),editApp:x.sZ},icon:x.AZ,stage:"production",savedObjectType:n,typeTitle:x.C3}}}}}}()),e.application.register({id:x.sZ,title:x.C3,order:4e3,icon:`plugins/${x.sZ}/icon.svg`,euiIconType:x.Q2,category:s.DEFAULT_APP_CATEGORIES.kibana,async mount(i){var a,s;const[,o,{renderApp:l}]=await Promise.all([(0,b.f0)(),e.getStartServices(),Promise.all([n.e(302),n.e(450),n.e(116),n.e(476),n.e(354),n.e(636),n.e(499),n.e(803),n.e(480),n.e(828)]).then(n.bind(n,3232))]),[c,{savedObjectsTagging:p,spaces:u}]=o,d=null!==(a=null===(s=t.usageCollection)||void 0===s?void 0:s.components.ApplicationUsageTrackingProvider)&&void 0!==a?a:r().Fragment,_=await(null==u?void 0:u.getActiveSpace());return _&&(0,b.eR)(_.id),l(i,{coreStart:c,AppUsageTracker:d,savedObjectsTagging:p})}}),t.contentManagement.registry.register({id:ne.o,version:{latest:ne.X},name:x.C3}),(d=t.embeddable).registerReactEmbeddableFactory(x.Ch,(async()=>{const e=(0,b.f0)(),[,{mapEmbeddableFactory:t}]=await Promise.all([e,Promise.all([n.e(302),n.e(450),n.e(116),n.e(476),n.e(354),n.e(636),n.e(499),n.e(803),n.e(770)]).then(n.bind(n,28770))]);return t})),d.registerAddFromLibraryType({onAdd:(e,t)=>{e.addNewPanel({panelType:x.Ch,initialState:{savedObjectId:t.id}})},savedObjectType:x.Ch,savedObjectName:u.i18n.translate("xpack.maps.mapSavedObjectLabel",{defaultMessage:"Map"}),getIconForSavedObject:()=>x.AZ}),E=e,m=t.expressions,O=t.lens,m.registerRenderer((()=>function(e){return{name:X,displayName:"Choropleth chart",help:"Choropleth chart renderer",validate:()=>{},reuseDomNode:!0,render:async(t,i,a)=>{const[r,s]=await e.getStartServices(),{ChoroplethChart:o}=await Promise.all([n.e(302),n.e(450),n.e(476),n.e(768)]).then(n.bind(n,64768)),{getEmsFileLayers:l}=await n.e(764).then(n.bind(n,47764));let c=[];try{c=await l()}catch(e){}a.event({name:"chartSize",data:{maxDimensions:{x:{value:100,unit:"percentage"},y:{value:100,unit:"percentage"}}}}),g().render((0,f.jsx)(T.KibanaRenderContextProvider,(0,b.M1)(),(0,f.jsx)(o,(0,J.default)({},i,{formatFactory:s.fieldFormats.deserialize,uiSettings:r.uiSettings,emsFileLayers:c,onRenderComplete:()=>{const e=a.getExecutionContext(),t=(e=>{if(e){var t;const n=e=>e.type?e:e.child?n(e.child):void 0;return null===(t=n(e))||void 0===t?void 0:t.type}})(e),n=(e=>{if(e){var t;const n=e=>e.child?n(e.child):e;return null===(t=n(e))||void 0===t?void 0:t.type}})(e);var i;t&&n&&(null===(i=s.usageCollection)||void 0===i||i.reportUiCounter(t,K.METRIC_TYPE.COUNT,[`render_${n}_regionmap`])),a.done()}}))),t),a.onDestroy((()=>g().unmountComponentAtNode(t)))}}}(E))),m.registerFunction(Q),O.registerVisualization((async()=>{const[e,t]=await E.getStartServices(),{getVisualization:i}=await n.e(635).then(n.bind(n,82635));return i({theme:e.theme,paletteService:await t.charts.palettes.getPalettes()})})),t.data.search.aggs.types.registerLegacy(c.N,c.r),t.expressions.registerFunction(y),t.expressions.registerRenderer(I),t.visualizations.createBaseVisualization(v.Z),t.expressions.registerFunction(_),t.expressions.registerRenderer(S),t.visualizations.createBaseVisualization(p.d),(0,b.D7)(!(null===(a=t.cloud)||void 0===a||!a.isCloudEnabled)),{registerLayerWizard:M.d,registerSource:N.V}}start(e,t){return(0,R.iT)(t.licensing),(0,b.b3)(e,t),e.application.capabilities.maps_v2.show&&t.uiActions.addTriggerAction(o.VISUALIZE_GEO_FIELD_TRIGGER,H),t.uiActions.addTriggerAction(l.CONTEXT_MENU_TRIGGER,F),t.uiActions.addTriggerAction(l.CONTEXT_MENU_TRIGGER,V),e.application.capabilities.maps_v2.save||t.visualizations.unRegisterAlias(x.sZ),{createLayerDescriptors:P,suggestEMSTermJoinConfig:C,Map:ae,PassiveMap:te}}}const re=e=>Boolean(e&&(0,D.mL)(e,"map")&&"function"==typeof e.getLayerList&&(0,D.Qr)(e)&&(0,D.cH)(e)),se=e=>new MapsPlugin(e)},13647:(e,t,n)=>{"use strict";n.d(t,{P:()=>s}),n(84286);var i=n(75008),a=n(31600),r=n(96791);const s={title:i.i18n.translate("xpack.maps.inspector.mapDetailsViewTitle",{defaultMessage:"Map details"}),order:30,help:i.i18n.translate("xpack.maps.inspector.mapDetailsViewHelpText",{defaultMessage:"View the map state"}),shouldShow:e=>Boolean(e.map),component:e=>{const t=(0,a.O)((async()=>{const{MapViewComponent:e}=await n.e(289).then(n.bind(n,90289));return{default:e}}));return(0,r.jsx)(t,e)}}},68187:(e,t,n)=>{"use strict";n.d(t,{K:()=>s}),n(84286);var i=n(75008),a=n(31600),r=n(96791);const s={title:i.i18n.translate("xpack.maps.inspector.vectorTileViewTitle",{defaultMessage:"Vector tiles"}),order:10,help:i.i18n.translate("xpack.maps.inspector.vectorTileViewHelpText",{defaultMessage:"View the vector tile search requests used to collect the data"}),shouldShow(e){var t;return Boolean(null===(t=e.vectorTiles)||void 0===t?void 0:t.hasLayers())},component:e=>{const t=(0,a.O)((async()=>{const{VectorTileInspector:e}=await n.e(302).then(n.bind(n,9302));return{default:e}}));return(0,r.jsx)(t,e)}}},99723:(e,t,n)=>{"use strict";n.d(t,{$l:()=>Z,$n:()=>B,BF:()=>f,C_:()=>h,Cf:()=>v,D7:()=>E,Di:()=>W,I3:()=>Y,IT:()=>g,KI:()=>P,Lh:()=>ee,M1:()=>$,MJ:()=>R,MM:()=>Q,MV:()=>ie,Mh:()=>S,Ni:()=>se,Ot:()=>T,PA:()=>N,Rg:()=>pe,V8:()=>M,_h:()=>x,aM:()=>F,b3:()=>d,bQ:()=>U,bh:()=>V,bi:()=>w,c8:()=>D,ci:()=>te,cy:()=>j,dt:()=>C,eR:()=>b,eT:()=>z,er:()=>J,f0:()=>s,g9:()=>k,gG:()=>ce,gt:()=>A,hJ:()=>le,j_:()=>O,l3:()=>H,mE:()=>q,mU:()=>y,oL:()=>I,pU:()=>oe,pZ:()=>X,sI:()=>K,wb:()=>L,zD:()=>re,zH:()=>G});var i=n(80190),a=n(32212);const r=new i.BehaviorSubject(!1),s=()=>r.value?Promise.resolve():new Promise((e=>{const t=r.subscribe((n=>{n&&(t.unsubscribe(),e())}))}));let o,l,c,p,u=!1;function d(e,t){o=e,l=t,c=t.mapsEms,p=c.createEMSSettings(),e.theme.theme$.subscribe((({darkMode:e})=>{u=e})),r.next(!0)}let _=!1;function E(e){_=e}const g=()=>_;let m="default";const T=()=>m,b=e=>{m=e},f=()=>l.fileUpload.IndexNameFormComponent,O=()=>l.fileUpload.FileUploadComponent,S=()=>l.data.dataViews,v=()=>l.unifiedSearch.autocomplete,A=()=>l.inspector,y=()=>l.fileUpload,h=()=>o.uiSettings,I=()=>u,L=()=>l.unifiedSearch.ui.IndexPatternSelect,R=()=>l.unifiedSearch.ui.SearchBar,N=()=>o.http,M=()=>o.executionContext,P=()=>l.data.query.timefilter.timefilter,C=()=>o.notifications.toasts,D=()=>o.chrome,w=()=>o.application.capabilities.dev_tools,x=()=>o.application.capabilities.maps_v2,B=()=>o.application.capabilities.visualize_v2,k=()=>o.docLinks,G=()=>o.overlays,j=()=>l.charts,U=()=>l.data,F=()=>l.uiActions,$=()=>o,V=()=>l.navigation,K=()=>l.data.search,H=()=>l.embeddable,Y=()=>o.application.navigateToApp,z=()=>o.application.navigateToUrl,Z=()=>l.savedObjectsTagging,q=()=>l.spaces,W=()=>o.application,J=()=>l.usageCollection,X=()=>l.contentManagement,Q=()=>!!l.screenshotMode&&l.screenshotMode.isScreenshotMode(),ee=()=>l.serverless,te=()=>l.embeddableEnhanced;let ne;const ie=e=>ne=e,ae=()=>ne,re=()=>ae().showMapsInspectorAdapter,se=()=>ae().preserveDrawingBuffer,oe=()=>c,le=()=>p,ce=()=>"borealis"!==o.theme.getTheme().name?c.config.emsTileLayerId:{...c.config.emsTileLayerId,dark:a.EMS_DARKMAP_BOREALIS_ID,desaturated:a.EMS_ROADMAP_BOREALIS_DESATURATED_ID},pe=()=>l.share},36479:(e,t,n)=>{"use strict";function i(e){var t;return["region_map","tile_map"].includes(null===(t=e.getVis().type)||void 0===t?void 0:t.name)}n.d(t,{a:()=>i})},78603:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p,D:()=>c}),n(84286);var i=n(75008),a=n(31600),r=n(20904),s=n(1737),o=n(73005),l=n(96791);const c=i.i18n.translate("xpack.maps.regionMapMap.vis.title",{defaultMessage:"Region Map"}),p={name:o.a,title:c,icon:"visMapRegion",description:i.i18n.translate("xpack.maps.regionMap.vis.description",{defaultMessage:"Show metrics on a thematic map."}),editorConfig:{optionTabs:[{name:"",title:"",editor:function(e){const t=(0,a.O)((async()=>{const{RegionMapEditor:e}=await n.e(261).then(n.bind(n,28261));return{default:e}}));return(0,l.jsx)(t,e)}}]},visConfig:{defaults:{colorSchema:"Yellow to Red",mapZoom:2,mapCenter:[0,0]}},toExpressionAst:e=>{const t=(0,r.buildExpressionFunction)("regionmap",{visConfig:JSON.stringify({...e.params,mapCenter:e.uiState.get("mapCenter",[0,0]),mapZoom:parseInt(e.uiState.get("mapZoom",2),10),layerDescriptorParams:(0,s.q)(e)})});return(0,r.buildExpression)([t]).toAst()},requiresSearch:!0,disableCreate:!0}},73005:(e,t,n)=>{"use strict";n.d(t,{a:()=>a,p:()=>i});const i="region_map_vis",a="region_map"},1737:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});var i=n(78603);function a(e,t){if("string"==typeof e)return e;const n=t.split(".");return 2===n.length?n[1]:void 0}function r(e){var t,n,r,s,o;const l={label:e.title?e.title:i.D,emsLayerId:e.params.selectedLayer.isEMS?a(e.params.selectedLayer.id,e.params.selectedLayer.layerId):void 0,leftFieldName:e.params.selectedLayer.isEMS?e.params.selectedJoinField.name:void 0,colorSchema:e.params.colorSchema,indexPatternId:null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,metricAgg:"count"},c=null===(n=e.data)||void 0===n||null===(r=n.aggs)||void 0===r?void 0:r.byType("buckets");var p;null!=c&&c.length&&"terms"===c[0].type.dslName&&(l.termsFieldName=null===(p=c[0].getField())||void 0===p?void 0:p.name,l.termsSize=c[0].getParam("size"));const u=null===(s=e.data)||void 0===s||null===(o=s.aggs)||void 0===o?void 0:o.byType("metrics");var d;return null!=u&&u.length&&(l.metricAgg=u[0].type.dslName,l.metricFieldName=null===(d=u[0].getField())||void 0===d?void 0:d.name),l}},12548:(e,t,n)=>{"use strict";n.d(t,{N:()=>r,r:()=>s});var i=n(93304),a=n(7195);const r="geohash_grid",s=()=>new a.BucketAggType({name:r,expressionName:"",title:r,makeLabel:()=>r,params:[{name:"field",type:"field",filterFieldTypes:i.fM.GEO_POINT}],getRequestAggs:e=>[]})},28436:(e,t,n)=>{"use strict";n.d(t,{d:()=>p,D:()=>c}),n(84286);var i=n(75008),a=n(31600),r=n(20904),s=n(69589),o=n(18657),l=n(96791);const c=i.i18n.translate("xpack.maps.tileMap.vis.title",{defaultMessage:"Coordinate Map"}),p={name:o.s4,title:c,icon:"visMapCoordinate",description:i.i18n.translate("xpack.maps.tileMap.vis.description",{defaultMessage:"Plot latitude and longitude coordinates on a map"}),editorConfig:{optionTabs:[{name:"",title:"",editor:function(e){const t=(0,a.O)((async()=>{const{TileMapEditor:e}=await n.e(906).then(n.bind(n,90525));return{default:e}}));return(0,l.jsx)(t,e)}}]},visConfig:{defaults:{colorSchema:"Yellow to Red",mapType:o.oQ.ScaledCircleMarkers,mapZoom:2,mapCenter:[0,0]}},toExpressionAst:e=>{const t=(0,r.buildExpressionFunction)("tilemap",{visConfig:JSON.stringify({...e.params,mapCenter:e.uiState.get("mapCenter",[0,0]),mapZoom:parseInt(e.uiState.get("mapZoom",2),10),layerDescriptorParams:(0,s.q)(e)})});return(0,r.buildExpression)([t]).toAst()},requiresSearch:!0,disableCreate:!0}},18657:(e,t,n)=>{"use strict";n.d(t,{ff:()=>i,oQ:()=>r,s4:()=>a});const i="tile_map_vis",a="tile_map";let r=function(e){return e.ScaledCircleMarkers="Scaled Circle Markers",e.Heatmap="Heatmap",e}({})},69589:(e,t,n)=>{"use strict";n.d(t,{q:()=>s});var i=n(14627),a=n(28436),r=n(12548);function s(e){var t,n,s,o,l;const c={label:e.title?e.title:a.D,mapType:e.params.mapType,colorSchema:e.params.colorSchema,indexPatternId:null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,metricAgg:"count"},p=null===(n=e.data)||void 0===n||null===(s=n.aggs)||void 0===s?void 0:s.byType("buckets");var u;if(null!=p&&p.length&&p[0].type.dslName===r.N)c.geoFieldName=null===(u=p[0].getField())||void 0===u?void 0:u.name;else if(e.data.indexPattern){const t=e.data.indexPattern.fields.find((e=>!i.indexPatterns.isNestedField(e)&&e.aggregatable&&"geo_point"===e.type));t&&(c.geoFieldName=t.name)}const d=null===(o=e.data)||void 0===o||null===(l=o.aggs)||void 0===l?void 0:l.byType("metrics");var _;return null!=d&&d.length&&(c.metricAgg=d[0].type.dslName,c.metricFieldName=null===(_=d[0].getField())||void 0===_?void 0:_.name),c}},56919:(e,t,n)=>{"use strict";n.d(t,{Nd:()=>c,_7:()=>r,iT:()=>g,i_:()=>b,oq:()=>T,te:()=>p,yV:()=>E});var i=n(22787),a=n(43721);let r=function(e){return e.GEO_LINE_AGG="GEO_LINE_AGG",e.GEO_SHAPE_AGGS_GEO_TILE="GEO_SHAPE_AGGS_GEO_TILE",e.ON_PREM_EMS="ON_PREM_EMS",e}({});const s={[r.GEO_LINE_AGG]:{name:"geo_line aggregation",license:"gold"},[r.GEO_SHAPE_AGGS_GEO_TILE]:{name:"geo_tile aggregation on geo_shape field-type",license:"gold"},[r.ON_PREM_EMS]:{name:"layer from local Elastic Maps Server",license:"enterprise"}};let o,l=!1;const c=()=>o,p=()=>l;let u,d;const _=new Promise((e=>{d=e})),E=async()=>{await _};async function g(e){m(await e.getLicense()),u=e,u.license$.subscribe(m),d(void 0)}function m(e){const t=e.check(i.sZ,"gold");l="valid"===t.state,o=e.uid}function T(e){for(const t of Object.values(r))e.featureUsage.register(s[t].name,s[t].license)}function b(e){u?u.featureUsage.notifyUsage(s[r[e]].name):a.error("May not call notifyLicensedFeatureUsage before plugin start")}},29144:(e,t,n)=>{"use strict";n.d(t,{a:()=>MapsAppLocatorDefinition,n:()=>a});var i=n(68915);const a="MAPS_APP_LOCATOR";class MapsAppLocatorDefinition{constructor(e){(0,i.default)(this,"id",a),(0,i.default)(this,"getLocation",(async e=>{const{getLocation:t}=await n.e(255).then(n.bind(n,80636));return t(e,this.deps)})),this.deps=e}}},4513:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,a,r;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(a=i;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,r[a]))return!1;for(a=i;0!=a--;){var s=r[a];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},17248:(e,t,n)=>{n.p=window.__kbnPublicPath__.maps},82677:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/controls/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},64390:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},7195:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},14627:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},67546:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},60104:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/esql/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},20904:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},52374:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},98887:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/inspector/common/adapters/request");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},20409:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},61215:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},70227:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/lens/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},32212:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/mapsEms/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},7704:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},92927:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},84839:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},11684:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},24205:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/usageCollection/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},98634:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},22500:(e,t,n)=>{n.r(t);var i=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},43721:(e,t,n)=>{e.exports=n(52497)(4971)},3185:(e,t,n)=>{e.exports=n(52497)(51858)},68915:(e,t,n)=>{e.exports=n(52497)(67493)},65927:e=>{"use strict";e.exports=__kbnSharedDeps__.Classnames},43059:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},81319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},44903:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEuiThemeBorealis},26752:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticNumeral},96791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},44682:e=>{"use strict";e.exports=__kbnSharedDeps__.FastestLevenshtein},66744:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnAnalytics},9424:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCodeEditor},79551:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCryptoBrowser},76494:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnDatemath},55964:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsQuery},91991:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsqlAst},75008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},75879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},30911:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnMonaco},20482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},45995:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnRison},95735:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSearchErrors},30193:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxRouter},69433:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnStd},53803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},30770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},51783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},62488:e=>{"use strict";e.exports=__kbnSharedDeps__.MomentTimezone},84286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},22874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},13530:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactQuery},47012:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRedux},1493:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRouterDom},62067:e=>{"use strict";e.exports=__kbnSharedDeps__.Redux},53338:e=>{"use strict";e.exports=__kbnSharedDeps__.Reselect},80190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},95079:e=>{"use strict";e.exports=__kbnSharedDeps__.SaferLodashSet},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},9472:e=>{"use strict";e.exports=__kbnSharedDeps__.Uuid},52497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=t,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>"maps.chunk."+e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},i.l=(t,n,a,r)=>{if(e[t])e[t].push(n);else{var s,o;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var p=l[c];if(p.getAttribute("src")==t){s=p;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=t),e[t]=[n];var u=(n,i)=>{s.onerror=s.onload=null,clearTimeout(d);var a=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(i))),n)return n(i)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),o&&document.head.appendChild(s)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=n[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{i.b=document.baseURI||self.location.href;var e={522:0};i.f.j=(t,n)=>{var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise(((n,i)=>a=e[t]=[n,i]));n.push(a[2]=r);var s=i.p+i.u(t),o=new Error;i.l(s,(n=>{if(i.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,a[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var a,r,[s,o,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);l&&l(i)}for(t&&t(n);c<s.length;c++)r=s[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.maps_bundle_jsonpfunction=self.maps_bundle_jsonpfunction||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0,i(17248),__kbnBundles__.define("plugin/maps/public",i,94499),__kbnBundles__.define("plugin/maps/common",i,5850)})();