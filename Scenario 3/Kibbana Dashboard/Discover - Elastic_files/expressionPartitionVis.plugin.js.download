(()=>{var e,t={699:(e,t,s)=>{"use strict";s.d(t,{VG:()=>i,ml:()=>l,i3:()=>r,PO:()=>a,Zq:()=>n});const i=e=>{if(e){var t;const s=e=>e.type?e:e.child?s(e.child):void 0;return null===(t=s(e))||void 0===t?void 0:t.type}},n=e=>!!e&&Boolean(e.type&&"application"===e.type&&e.child&&"agg_based"===e.child.type),l=e=>{if(e){var t;const s=e=>e.child?s(e.child):e;return null===(t=s(e))||void 0===t?void 0:t.type}};function a(e,t){return e&&e[t]?Object.fromEntries(Object.entries(e[t]).map((([e,t])=>"ignore"===t?[e,void 0]:[e,t]))):{}}var o=s(195);function r(e=[],t,s){return t?e.filter((({[t]:e})=>!(void 0===e||null!=s&&s.includes(e)))).map((e=>{const s=e[t],i=((0,o.isMultiFieldKey)(s)?s.keys:[s]).map(String),n=i.join(",");return{key:i,stringifiedKeys:n}})).reduce(((e,{key:t,stringifiedKeys:s})=>(e.keys.has(s)||(e.keys.add(s),e.categories.push(1===t.length?t[0]:t)),e)),{keys:new Set,categories:[]}).categories:[]}},478:(e,t,s)=>{"use strict";s.d(t,{AF:()=>n,BH:()=>o,BL:()=>a,BR:()=>l,KO:()=>r,P5:()=>d,R1:()=>u,my:()=>p,s_:()=>i,y7:()=>c});const i="expressionPartitionVis",n="expressionPartitionVis",l="pieVis",a="treemapVis",o="mosaicVis",r="waffleVis",p="partitionVis",u="partitionLabelsValue",c="partitionLabels",d=2},143:(e,t,s)=>{"use strict";s.r(t),s.d(t,{EmptySizeRatios:()=>o.jS,LabelPositions:()=>o.Bn,LegendDisplay:()=>o.i5,MOSAIC_VIS_EXPRESSION_NAME:()=>i.BH,PARTITION_LABELS_FUNCTION:()=>i.y7,PARTITION_LABELS_VALUE:()=>i.R1,PIE_VIS_EXPRESSION_NAME:()=>i.BR,PLUGIN_ID:()=>i.s_,PLUGIN_NAME:()=>i.AF,TREEMAP_VIS_EXPRESSION_NAME:()=>i.BL,ValueFormats:()=>o.Sf,WAFFLE_VIS_EXPRESSION_NAME:()=>i.KO,mosaicVisFunction:()=>k,partitionLabelsFunction:()=>N,pieVisFunction:()=>V,treemapVisFunction:()=>O,waffleVisFunction:()=>I});var i=s(478),n=s(59),l=s(634),a=s(134),o=s(136),r=s(160),p=s(8);const u=()=>p.i18n.translate("expressionPartitionVis.pieVis.function.help",{defaultMessage:"Pie visualization"}),c=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.metricHelpText",{defaultMessage:"Metric dimensions config"}),d=()=>p.i18n.translate("expressionPartitionVis.metricToLabel.help",{defaultMessage:"JSON key-value pairs of column ID to label"}),g=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.bucketsHelpText",{defaultMessage:"Buckets dimensions config"}),f=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.splitColumnHelpText",{defaultMessage:"Split by column dimension config"}),m=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.splitRowHelpText",{defaultMessage:"Split by row dimension config"}),b=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.addTooltipHelpText",{defaultMessage:"Show tooltip on slice hover"}),h=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.legendDisplayHelpText",{defaultMessage:"Show legend chart legend"}),v=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.legendPositionHelpText",{defaultMessage:"Position the legend on top, bottom, left, right of the chart"}),y=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.legendSizeHelpText",{defaultMessage:"Specifies the legend size"}),_=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.nestedLegendHelpText",{defaultMessage:"Show a more detailed legend"}),L=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.truncateLegendHelpText",{defaultMessage:"Defines if the legend items will be truncated or not"}),E=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.maxLegendLinesHelpText",{defaultMessage:"Defines the number of lines per legend item"}),S=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.paletteHelpText",{defaultMessage:"Defines the chart palette name"}),P=()=>p.i18n.translate("expressionPartitionVis.reusable.function.args.labelsHelpText",{defaultMessage:"Pie labels config"}),x=()=>p.i18n.translate("expressionPartitionVis.reusable.functions.args.ariaLabelHelpText",{defaultMessage:"Specifies the aria label of the chart"}),T=()=>p.i18n.translate("expressionPartitionVis.reusable.function.dimension.metric",{defaultMessage:"Slice size"}),A=()=>p.i18n.translate("expressionPartitionVis.reusable.function.dimension.buckets",{defaultMessage:"Slice"}),w=()=>p.i18n.translate("expressionPartitionVis.reusable.function.dimension.splitcolumn",{defaultMessage:"Column split"}),D=()=>p.i18n.translate("expressionPartitionVis.reusable.function.dimension.splitrow",{defaultMessage:"Row split"}),M=()=>p.i18n.translate("expressionPartitionVis.layer.colorMapping.help",{defaultMessage:"JSON key-value pairs of the color mapping model"}),R=e=>p.i18n.translate("expressionPartitionVis.reusable.function.errors.moreThenNumberBuckets",{defaultMessage:"More than {maxLength} buckets are not supported.",values:{maxLength:e}}),C=()=>p.i18n.translate("expressionPartitionVis.reusable.function.errors.splitRowAndColumnSpecified",{defaultMessage:"A split row and column are specified. Expression is supporting only one of them at once."}),V=()=>({name:i.BR,type:"render",inputTypes:["datatable"],help:u(),args:{metrics:{types:["vis_dimension","string"],help:c(),required:!0,multi:!0},metricsToLabels:{types:["string"],help:d()},buckets:{types:["vis_dimension","string"],help:g(),multi:!0},splitColumn:{types:["vis_dimension","string"],help:f(),multi:!0},splitRow:{types:["vis_dimension","string"],help:m(),multi:!0},addTooltip:{types:["boolean"],help:b(),default:!0},legendDisplay:{types:["string"],help:h(),options:[o.i5.SHOW,o.i5.HIDE,o.i5.DEFAULT],default:o.i5.HIDE,strict:!0},legendPosition:{types:["string"],default:n.Position.Right,help:v(),options:[n.Position.Top,n.Position.Right,n.Position.Bottom,n.Position.Left],strict:!0},legendSize:{types:["string"],default:a.DEFAULT_LEGEND_SIZE,help:y(),options:[a.LegendSize.AUTO,a.LegendSize.SMALL,a.LegendSize.MEDIUM,a.LegendSize.LARGE,a.LegendSize.EXTRA_LARGE],strict:!0},nestedLegend:{types:["boolean"],help:_(),default:!1},truncateLegend:{types:["boolean"],help:L(),default:!0},maxLegendLines:{types:["number"],help:E()},distinctColors:{types:["boolean"],help:p.i18n.translate("expressionPartitionVis.pieVis.function.args.distinctColorsHelpText",{defaultMessage:"Maps different color per slice. Slices with the same value have the same color"}),default:!1},respectSourceOrder:{types:["boolean"],help:p.i18n.translate("expressionPartitionVis.reusable.function.args.respectSourceOrderHelpText",{defaultMessage:"Keeps an order of the elements, returned from the datasource"}),default:!0},isDonut:{types:["boolean"],help:p.i18n.translate("expressionPartitionVis.reusable.function.args.isDonutHelpText",{defaultMessage:"Displays the pie chart as donut"}),default:!1},emptySizeRatio:{types:["number"],help:p.i18n.translate("expressionPartitionVis.reusable.function.args.emptySizeRatioHelpText",{defaultMessage:"Defines donut inner empty area size"}),default:o.jS.SMALL},palette:{types:["palette","system_palette"],help:S(),default:"{palette}"},labels:{types:[i.R1],help:P(),default:`{${i.y7}}`},startFromSecondLargestSlice:{types:["boolean"],help:p.i18n.translate("expressionPartitionVis.reusable.function.args.startPlacementWithSecondLargestSliceHelpText",{defaultMessage:"Starts placement with the second largest slice"}),default:!0},ariaLabel:{types:["string"],help:x(),required:!1},colorMapping:{types:["string"],help:M()}},fn(e,t,s){var n,a,o,p,u,c,d,g,f,m;if(t.splitColumn&&t.splitRow)throw new Error(C());t.metrics.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.buckets&&t.buckets.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.splitColumn&&t.splitColumn.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.splitRow&&t.splitRow.forEach((t=>(0,l.validateAccessor)(t,e.columns)));const b={...t,metricsToLabels:t.metricsToLabels?JSON.parse(t.metricsToLabels):{},ariaLabel:null!==(n=null!==(a=t.ariaLabel)&&void 0!==a?a:null===(o=s.variables)||void 0===o?void 0:o.embeddableTitle)&&void 0!==n?n:null===(p=s.getExecutionContext)||void 0===p||null===(u=p.call(s))||void 0===u?void 0:u.description,palette:t.palette,dimensions:{metrics:t.metrics,buckets:t.buckets,splitColumn:t.splitColumn,splitRow:t.splitRow},colorMapping:t.colorMapping};if(null!=s&&null!==(c=s.inspectorAdapters)&&void 0!==c&&c.tables){s.inspectorAdapters.tables.reset(),s.inspectorAdapters.tables.allowCsvExport=!0;const i=(0,l.prepareLogTable)(e,[[t.metrics,T()],[t.buckets,A()],[t.splitColumn,w()],[t.splitRow,D()]],!0);s.inspectorAdapters.tables.logDatatable("default",i)}return{type:"render",as:i.my,value:{visData:e,visConfig:b,syncColors:null!==(d=null==s||null===(g=s.isSyncColorsEnabled)||void 0===g?void 0:g.call(s))&&void 0!==d&&d,visType:t.isDonut?r.wx.DONUT:r.wx.PIE,canNavigateToLens:Boolean(null==s||null===(f=s.variables)||void 0===f?void 0:f.canNavigateToLens),params:{listenOnChange:!0},overrides:null===(m=s.variables)||void 0===m?void 0:m.overrides}}}}),O=()=>({name:i.BL,type:"render",inputTypes:["datatable"],help:u(),args:{metrics:{types:["vis_dimension"],help:c(),required:!0,multi:!0},metricsToLabels:{types:["string"],help:d()},buckets:{types:["vis_dimension"],help:g(),multi:!0},splitColumn:{types:["vis_dimension"],help:f(),multi:!0},splitRow:{types:["vis_dimension"],help:m(),multi:!0},addTooltip:{types:["boolean"],help:b(),default:!0},legendDisplay:{types:["string"],help:h(),options:[o.i5.SHOW,o.i5.HIDE,o.i5.DEFAULT],default:o.i5.HIDE,strict:!0},legendPosition:{types:["string"],default:n.Position.Right,help:v(),options:[n.Position.Top,n.Position.Right,n.Position.Bottom,n.Position.Left],strict:!0},legendSize:{types:["string"],default:a.DEFAULT_LEGEND_SIZE,help:y(),options:[a.LegendSize.AUTO,a.LegendSize.SMALL,a.LegendSize.MEDIUM,a.LegendSize.LARGE,a.LegendSize.EXTRA_LARGE],strict:!0},nestedLegend:{types:["boolean"],help:_(),default:!1},truncateLegend:{types:["boolean"],help:L(),default:!0},maxLegendLines:{types:["number"],help:E()},palette:{types:["palette","system_palette"],help:S(),default:"{palette}"},labels:{types:[i.R1],help:P(),default:`{${i.y7}}`},ariaLabel:{types:["string"],help:x(),required:!1},colorMapping:{types:["string"],help:M()}},fn(e,t,s){var n,a,o,p,u,c,d,g,f,m;if((null!==(n=t.buckets)&&void 0!==n?n:[]).length>2)throw new Error(R(2));if(t.splitColumn&&t.splitRow)throw new Error(C());t.metrics.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.buckets&&t.buckets.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.splitColumn&&t.splitColumn.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.splitRow&&t.splitRow.forEach((t=>(0,l.validateAccessor)(t,e.columns)));const b={...t,metricsToLabels:t.metricsToLabels?JSON.parse(t.metricsToLabels):{},ariaLabel:null!==(a=null!==(o=t.ariaLabel)&&void 0!==o?o:null===(p=s.variables)||void 0===p?void 0:p.embeddableTitle)&&void 0!==a?a:null===(u=s.getExecutionContext)||void 0===u||null===(c=u.call(s))||void 0===c?void 0:c.description,palette:t.palette,dimensions:{metrics:t.metrics,buckets:t.buckets,splitColumn:t.splitColumn,splitRow:t.splitRow},colorMapping:t.colorMapping};if(null!=s&&null!==(d=s.inspectorAdapters)&&void 0!==d&&d.tables){s.inspectorAdapters.tables.reset(),s.inspectorAdapters.tables.allowCsvExport=!0;const i=(0,l.prepareLogTable)(e,[[t.metrics,T()],[t.buckets,A()],[t.splitColumn,w()],[t.splitRow,D()]],!0);s.inspectorAdapters.tables.logDatatable("default",i)}return{type:"render",as:i.my,value:{visData:e,visConfig:b,syncColors:null!==(g=null==s||null===(f=s.isSyncColorsEnabled)||void 0===f?void 0:f.call(s))&&void 0!==g&&g,visType:r.wx.TREEMAP,params:{listenOnChange:!0},overrides:null===(m=s.variables)||void 0===m?void 0:m.overrides}}}}),k=()=>({name:i.BH,type:"render",inputTypes:["datatable"],help:u(),args:{metric:{types:["string","vis_dimension"],help:c(),required:!0},buckets:{types:["string","vis_dimension"],help:g(),multi:!0},splitColumn:{types:["string","vis_dimension"],help:f(),multi:!0},splitRow:{types:["string","vis_dimension"],help:m(),multi:!0},addTooltip:{types:["boolean"],help:b(),default:!0},legendDisplay:{types:["string"],help:h(),options:[o.i5.SHOW,o.i5.HIDE,o.i5.DEFAULT],default:o.i5.HIDE,strict:!0},legendPosition:{types:["string"],default:n.Position.Right,help:v(),options:[n.Position.Top,n.Position.Right,n.Position.Bottom,n.Position.Left],strict:!0},legendSize:{types:["string"],default:a.DEFAULT_LEGEND_SIZE,help:y(),options:[a.LegendSize.AUTO,a.LegendSize.SMALL,a.LegendSize.MEDIUM,a.LegendSize.LARGE,a.LegendSize.EXTRA_LARGE],strict:!0},nestedLegend:{types:["boolean"],help:_(),default:!1},truncateLegend:{types:["boolean"],help:L(),default:!0},maxLegendLines:{types:["number"],help:E()},palette:{types:["palette","system_palette"],help:S(),default:"{palette}"},labels:{types:[i.R1],help:P(),default:`{${i.y7}}`},ariaLabel:{types:["string"],help:x(),required:!1},colorMapping:{types:["string"],help:M()}},fn(e,t,s){var n,a,o,p,u,c,d,g,f,m;if((null!==(n=t.buckets)&&void 0!==n?n:[]).length>2)throw new Error(R(2));if(t.splitColumn&&t.splitRow)throw new Error(C());(0,l.validateAccessor)(t.metric,e.columns),t.buckets&&t.buckets.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.splitColumn&&t.splitColumn.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.splitRow&&t.splitRow.forEach((t=>(0,l.validateAccessor)(t,e.columns)));const b={...t,metricsToLabels:{},ariaLabel:null!==(a=null!==(o=t.ariaLabel)&&void 0!==o?o:null===(p=s.variables)||void 0===p?void 0:p.embeddableTitle)&&void 0!==a?a:null===(u=s.getExecutionContext)||void 0===u||null===(c=u.call(s))||void 0===c?void 0:c.description,palette:t.palette,dimensions:{metrics:[t.metric],buckets:t.buckets,splitColumn:t.splitColumn,splitRow:t.splitRow},colorMapping:t.colorMapping};if(null!=s&&null!==(d=s.inspectorAdapters)&&void 0!==d&&d.tables){s.inspectorAdapters.tables.reset(),s.inspectorAdapters.tables.allowCsvExport=!0;const i=(0,l.prepareLogTable)(e,[[[t.metric],T()],[t.buckets,A()],[t.splitColumn,w()],[t.splitRow,D()]],!0);s.inspectorAdapters.tables.logDatatable("default",i)}return{type:"render",as:i.my,value:{visData:e,visConfig:b,syncColors:null!==(g=null==s||null===(f=s.isSyncColorsEnabled)||void 0===f?void 0:f.call(s))&&void 0!==g&&g,visType:r.wx.MOSAIC,params:{listenOnChange:!0},overrides:null===(m=s.variables)||void 0===m?void 0:m.overrides}}}}),I=()=>({name:i.KO,type:"render",inputTypes:["datatable"],help:u(),args:{metrics:{types:["vis_dimension"],help:c(),required:!0,multi:!0},metricsToLabels:{types:["string"],help:d()},bucket:{types:["vis_dimension"],help:p.i18n.translate("expressionPartitionVis.waffle.function.args.bucketHelpText",{defaultMessage:"Bucket dimensions config"})},splitColumn:{types:["vis_dimension"],help:f(),multi:!0},splitRow:{types:["vis_dimension"],help:m(),multi:!0},addTooltip:{types:["boolean"],help:b(),default:!0},legendDisplay:{types:["string"],help:h(),options:[o.i5.SHOW,o.i5.HIDE,o.i5.DEFAULT],default:o.i5.HIDE,strict:!0},legendPosition:{types:["string"],default:n.Position.Right,help:v(),options:[n.Position.Top,n.Position.Right,n.Position.Bottom,n.Position.Left],strict:!0},legendSize:{types:["string"],default:a.DEFAULT_LEGEND_SIZE,help:y(),options:[a.LegendSize.AUTO,a.LegendSize.SMALL,a.LegendSize.MEDIUM,a.LegendSize.LARGE,a.LegendSize.EXTRA_LARGE],strict:!0},legendStats:{types:["string"],multi:!0,help:p.i18n.translate("expressionPartitionVis.reusable.function.args.legendStatsArgHelp",{defaultMessage:"Defines the legend stats"})},truncateLegend:{types:["boolean"],help:L(),default:!0},maxLegendLines:{types:["number"],help:E()},palette:{types:["palette","system_palette"],help:S(),default:"{palette}"},labels:{types:[i.R1],help:P(),default:`{${i.y7}}`},ariaLabel:{types:["string"],help:x(),required:!1},colorMapping:{types:["string"],help:M()}},fn(e,t,s){var n,a,o,p,u,c,d,g,f;if(t.splitColumn&&t.splitRow)throw new Error(C());t.metrics.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.bucket&&(0,l.validateAccessor)(t.bucket,e.columns),t.splitColumn&&t.splitColumn.forEach((t=>(0,l.validateAccessor)(t,e.columns))),t.splitRow&&t.splitRow.forEach((t=>(0,l.validateAccessor)(t,e.columns)));const m=t.bucket?[t.bucket]:[],b={...t,metricsToLabels:t.metricsToLabels?JSON.parse(t.metricsToLabels):{},ariaLabel:null!==(n=null!==(a=t.ariaLabel)&&void 0!==a?a:null===(o=s.variables)||void 0===o?void 0:o.embeddableTitle)&&void 0!==n?n:null===(p=s.getExecutionContext)||void 0===p||null===(u=p.call(s))||void 0===u?void 0:u.description,palette:t.palette,dimensions:{metrics:t.metrics,buckets:m,splitColumn:t.splitColumn,splitRow:t.splitRow},colorMapping:t.colorMapping};if(null!=s&&null!==(c=s.inspectorAdapters)&&void 0!==c&&c.tables){s.inspectorAdapters.tables.reset(),s.inspectorAdapters.tables.allowCsvExport=!0;const i=(0,l.prepareLogTable)(e,[[t.metrics,T()],[m,A()],[t.splitColumn,w()],[t.splitRow,D()]],!0);s.inspectorAdapters.tables.logDatatable("default",i)}return{type:"render",as:i.my,value:{visData:e,visConfig:b,syncColors:null!==(d=null==s||null===(g=s.isSyncColorsEnabled)||void 0===g?void 0:g.call(s))&&void 0!==d&&d,visType:r.wx.WAFFLE,params:{listenOnChange:!0},overrides:null===(f=s.variables)||void 0===f?void 0:f.overrides}}}}),N=()=>({name:i.y7,help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.help",{defaultMessage:"Generates the partition labels object"}),type:i.R1,args:{show:{types:["boolean"],help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.args.show.help",{defaultMessage:"Displays the partition chart labels"}),default:!0},position:{types:["string"],default:"default",help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.args.position.help",{defaultMessage:"Defines the label position"}),options:[r.Bn.DEFAULT,r.Bn.INSIDE]},values:{types:["boolean"],help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.args.values.help",{defaultMessage:"Displays the values inside the slices"}),default:!0},percentDecimals:{types:["number"],help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.args.percentDecimals.help",{defaultMessage:"Defines the number of decimals that will appear on the values as percent"}),default:2},last_level:{types:["boolean"],help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.args.last_level.help",{defaultMessage:"Show top level labels only for multilayer pie/donut charts"}),default:!1},truncate:{types:["number","null"],help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.args.truncate.help",{defaultMessage:"Defines the number of characters that the slice value will display only for multilayer pie/donut charts"}),default:null},valuesFormat:{types:["string"],default:"percent",help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.args.valuesFormat.help",{defaultMessage:"Defines the format of the values"}),options:[r.Sf.PERCENT,r.Sf.VALUE]},colorOverrides:{types:["string"],help:p.i18n.translate("expressionPartitionVis.partitionLabels.function.args.colorOverrides.help",{defaultMessage:"Defines specific colors for specific labels."})}},fn:(e,t)=>({type:i.R1,show:t.show,position:t.position,percentDecimals:t.percentDecimals,values:t.values,valuesFormat:t.valuesFormat,colorOverrides:t.colorOverrides?JSON.parse(t.colorOverrides):{},truncate:t.truncate,last_level:t.last_level})})},136:(e,t,s)=>{"use strict";s.d(t,{Bn:()=>n,Sf:()=>l,i5:()=>a,jS:()=>i});let i=function(e){return e[e.SMALL=.3]="SMALL",e[e.MEDIUM=.54]="MEDIUM",e[e.LARGE=.7]="LARGE",e}({}),n=function(e){return e.INSIDE="inside",e.DEFAULT="default",e}({}),l=function(e){return e.PERCENT="percent",e.VALUE="value",e}({}),a=function(e){return e.SHOW="show",e.HIDE="hide",e.DEFAULT="default",e}({})},160:(e,t,s)=>{"use strict";s.d(t,{wx:()=>i,Bn:()=>n.Bn,i5:()=>n.i5,Sf:()=>n.Sf});let i=function(e){return e.PIE="pie",e.DONUT="donut",e.TREEMAP="treemap",e.MOSAIC="mosaic",e.WAFFLE="waffle",e}({});var n=s(136)},766:(e,t,s)=>{"use strict";s.r(t),s.d(t,{plugin:()=>_});var i=s(215),n=s(143),l=s(286);const a=__kbnSharedDeps__.ReactDom;var o=s(791),r=s(8),p=s(704);const u=__kbnSharedDeps__.KbnReactKibanaContextRender,c=__kbnSharedDeps__.KbnAnalytics;var d=s(634),g=s(699),f=s(478),m=s(160);const b=(0,l.lazy)((()=>s.e(673).then(s.bind(s,673)))),h=(0,p.withSuspense)(b),v={name:"zxsb69",styles:"position:relative;width:100%;height:100%"},y=async(e,t,s)=>Array.isArray(e.dimensions.buckets)&&s?Promise.all(e.dimensions.buckets.reduce(((e,i)=>{var n;const l=null===(n=(0,d.getColumnByAccessor)(i,t.columns))||void 0===n?void 0:n.meta;return l&&e.push(s([{columnMeta:l}])),e}),[])):[];class ExpressionPartitionVisPlugin{setup(e,{expressions:t,charts:s}){t.registerFunction(n.partitionLabelsFunction),t.registerFunction(n.pieVisFunction),t.registerFunction(n.treemapVisFunction),t.registerFunction(n.mosaicVisFunction),t.registerFunction(n.waffleVisFunction);const l=(0,i.createStartServicesGetter)(e.getStartServices);t.registerRenderer((({getStartDeps:e})=>({name:f.my,displayName:r.i18n.translate("expressionPartitionVis.renderer.partitionVis.pie.displayName",{defaultMessage:"Partition visualization"}),help:r.i18n.translate("expressionPartitionVis.renderer.partitionVis.pie.helpDescription",{defaultMessage:"Render pie/donut/treemap/mosaic/waffle charts"}),reuseDomNode:!0,render:async(t,{visConfig:s,visData:i,visType:n,syncColors:l,canNavigateToLens:r,overrides:p},d)=>{const{core:f,plugins:b}=e();d.onDestroy((()=>{(0,a.unmountComponentAtNode)(t)}));const[_,L]=await Promise.all([y(s,i,d.getCompatibleCellValueActions),b.charts.palettes.getPalettes()]),E=(0,g.Zq)(d.getExecutionContext());d.event({name:"chartSize",data:{maxDimensions:{x:{value:100,unit:"percentage"},y:{value:100,unit:"percentage"}}}}),(0,a.render)((0,o.jsx)(u.KibanaRenderContextProvider,f,(0,o.jsx)("div",{css:v},(0,o.jsx)(h,{chartsThemeService:b.charts.theme,palettesRegistry:L,visParams:s,visData:i,visType:s.isDonut?m.wx.DONUT:n,renderComplete:()=>{const e=d.getExecutionContext(),t=(0,g.VG)(e),s=(0,g.ml)(e);if(t&&s){var i;const e=[`render_${s}_${n}`,r?`render_${s}_${n}_convertable`:void 0].filter((e=>Boolean(e)));null===(i=b.usageCollection)||void 0===i||i.reportUiCounter(t,c.METRIC_TYPE.COUNT,e)}d.done()},fireEvent:d.event,interactive:d.isInteractive(),uiState:d.uiState,services:{data:b.data,fieldFormats:b.fieldFormats},syncColors:l,columnCellValueActions:_,overrides:p,hasOpenedOnAggBasedEditor:E}))),t)}}))({getStartDeps:l}))}start(e,t){}stop(){}}function _(){return new ExpressionPartitionVisPlugin}},545:(e,t,s)=>{s.p=window.__kbnPublicPath__.expressionPartitionVis},240:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},195:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},215:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},704:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},134:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/visualizations/common/constants");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},634:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},59:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},s={};function i(e){var n=s[e];if(void 0!==n)return n.exports;var l=s[e]={exports:{}};return t[e](l,l.exports,i),l.exports}i.m=t,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,s)=>(i.f[s](e,t),t)),[])),i.u=e=>"expressionPartitionVis.chunk."+e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},i.l=(t,s,n,l)=>{if(e[t])e[t].push(s);else{var a,o;if(void 0!==n)for(var r=document.getElementsByTagName("script"),p=0;p<r.length;p++){var u=r[p];if(u.getAttribute("src")==t){a=u;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=t),e[t]=[s];var c=(s,i)=>{a.onerror=a.onload=null,clearTimeout(d);var n=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(i))),s)return s(i)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=c.bind(null,a.onerror),a.onload=c.bind(null,a.onload),o&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=s[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={741:0};i.f.j=(t,s)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var l=new Promise(((s,i)=>n=e[t]=[s,i]));s.push(n[2]=l);var a=i.p+i.u(t),o=new Error;i.l(a,(s=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var l=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+l+": "+a+")",o.name="ChunkLoadError",o.type=l,o.request=a,n[1](o)}}),"chunk-"+t,t)}};var t=(t,s)=>{var n,l,[a,o,r]=s,p=0;if(a.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);r&&r(i)}for(t&&t(s);p<a.length;p++)l=a[p],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0},s=self.expressionPartitionVis_bundle_jsonpfunction=self.expressionPartitionVis_bundle_jsonpfunction||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i(545),__kbnBundles__.define("plugin/expressionPartitionVis/public",i,766),__kbnBundles__.define("plugin/expressionPartitionVis/common",i,143)})();