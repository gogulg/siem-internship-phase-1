/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t={4746:(e,t,i)=>{"use strict";i.d(t,{fJ:()=>s,EW:()=>l,qB:()=>n});var a=i(5008);const n=Object.freeze({warm:["data_warm","data_hot"],cold:["data_cold","data_warm","data_hot"],frozen:["data_frozen","data_cold","data_warm","data_hot"]}),s="enterprise",l={ID:"index_lifecycle_management",minimumLicenseType:"basic",TITLE:a.i18n.translate("xpack.indexLifecycleMgmt.appTitle",{defaultMessage:"Index Lifecycle Policies"})}},1616:(e,t,i)=>{"use strict";i.d(t,{dN:()=>r,AJ:()=>l,E3:()=>f,ns:()=>g,PW:()=>x,qA:()=>M,Zb:()=>y,cb:()=>u,$c:()=>m,Gt:()=>o,LJ:()=>d,y9:()=>p,lb:()=>c,n1:()=>h,CX:()=>a,G4:()=>s,Dj:()=>n});const a={hot:"100",warm:"50",cold:"0"},n={max_age:"30d",max_primary_shard_size:"50gb"},s={name:"",phases:{hot:{actions:{rollover:n}}}},l="index_lifecycle_management",r="app_load",o="policy_create",c="policy_update",d="policy_delete",u="policy_attach_index",m="policy_attach_index_template",p="policy_detach_index",f="config_cold_phase",x="config_warm_phase",g="config_set_priority",y="index_retry_step",M="edit_click",h="view_click"},5272:(e,t,i)=>{"use strict";i.d(t,{Cp:()=>m,EI:()=>M,G_:()=>p,Lp:()=>g,QU:()=>f,T$:()=>y,bg:()=>c,eL:()=>x,g_:()=>u,hd:()=>d,jr:()=>r,uB:()=>o,wb:()=>h});var a=i(6744),n=i(1616),s=i(9303),l=i(7514);const r=()=>(0,l.bP)({path:"nodes/list",method:"get",initialData:{nodesByAttributes:{},nodesByRoles:{}}}),o=e=>(0,l.bP)({path:`nodes/${e}/details`,method:"get"}),c=(e=!1)=>(0,l.bP)({path:"templates",query:{legacy:e},method:"get",initialData:[]});async function d(){return await(0,l.Vc)("policies")}const u=()=>(0,l.bP)({path:"policies",method:"get"});async function m(e){return await(0,l.vv)("policies",e)}async function p(e){const t=await(0,l._)(`policies/${encodeURIComponent(e)}`);return(0,s.UC)(a.METRIC_TYPE.COUNT,n.LJ),t}const f=async e=>{const t=await(0,l.vv)("index/retry",{indexNames:e});return(0,s.UC)(a.METRIC_TYPE.COUNT,n.Zb),t},x=async e=>{const t=await(0,l.vv)("index/remove",{indexNames:e});return(0,s.UC)(a.METRIC_TYPE.COUNT,n.y9),t},g=async e=>{const t=await(0,l.vv)("index/add",e);return(0,s.UC)(a.METRIC_TYPE.COUNT,n.cb),t},y=async(e,t=!1)=>{const i=await(0,l.vv)("template",e,{legacy:t});return(0,s.UC)(a.METRIC_TYPE.COUNT,n.$c),i},M=()=>(0,l.bP)({path:"snapshot_policies",method:"get",initialData:[]}),h=()=>(0,l.bP)({path:"snapshot_repositories",method:"get"})},2420:(e,t,i)=>{"use strict";i.d(t,{U:()=>n});var a=i(29);function n(e,t){const i=function(e,t){if(e&&e.body){var i;const{error:a,statusCode:n,message:s,attributes:l}=e.body;return{title:t,text:`${n}: ${a}. ${null!=l&&null!==(i=l.causes)&&void 0!==i&&i.length?l.causes[l.causes.length-1]:s}`}}}(e,t);if(i)return a.bF.addDanger(i);a.g8.add(e,t)}},7514:(e,t,i)=>{"use strict";i.d(t,{Ts:()=>s,Vc:()=>o,_:()=>c,bP:()=>d,vv:()=>r});var a=i(8744);let n;function s(e){n=e}function l(e){const t="/api/index_lifecycle_management";return e?`${t}/${e}`:t}function r(e,t,i){return n.post(l(e),{body:JSON.stringify(t),query:i})}function o(e,t){return n.get(l(e),{query:t})}function c(e){return n.delete(l(e))}const d=e=>(0,a.useRequest)(n,{...e,path:l(e.path)})},6236:(e,t,i)=>{"use strict";i.d(t,{Bb:()=>c,GD:()=>o,OR:()=>s,bw:()=>n,w:()=>r,zi:()=>l});var a=i(4319);const n={list:"/policies",edit:"/policies/edit/:policyName?",create:"/policies/edit"},s=e=>encodeURI(`/policies/edit/${encodeURIComponent(e)}`),l=e=>encodeURI(`/policies?policy=${encodeURIComponent(e)}`),r=()=>n.create,o=()=>n.list,c=(e,t)=>t("management",{path:`/data/index_management${(0,a.getIndexListUri)(`ilm.policy="${e}"`,!0)}`})},29:(e,t,i)=>{"use strict";let a,n;function s(e,t){a=e,n=t}i.d(t,{Ts:()=>s,bF:()=>a,g8:()=>n})},9303:(e,t,i)=>{"use strict";i.d(t,{Ts:()=>s,UC:()=>n,bd:()=>l});var a=i(1616);let n=(e,t)=>{};function s(e){e&&(n=e.reportUiCounter.bind(e,a.AJ))}function l(e){return[{metric:a.E3,isTracked:()=>Boolean(e.cold)},{metric:a.PW,isTracked:()=>Boolean(e.warm)},{metric:a.ns,isTracked:()=>{const t=e.hot&&e.hot.actions.set_priority&&e.hot.actions.set_priority.priority!==parseInt(a.CX.hot,10),i=e.warm&&e.warm.actions.set_priority&&e.warm.actions.set_priority.priority!==parseInt(a.CX.warm,10),n=e.cold&&e.cold.actions.set_priority&&e.cold.actions.set_priority.priority!==parseInt(a.CX.cold,10);return t||i||n}}].reduce(((e,{metric:t,isTracked:i})=>(i()&&e.push(t),e)),[])}},3089:(e,t,i)=>{"use strict";i.r(t),i.d(t,{plugin:()=>S});var a=i(8915);const n=__kbnSharedDeps__.Rxjs;var s=i(5008),l=i(4746),r=i(7514),o=i(9303),c=i(29);const d=function(){const e=[{text:s.i18n.translate("xpack.indexLifecycleMgmt.breadcrumb.homeLabel",{defaultMessage:"Index Lifecycle Management"}),href:"/policies"}];return{policies:e,editPolicy:[...e,{text:s.i18n.translate("xpack.indexLifecycleMgmt.breadcrumb.editPolicyLabel",{defaultMessage:"Edit policy"}),href:void 0}]}}();class BreadcrumbService{constructor(){(0,a.default)(this,"setBreadcrumbsHandler",void 0)}setup(e){this.setBreadcrumbsHandler=e}setBreadcrumbs(e){if(!this.setBreadcrumbsHandler)throw new Error("BreadcrumbService#setup() must be called first!");const t=d[e]?[...d[e]]:[...d.policies],i=t.pop();t.push({...i,href:void 0}),this.setBreadcrumbsHandler(t)}}var u=i(4286),m=i.n(u),p=i(770),f=i(1319),x=i(5272);const g=__kbnSharedDeps__.MomentTimezone;var y=i.n(g),M=i(5879),h=i(6791),b=i(6236),_={name:"o84bs6",styles:"min-width:600px"},L={name:"1mhs1aw",styles:"min-width:400px"};const v={id:"ilm",name:(0,h.jsx)(M.FormattedMessage,{defaultMessage:"Index lifecycle",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.tabHeaderLabel"}),order:50,renderTabContent:({index:e,getUrlForApp:t,euiTheme:i})=>{var a;const{ilm:n}=e,l=n,r="EUI_THEME_BOREALIS"===i.themeName,o=null!==(a={hot:{color:r?i.colors.vis.euiColorVis6:i.colors.vis.euiColorVis9,label:"Hot"},warm:{color:r?i.colors.vis.euiColorVis9:i.colors.vis.euiColorVis5,label:"Warm"},cold:{color:r?i.colors.vis.euiColorVis2:i.colors.vis.euiColorVis1,label:"Cold"},frozen:{color:i.colors.vis.euiColorVis4,label:"Frozen"},delete:{color:"default",label:"Delete"}}[l.phase])&&void 0!==a?a:{color:"default",label:l.phase},c=[{title:s.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.policyNameTitle",{defaultMessage:"Policy name"}),description:l.policy},{title:s.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentPhaseTitle",{defaultMessage:"Current phase"}),description:(0,h.jsx)(f.EuiBadge,{color:o.color},o.label)}];return l.action&&c.push({title:s.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentActionTitle",{defaultMessage:"Current action"}),description:(0,h.jsx)(f.EuiCode,null,l.action)}),l.action_time_millis&&c.push({title:s.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentActionTimeTitle",{defaultMessage:"Current action time"}),description:y()(l.action_time_millis).format("YYYY-MM-DD HH:mm:ss")}),l.step&&c.push({title:s.i18n.translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentStepTitle",{defaultMessage:"Current step"}),description:(0,h.jsx)(f.EuiCode,null,l.step)}),(0,h.jsx)(m().Fragment,null,(0,h.jsx)(f.EuiFlexGroup,{wrap:!0},(0,h.jsx)(f.EuiFlexItem,{grow:1,css:L},(0,h.jsx)(f.EuiPanel,{hasBorder:!0,grow:!1,"data-test-subj":"policyPropertiesPanel"},(0,h.jsx)(f.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},(0,h.jsx)(f.EuiFlexItem,{grow:!1},(0,h.jsx)(f.EuiText,{size:"xs"},(0,h.jsx)("h3",null,(0,h.jsx)(M.FormattedMessage,{defaultMessage:"Lifecycle policy",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.policyCardTitle"})))),(0,h.jsx)(f.EuiFlexItem,{grow:!1},(0,h.jsx)(f.EuiLink,{color:"primary",href:t("management",{path:`data/index_lifecycle_management/${(0,b.OR)(l.policy)}`}),target:"_blank"},(0,h.jsx)(M.FormattedMessage,{defaultMessage:"Edit policy in ILM",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.ilmLinkLabel"})))),(0,h.jsx)(f.EuiSpacer,null),(0,h.jsx)(f.EuiDescriptionList,{rowGutterSize:"m",type:"responsiveColumn",columnWidths:[1,1],listItems:c}))),(0,h.jsx)(f.EuiFlexItem,{grow:3,css:_},l.step_info&&"ERROR"===l.step&&(0,h.jsx)(m().Fragment,null,(0,h.jsx)(f.EuiPanel,{color:"danger",hasBorder:!0,grow:!1,"data-test-subj":"policyErrorPanel"},(0,h.jsx)(f.EuiText,{size:"xs"},(0,h.jsx)("h3",null,(0,h.jsx)(M.FormattedMessage,{defaultMessage:"Lifecycle error",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.lifecycleErrorTitle"})),(0,h.jsx)(f.EuiSpacer,null),(0,h.jsx)(f.EuiCodeBlock,{language:"json",isCopyable:!0},JSON.stringify({failed_step:l.failed_step,step_info:l.step_info},null,2)))),(0,h.jsx)(f.EuiSpacer,null)),l.step_info&&"ERROR"!==l.step&&(0,h.jsx)(m().Fragment,null,(0,h.jsx)(f.EuiPanel,{hasBorder:!0,grow:!1,"data-test-subj":"policyStepPanel"},(0,h.jsx)(f.EuiText,{size:"xs"},(0,h.jsx)("h3",null,(0,h.jsx)(M.FormattedMessage,{defaultMessage:"Current step info",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.stepInfoTitle"})),(0,h.jsx)(f.EuiSpacer,null),(0,h.jsx)(f.EuiCodeBlock,{language:"json",isCopyable:!0},JSON.stringify(l.step_info,null,2)))),(0,h.jsx)(f.EuiSpacer,null)),l.phase_execution&&(0,h.jsx)(f.EuiPanel,{hasBorder:!0,grow:!1,"data-test-subj":"phaseDefinitionPanel"},(0,h.jsx)(f.EuiText,{size:"xs"},(0,h.jsx)("h3",null,(0,h.jsx)(M.FormattedMessage,{defaultMessage:"Current phase definition",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.phaseDefinitionTitle"}))),(0,h.jsx)(f.EuiSpacer,null),(0,h.jsx)(f.EuiCodeBlock,{language:"json",isCopyable:!0},JSON.stringify(l.phase_execution,null,2))))))},shouldRenderTab:({index:e})=>!!e.ilm&&e.ilm.managed};var j=i(2420);class AddLifecyclePolicyConfirmModal extends u.Component{constructor(e){super(e),(0,a.default)(this,"addPolicy",(async()=>{const{indexName:e,closeModal:t,reloadIndices:i}=this.props,{selectedPolicyName:a,selectedAlias:n}=this.state;if(a)try{const l={indexName:e,policyName:a,alias:n};await(0,x.Lp)(l),t(),c.bF.addSuccess(s.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyToIndexSuccess",{defaultMessage:"Added policy {policyName} to index {indexName}.",values:{policyName:a,indexName:e}})),i()}catch(e){(0,j.U)(e,s.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyToIndexError",{defaultMessage:"Error adding policy to index"}))}else this.setState({policyErrorMessage:s.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.noPolicySelectedErrorMessage",{defaultMessage:"You must select a policy."})})})),(0,a.default)(this,"renderAliasFormElement",(e=>{const{selectedAlias:t}=this.state,{index:i}=this.props;if(!e||!(0,p.get)(e,"policy.phases.hot.actions.rollover"))return null;const{aliases:a}=i;if("none"===a)return(0,h.jsx)(u.Fragment,null,(0,h.jsx)(f.EuiSpacer,{size:"m"}),(0,h.jsx)(f.EuiCallOut,{style:{maxWidth:400},title:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.indexHasNoAliasesWarningTitle",defaultMessage:"Index has no aliases"}),color:"warning"},(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.indexHasNoAliasesWarningMessage",defaultMessage:"Policy {policyName} is configured for rollover, but index {indexName} does not have an alias, which is required for rollover.",values:{policyName:null==e?void 0:e.name,indexName:i.name}})));const n=a.map((e=>({text:e,value:e})));return n.unshift({text:s.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.chooseAliasMessage",{defaultMessage:"Choose an alias"}),value:""}),(0,h.jsx)(f.EuiFormRow,{label:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.chooseAliasLabel",defaultMessage:"Index rollover alias"})},(0,h.jsx)(f.EuiSelect,{options:n,value:t,onChange:e=>{this.setState({selectedAlias:e.target.value})}}))})),this.state={policies:[],selectedPolicyName:"",selectedAlias:"",isLoading:!0}}renderForm(){const{policies:e,selectedPolicyName:t,policyErrorMessage:i}=this.state,a=t?e.find((e=>e.name===t)):void 0,n=e.map((({name:e})=>({value:e,text:e})));return n.unshift({value:"",text:s.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.choosePolicyMessage",{defaultMessage:"Select a lifecycle policy"})}),(0,h.jsx)(f.EuiForm,null,(0,h.jsx)(f.EuiFormRow,{isInvalid:!!i,error:i,label:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.choosePolicyLabel",defaultMessage:"Lifecycle policy"})},(0,h.jsx)(f.EuiSelect,{options:n,value:t,onChange:e=>{this.setState({policyErrorMessage:void 0,selectedPolicyName:e.target.value})}})),this.renderAliasFormElement(a))}async componentDidMount(){try{const e=await(0,x.hd)();this.setState({policies:e,isLoading:!1})}catch(e){(0,j.U)(e,s.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.loadPolicyError",{defaultMessage:"Error loading policy list"})),this.props.closeModal()}}render(){const{policies:e,isLoading:t}=this.state,{indexName:i,closeModal:a,getUrlForApp:n}=this.props,s=(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.modalTitle",defaultMessage:'Add lifecycle policy to "{indexName}"',values:{indexName:i}});return t||e.length?(0,h.jsx)(f.EuiConfirmModal,{title:s,onCancel:a,onConfirm:this.addPolicy,cancelButtonText:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.cancelButtonText",defaultMessage:"Cancel"}),confirmButtonText:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyButtonText",defaultMessage:"Add policy"})},this.renderForm()):(0,h.jsx)(f.EuiModal,{onClose:a},(0,h.jsx)(f.EuiModalHeader,null,(0,h.jsx)(f.EuiModalHeaderTitle,null,s)),(0,h.jsx)(f.EuiModalBody,null,(0,h.jsx)(f.EuiCallOut,{style:{maxWidth:400},title:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.noPoliciesWarningTitle",defaultMessage:"No index lifecycle policies defined"}),color:"warning"},(0,h.jsx)("p",null,(0,h.jsx)(f.EuiLink,{href:n("management",{path:"data/index_lifecycle_management/policies/edit"})},(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.defineLifecyclePolicyLinkText",defaultMessage:"Define lifecycle policy"}))))))}}class RemoveLifecyclePolicyConfirmModal extends u.Component{constructor(...e){super(...e),(0,a.default)(this,"removePolicy",(async()=>{const{indexNames:e,closeModal:t,reloadIndices:i}=this.props;try{await(0,x.eL)(e),t(),c.bF.addSuccess(s.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicySuccess",{defaultMessage:"Removed lifecycle policy from {count, plural, one {index} other {indices}}",values:{count:e.length}})),i()}catch(e){(0,j.U)(e,s.i18n.translate("xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicyToIndexError",{defaultMessage:"Error removing policy"}))}}))}render(){const{closeModal:e,indexNames:t}=this.props;return(0,h.jsx)(f.EuiConfirmModal,{title:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.modalTitle",defaultMessage:"Remove lifecycle policy from {count, plural, one {index} other {indices}}",values:{count:t.length}}),onCancel:e,onConfirm:this.removePolicy,cancelButtonText:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.cancelButtonText",defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicyButtonText",defaultMessage:"Remove policy"})},(0,h.jsx)(u.Fragment,null,(0,h.jsx)("p",null,(0,h.jsx)(M.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removeMessage",defaultMessage:"You are about to remove the index lifecycle policy from {count, plural, one {this index} other {these indices}}. This operation cannot be undone.",values:{count:t.length}})),(0,h.jsx)("ul",null,t.map((e=>(0,h.jsx)("li",{key:e},e))))))}}const C="ilm.step",E=({indices:e})=>{if(!(0,p.every)(e,(e=>{var t;return(null===(t=e.ilm)||void 0===t?void 0:t.managed)&&e.ilm.failed_step})))return null;const t=e.map((({name:e})=>e));return{requestMethod:x.QU,icon:"play",indexNames:[t],buttonLabel:s.i18n.translate("xpack.indexLifecycleMgmt.retryIndexLifecycleActionButtonLabel",{defaultMessage:"Retry lifecycle step"}),successMessage:s.i18n.translate("xpack.indexLifecycleMgmt.retryIndexLifecycleAction.retriedLifecycleMessage",{defaultMessage:"Called retry lifecycle step for: {indexNames}",values:{indexNames:t.map((e=>`"${e}"`)).join(", ")}})}},T=({indices:e,reloadIndices:t})=>{if(!(0,p.every)(e,(e=>e.ilm&&e.ilm.managed)))return null;const i=e.map((({name:e})=>e));return{renderConfirmModal:e=>(0,h.jsx)(RemoveLifecyclePolicyConfirmModal,{indexNames:i,closeModal:e,reloadIndices:t}),icon:"stopFilled",indexNames:[i],buttonLabel:s.i18n.translate("xpack.indexLifecycleMgmt.removeIndexLifecycleActionButtonLabel",{defaultMessage:"Remove lifecycle policy"})}},k=({indices:e,reloadIndices:t,getUrlForApp:i})=>{if(1!==e.length)return null;const a=e[0];if(a.ilm&&a.ilm.managed)return null;const n=a.name;return{renderConfirmModal:e=>(0,h.jsx)(AddLifecyclePolicyConfirmModal,{indexName:n,closeModal:e,index:a,reloadIndices:t,getUrlForApp:i}),icon:"plusInCircle",buttonLabel:s.i18n.translate("xpack.indexLifecycleMgmt.addLifecyclePolicyActionButtonLabel",{defaultMessage:"Add lifecycle policy"})}},P=e=>{var t,i;const{Query:a}=f.EuiSearchBar;if(!e.length)return null;const n=e.filter((e=>"ERROR"===(0,p.get)(e,C))),l=n.length;if(!l)return null;const{requestMethod:r,successMessage:o,indexNames:c,buttonLabel:d}=null!==(t=E({indices:n}))&&void 0!==t?t:{};return{type:"warning",filter:a.parse(`${C}:ERROR`),filterLabel:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtBanner.filterLabel",{defaultMessage:"Show errors"}),action:{buttonLabel:d,indexNames:null!==(i=null==c?void 0:c[0])&&void 0!==i?i:[],requestMethod:r,successMessage:o},title:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtBanner.errorMessage",{defaultMessage:"{ numIndicesWithLifecycleErrors, number}\n          {numIndicesWithLifecycleErrors, plural, one {index has} other {indices have} }\n          lifecycle errors",values:{numIndicesWithLifecycleErrors:l}})}},w=e=>(0,p.some)(e,(e=>e.ilm&&e.ilm.managed))?[{type:"field_value_selection",name:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.lifecycleStatusLabel",{defaultMessage:"Lifecycle status"}),multiSelect:!1,field:"ilm.managed",options:[{value:!0,view:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.managedLabel",{defaultMessage:"Managed"})},{value:!1,view:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.unmanagedLabel",{defaultMessage:"Unmanaged"})}]},{type:"field_value_selection",field:"ilm.phase",name:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.lifecyclePhaseLabel",{defaultMessage:"Lifecycle phase"}),multiSelect:"or",autoSortOptions:!1,options:[{value:"hot",view:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.hotLabel",{defaultMessage:"Hot"})},{value:"warm",view:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.warmLabel",{defaultMessage:"Warm"})},{value:"frozen",view:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.frozenLabel",{defaultMessage:"Frozen"})},{value:"cold",view:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.coldLabel",{defaultMessage:"Cold"})},{value:"delete",view:s.i18n.translate("xpack.indexLifecycleMgmt.indexMgmtFilter.deleteLabel",{defaultMessage:"Delete"})}]}]:[];class IlmLocatorDefinition{constructor(e){(0,a.default)(this,"id","ILM_LOCATOR_ID"),(0,a.default)(this,"getLocation",(async e=>{const t=await this.deps.managementAppLocator.getLocation({sectionId:"data",appId:l.EW.ID});switch(e.page){case"policy_create":return{...t,path:t.path+(0,b.w)()};case"policy_edit":return{...t,path:t.path+(0,b.OR)(e.policyName)};case"policies_list":return{...t,path:t.path+(0,b.GD)()}}})),this.deps=e}}class IndexLifecycleManagementPlugin{constructor(e){(0,a.default)(this,"breadcrumbService",new BreadcrumbService),this.initializerContext=e}setup(e,t){const{ui:{enabled:a}}=this.initializerContext.config.get();if(a){const{http:a,notifications:{toasts:u},fatalErrors:m,getStartServices:p}=e,{usageCollection:f,management:x,indexManagement:g,home:y,cloud:M}=t;(0,r.Ts)(a),(0,o.Ts)(f),(0,c.Ts)(u,m),x.sections.section.data.registerApp({id:l.EW.ID,title:l.EW.TITLE,order:2,mount:async({element:e,history:t,setBreadcrumbs:a})=>{const[s,{licensing:r}]=await p(),{chrome:{docTitle:o},application:c,docLinks:d,executionContext:u}=s,m=await(0,n.firstValueFrom)(r.license$);o.change(l.EW.TITLE),this.breadcrumbService.setup(a);const{renderApp:f}=await i.e(416).then(i.bind(i,9416)),x=f(s,e,t,c,this.breadcrumbService,m,d,u,M);return()=>{o.reset(),x()}}}),y&&y.featureCatalogue.register({id:l.EW.ID,title:s.i18n.translate("xpack.indexLifecycleMgmt.featureCatalogueTitle",{defaultMessage:"Manage index lifecycles"}),description:s.i18n.translate("xpack.indexLifecycleMgmt.featureCatalogueDescription",{defaultMessage:"Define lifecycle policies to automatically perform operations as an index ages."}),icon:"indexRollupApp",path:"/app/management/data/index_lifecycle_management",showOnHomePage:!0,category:"admin",order:640}),g&&((d=g.extensionsService).addAction(E),d.addAction(T),d.addAction(k),d.addBanner(P),d.addFilter(w),d.addIndexDetailsTab(v)),t.share.url.locators.create(new IlmLocatorDefinition({managementAppLocator:t.management.locator}))}var d}start(){}stop(){}}const S=e=>new IndexLifecycleManagementPlugin(e)},1380:(e,t,i)=>{i.p=window.__kbnPublicPath__.indexLifecycleManagement},4390:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},8744:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},5296:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/esUiShared/static/forms/components");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},791:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/esUiShared/static/forms/helpers");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},2602:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/esUiShared/static/forms/hook_form_lib");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},4319:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/indexManagement/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},409:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},8915:(e,t,i)=>{e.exports=i(2497)(67493)},1319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},6791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},6351:e=>{"use strict";e.exports=__kbnSharedDeps__.Immer},6744:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnAnalytics},5008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},5879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},193:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxRouter},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},1783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},4286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},2874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},1493:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRouterDom},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},9472:e=>{"use strict";e.exports=__kbnSharedDeps__.Uuid},2497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},i={};function a(e){var n=i[e];if(void 0!==n)return n.exports;var s=i[e]={id:e,exports:{}};return t[e](s,s.exports,a),s.exports}a.m=t,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,i)=>(a.f[i](e,t),t)),[])),a.u=e=>"indexLifecycleManagement.chunk."+e+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},a.l=(t,i,n,s)=>{if(e[t])e[t].push(i);else{var l,r;if(void 0!==n)for(var o=document.getElementsByTagName("script"),c=0;c<o.length;c++){var d=o[c];if(d.getAttribute("src")==t){l=d;break}}l||(r=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=t),e[t]=[i];var u=(i,a)=>{l.onerror=l.onload=null,clearTimeout(m);var n=e[t];if(delete e[t],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((e=>e(a))),i)return i(a)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),r&&document.head.appendChild(l)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={98:0};a.f.j=(t,i)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise(((i,a)=>n=e[t]=[i,a]));i.push(n[2]=s);var l=a.p+a.u(t),r=new Error;a.l(l,(i=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+s+": "+l+")",r.name="ChunkLoadError",r.type=s,r.request=l,n[1](r)}}),"chunk-"+t,t)}};var t=(t,i)=>{var n,s,[l,r,o]=i,c=0;if(l.some((t=>0!==e[t]))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);o&&o(a)}for(t&&t(i);c<l.length;c++)s=l[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.indexLifecycleManagement_bundle_jsonpfunction=self.indexLifecycleManagement_bundle_jsonpfunction||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),a.nc=void 0,a(1380),__kbnBundles__.define("plugin/indexLifecycleManagement/public",a,3089)})();