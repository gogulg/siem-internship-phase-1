/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t={489:(e,t,s)=>{"use strict";s.r(t),s.d(t,{InventoryFormatterTypeRT:()=>_e,InventoryMetricRT:()=>we,InventoryVisTypeRT:()=>ve,ItemTypeRT:()=>ge,METRICS_EXPLORER_API_MAX_METRICS:()=>a,MetricsAPIColumnRT:()=>at,MetricsAPIColumnTypeRT:()=>it,MetricsAPIMetricRT:()=>Ze,MetricsAPIPageInfoRT:()=>st,MetricsAPIRequestRT:()=>et,MetricsAPIResponseRT:()=>ot,MetricsAPIResponseSeriesRT:()=>lt,MetricsAPIRowRT:()=>rt,MetricsAPISeriesRT:()=>nt,SnapshotMetricTypeKeys:()=>Oe,SnapshotMetricTypeRT:()=>Re,awsEC2SnapshotMetricTypes:()=>h,awsRDSSnapshotMetricTypes:()=>Q,awsS3SnapshotMetricTypes:()=>R,awsSQSSnapshotMetricTypes:()=>J,containerSnapshotMetricTypes:()=>ee,findInventoryFields:()=>de,findInventoryModel:()=>ne,getFieldByType:()=>oe,hostSnapshotMetricTypes:()=>o,inventoryModels:()=>re,isBasicMetricAgg:()=>ue,isDerivativeAgg:()=>ce,isSumBucketAgg:()=>pe,isTermsWithAggregation:()=>me,metrics:()=>ie,networkTraffic:()=>p,podSnapshotMetricTypes:()=>y});var i=s(8);const a=20,r={cpuV2:{cpuV2:{avg:{field:"system.cpu.total.norm.pct"}}},diskLatency:{diskio_read_time:{avg:{field:"system.diskio.read.time"}},diskio_write_time:{avg:{field:"system.diskio.write.time"}},diskio_read_count:{avg:{field:"system.diskio.read.count"}},diskio_write_count:{avg:{field:"system.diskio.write.count"}},diskLatency:{bucket_script:{buckets_path:{read_time:"diskio_read_time",write_time:"diskio_write_time",read_count:"diskio_read_count",write_count:"diskio_write_count"},script:{source:"(params.write_time + params.read_time) / (params.read_count + params.write_count)",lang:"painless"},gap_policy:"skip"}}},diskSpaceUsage:{diskSpaceUsage:{max:{field:"system.filesystem.used.pct"}}},count:{count:{bucket_script:{buckets_path:{count:"_count"},script:{source:"count * 1",lang:"expression"},gap_policy:"skip"}}},load:{load:{avg:{field:"system.load.5"}}},logRate:{count:{bucket_script:{buckets_path:{count:"_count"},script:{source:"count * 1",lang:"expression"},gap_policy:"skip"}},cumsum:{cumulative_sum:{buckets_path:"count"}},logRate:{derivative:{buckets_path:"cumsum",gap_policy:"skip",unit:"1s"}}},memory:{memory:{avg:{field:"system.memory.actual.used.pct"}}},memoryFree:{memory_total:{max:{field:"system.memory.total"}},used_bytes:{avg:{field:"system.memory.actual.used.bytes"}},memoryFree:{bucket_script:{buckets_path:{memoryTotal:"memory_total",usedBytes:"used_bytes"},script:{source:"params.memoryTotal - params.usedBytes",lang:"painless"},gap_policy:"skip"}}},memoryTotal:{memory_total:{avg:{field:"system.memory.total"}},memoryTotal:{bucket_script:{buckets_path:{memoryTotal:"memory_total"},script:{source:"params.memoryTotal",lang:"painless"},gap_policy:"skip"}}},normalizedLoad1m:{load_1m:{avg:{field:"system.load.1"}},max_cores:{max:{field:"system.load.cores"}},normalizedLoad1m:{bucket_script:{buckets_path:{load1m:"load_1m",maxCores:"max_cores"},script:{source:"params.load1m / params.maxCores",lang:"painless"},gap_policy:"skip"}}},rxV2:{rx_sum:{sum:{field:"host.network.ingress.bytes"}},min_timestamp:{min:{field:"@timestamp"}},max_timestamp:{max:{field:"@timestamp"}},rxV2:{bucket_script:{buckets_path:{value:"rx_sum",minTime:"min_timestamp",maxTime:"max_timestamp"},script:{source:"params.value / ((params.maxTime - params.minTime) / 1000)",lang:"painless"},gap_policy:"skip"}}},txV2:{tx_sum:{sum:{field:"host.network.egress.bytes"}},min_timestamp:{min:{field:"@timestamp"}},max_timestamp:{max:{field:"@timestamp"}},txV2:{bucket_script:{buckets_path:{value:"tx_sum",minTime:"min_timestamp",maxTime:"max_timestamp"},script:{source:"params.value / ((params.maxTime - params.minTime) / 1000)",lang:"painless"},gap_policy:"skip"}}},cpu:{cpu_user:{avg:{field:"system.cpu.user.pct"}},cpu_system:{avg:{field:"system.cpu.system.pct"}},cpu_cores:{max:{field:"system.cpu.cores"}},cpu:{bucket_script:{buckets_path:{user:"cpu_user",system:"cpu_system",cores:"cpu_cores"},script:{source:"(params.user + params.system) / params.cores",lang:"painless"},gap_policy:"skip"}}},rx:{rx_avg:{avg:{field:"host.network.ingress.bytes"}},rx_period:{filter:{exists:{field:"host.network.ingress.bytes"}},aggs:{period:{max:{field:"metricset.period"}}}},rx:{bucket_script:{buckets_path:{value:"rx_avg",period:"rx_period>period"},script:{source:"params.value / (params.period / 1000)",lang:"painless"},gap_policy:"skip"}}},tx:{tx_avg:{avg:{field:"host.network.egress.bytes"}},tx_period:{filter:{exists:{field:"host.network.egress.bytes"}},aggs:{period:{max:{field:"metricset.period"}}}},tx:{bucket_script:{buckets_path:{value:"tx_avg",period:"tx_period>period"},script:{source:"params.value / (params.period / 1000)",lang:"painless"},gap_policy:"skip"}}}},{count:n,...l}=r,o=Object.keys(l),d={snapshot:r,getFormulas:async()=>await s.e(604).then(s.bind(s,604)).then((({formulas:e})=>e)),getCharts:async()=>await s.e(205).then(s.bind(s,205)).then((({charts:e})=>e)),defaultSnapshot:"cpuV2",defaultTimeRangeInSeconds:3600},u=["nginxHits","nginxRequestRate","nginxActiveConnections","nginxRequestsPerConnection"],c={id:"host",displayName:i.i18n.translate("xpack.metricsData.inventoryModel.host.displayName",{defaultMessage:"Hosts"}),singularDisplayName:i.i18n.translate("xpack.metricsData.inventoryModels.host.singularDisplayName",{defaultMessage:"Host"}),requiredModule:"system",crosslinkSupport:{details:!0,logs:!0,apm:!0,uptime:!0},fields:{id:"host.name",name:"host.name",os:"host.os.name",ip:"host.ip",cloudProvider:"cloud.provider"},metrics:d,requiredMetrics:["hostSystemOverview","hostCpuUsageTotal","hostCpuUsage","hostLoad","hostMemoryUsage","hostNetworkTraffic","hostK8sOverview","hostK8sCpuCap","hostK8sMemoryCap","hostK8sDiskCap","hostK8sPodCap","awsOverview","awsCpuUtilization","awsNetworkBytes","awsNetworkPackets","awsDiskioOps","awsDiskioBytes",...u],tooltipMetrics:["cpuV2","memory","txV2","rxV2","cpu","tx","rx"],legacyMetrics:["cpu","tx","rx"]},p=(e,t)=>({[`${e}_max`]:{max:{field:t}},[`${e}_deriv`]:{derivative:{buckets_path:`${e}_max`,gap_policy:"skip",unit:"1s"}},[e]:{bucket_script:{buckets_path:{value:`${e}_deriv[normalized_value]`},script:{source:"params.value > 0.0 ? params.value : 0.0",lang:"painless"},gap_policy:"skip"}}}),m={cpu:{cpu_with_limit:{avg:{field:"kubernetes.pod.cpu.usage.limit.pct"}},cpu_without_limit:{avg:{field:"kubernetes.pod.cpu.usage.node.pct"}},cpu:{bucket_script:{buckets_path:{with_limit:"cpu_with_limit",without_limit:"cpu_without_limit"},script:{source:"params.with_limit > 0.0 ? params.with_limit : params.without_limit",lang:"painless"},gap_policy:"skip"}}},memory:{memory_with_limit:{avg:{field:"kubernetes.pod.memory.usage.limit.pct"}},memory_without_limit:{avg:{field:"kubernetes.pod.memory.usage.node.pct"}},memory:{bucket_script:{buckets_path:{with_limit:"memory_with_limit",without_limit:"memory_without_limit"},script:{source:"params.with_limit > 0.0 ? params.with_limit : params.without_limit",lang:"painless"},gap_policy:"skip"}}},rx:p("rx","kubernetes.pod.network.rx.bytes"),tx:p("tx","kubernetes.pod.network.tx.bytes")},y=Object.keys(m),g={tsvb:{podOverview:(e,t,s)=>({id:"podOverview",requires:["kubernetes.pod"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"kubernetes.pod.cpu.usage.node.pct",id:"avg-cpu-without",type:"avg"},{field:"kubernetes.pod.cpu.usage.limit.pct",id:"avg-cpu-with",type:"avg"},{id:"cpu-usage",type:"calculation",variables:[{id:"cpu_with",name:"with_limit",field:"avg-cpu-with"},{id:"cpu_without",name:"without_limit",field:"avg-cpu-without"}],script:"params.with_limit > 0.0 ? params.with_limit : params.without_limit"}]},{id:"memory",split_mode:"everything",metrics:[{field:"kubernetes.pod.memory.usage.node.pct",id:"avg-memory-without",type:"avg"},{field:"kubernetes.pod.memory.usage.limit.pct",id:"avg-memory-with",type:"avg"},{id:"memory-usage",type:"calculation",variables:[{id:"memory_with",name:"with_limit",field:"avg-memory-with"},{id:"memory_without",name:"without_limit",field:"avg-memory-without"}],script:"params.with_limit > 0.0 ? params.with_limit : params.without_limit"}]},{id:"rx",split_mode:"everything",metrics:[{field:"kubernetes.pod.network.rx.bytes",id:"max-network-rx",type:"max"},{field:"max-network-rx",id:"deriv-max-network-rx",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-network-rx",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-network-rx"}],script:"params.rate > 0.0 ? params.rate : 0.0"}]},{id:"tx",split_mode:"everything",metrics:[{field:"kubernetes.pod.network.tx.bytes",id:"max-network-tx",type:"max"},{field:"max-network-tx",id:"deriv-max-network-tx",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-network-tx",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-network-tx"}],script:"params.rate > 0.0 ? params.rate : 0.0"}]}]}),podCpuUsage:(e,t,s)=>({id:"podCpuUsage",requires:["kubernetes.pod"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"kubernetes.pod.cpu.usage.node.pct",id:"avg-cpu-without",type:"avg"},{field:"kubernetes.pod.cpu.usage.limit.pct",id:"avg-cpu-with",type:"avg"},{id:"cpu-usage",type:"calculation",variables:[{id:"cpu_with",name:"with_limit",field:"avg-cpu-with"},{id:"cpu_without",name:"without_limit",field:"avg-cpu-without"}],script:"params.with_limit > 0.0 ? params.with_limit : params.without_limit"}]}]}),podLogUsage:(e,t,s)=>({id:"podLogUsage",requires:["kubernetes.pod"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"logs",split_mode:"everything",metrics:[{field:"kubernetes.container.logs.used.bytes",id:"avg-log-used",type:"avg"},{field:"kubernetes.container.logs.capacity.bytes",id:"max-log-cap",type:"max"},{id:"calc-usage-limit",script:"params.usage / params.limit",type:"calculation",variables:[{field:"avg-log-userd",id:"var-usage",name:"usage"},{field:"max-log-cap",id:"var-limit",name:"limit"}]}]}]}),podNetworkTraffic:(e,t,s)=>({id:"podNetworkTraffic",requires:["kubernetes.pod"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"tx",split_mode:"everything",metrics:[{field:"kubernetes.pod.network.tx.bytes",id:"max-network-tx",type:"max"},{field:"max-network-tx",id:"deriv-max-network-tx",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-net-tx",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-network-tx"}],script:"params.rate > 0.0 ? params.rate : 0.0"}]},{id:"rx",split_mode:"everything",metrics:[{field:"kubernetes.pod.network.rx.bytes",id:"max-network-rx",type:"max"},{field:"max-network-rx",id:"deriv-max-network-rx",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-net-rx",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-network-rx"}],script:"params.rate > 0.0 ? params.rate : 0.0"},{id:"invert-posonly-deriv-max-network-rx",script:"params.rate * -1",type:"calculation",variables:[{field:"posonly-deriv-max-net-rx",id:"var-rate",name:"rate"}]}]}]}),podMemoryUsage:(e,t,s)=>({id:"podMemoryUsage",requires:["kubernetes.pod"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"memory",split_mode:"everything",metrics:[{field:"kubernetes.pod.memory.usage.node.pct",id:"avg-memory-without",type:"avg"},{field:"kubernetes.pod.memory.usage.limit.pct",id:"avg-memory-with",type:"avg"},{id:"memory-usage",type:"calculation",variables:[{id:"memory_with",name:"with_limit",field:"avg-memory-with"},{id:"memory_without",name:"without_limit",field:"avg-memory-without"}],script:"params.with_limit > 0.0 ? params.with_limit : params.without_limit"}]}]})},snapshot:m,defaultSnapshot:"cpu",defaultTimeRangeInSeconds:3600},v={id:"pod",displayName:i.i18n.translate("xpack.metricsData.inventoryModel.pod.displayName",{defaultMessage:"Kubernetes Pods"}),singularDisplayName:i.i18n.translate("xpack.metricsData.inventoryModels.pod.singularDisplayName",{defaultMessage:"Kubernetes Pod"}),requiredModule:"kubernetes",crosslinkSupport:{details:!0,logs:!0,apm:!0,uptime:!0},fields:{id:"kubernetes.pod.uid",name:"kubernetes.pod.name",ip:"kubernetes.pod.ip"},metrics:g,requiredMetrics:["podOverview","podCpuUsage","podMemoryUsage","podNetworkTraffic",...u],tooltipMetrics:["cpu","memory","rx","tx"]},_=(e,t,s,i=">=300s",a=!0)=>(r,n)=>({id:e,requires:t,drop_last_bucket:a,index_pattern:n,interval:i,time_field:r,type:"timeseries",series:s}),w=_("awsEC2CpuUtilization",["aws.ec2"],[{id:"total",split_mode:"everything",metrics:[{field:"aws.ec2.cpu.total.pct",id:"avg-cpu",type:"avg"},{id:"convert-to-percent",script:"params.avg",type:"calculation",variables:[{field:"avg-cpu",id:"var-avg",name:"avg"}]}]}]),f=_("awsEC2NetworkTraffic",["aws.ec2"],[{id:"tx",split_mode:"everything",metrics:[{field:"aws.ec2.network.out.bytes_per_sec",id:"avg-tx",type:"avg"}]},{id:"rx",split_mode:"everything",metrics:[{field:"aws.ec2.network.in.bytes_per_sec",id:"avg-rx",type:"avg"},{id:"calculation-rate",type:"calculation",variables:[{id:"rate-var",name:"rate",field:"avg-rx"}],script:"params.rate * -1"}]}]),k=_("awsEC2DiskIOBytes",["aws.ec2"],[{id:"write",split_mode:"everything",metrics:[{field:"aws.ec2.diskio.write.bytes_per_sec",id:"avg-write",type:"avg"}]},{id:"read",split_mode:"everything",metrics:[{field:"aws.ec2.diskio.read.bytes_per_sec",id:"avg-read",type:"avg"},{id:"calculation-rate",type:"calculation",variables:[{id:"rate-var",name:"rate",field:"avg-read"}],script:"params.rate * -1"}]}]),b={cpu:{cpu_avg:{avg:{field:"aws.ec2.cpu.total.pct"}},cpu:{bucket_script:{buckets_path:{cpu:"cpu_avg"},script:{source:"params.cpu",lang:"painless"},gap_policy:"skip"}}},rx:{rx:{avg:{field:"aws.ec2.network.in.bytes_per_sec"}}},tx:{tx:{avg:{field:"aws.ec2.network.in.bytes_per_sec"}}},diskIOReadBytes:{diskIOReadBytes:{avg:{field:"aws.ec2.diskio.read.bytes_per_sec"}}},diskIOWriteBytes:{diskIOWriteBytes:{avg:{field:"aws.ec2.diskio.write.bytes_per_sec"}}}},h=Object.keys(b),x={tsvb:{awsEC2CpuUtilization:w,awsEC2NetworkTraffic:f,awsEC2DiskIOBytes:k},snapshot:b,defaultSnapshot:"cpu",defaultTimeRangeInSeconds:14400},S={id:"awsEC2",displayName:i.i18n.translate("xpack.metricsData.inventoryModels.awsEC2.displayName",{defaultMessage:"EC2 Instances"}),singularDisplayName:i.i18n.translate("xpack.metricsData.inventoryModels.awsEC2.singularDisplayName",{defaultMessage:"EC2 Instance"}),requiredModule:"aws",crosslinkSupport:{details:!0,logs:!0,apm:!0,uptime:!0},metrics:x,fields:{id:"cloud.instance.id",name:"cloud.instance.name",ip:"aws.ec2.instance.public.ip"},requiredMetrics:["awsEC2CpuUtilization","awsEC2NetworkTraffic","awsEC2DiskIOBytes"],tooltipMetrics:["cpu","rx","tx"],nodeFilter:[{term:{"event.dataset":"aws.ec2"}}]},M=_("awsS3BucketSize",["aws.s3_daily_storage"],[{id:"bytes",split_mode:"everything",metrics:[{field:"aws.s3_daily_storage.bucket.size.bytes",id:"max-bytes",type:"max"}]}],">=86400s",!1),D=_("awsS3TotalRequests",["aws.s3_request"],[{id:"total",split_mode:"everything",metrics:[{field:"aws.s3_request.requests.total",id:"max-size",type:"max"}]}],">=300s"),q=_("awsS3NumberOfObjects",["aws.s3_daily_storage"],[{id:"objects",split_mode:"everything",metrics:[{field:"aws.s3_daily_storage.number_of_objects",id:"max-size",type:"max"}]}],">=86400s",!1),T=_("awsS3DownloadBytes",["aws.s3_request"],[{id:"bytes",split_mode:"everything",metrics:[{field:"aws.s3_request.downloaded.bytes",id:"max-bytes",type:"max"}]}],">=300s"),C=_("awsS3UploadBytes",["aws.s3_request"],[{id:"bytes",split_mode:"everything",metrics:[{field:"aws.s3_request.uploaded.bytes",id:"max-bytes",type:"max"}]}],">=300s"),O={s3BucketSize:{s3BucketSize:{max:{field:"aws.s3_daily_storage.bucket.size.bytes"}}},s3NumberOfObjects:{s3NumberOfObjects:{max:{field:"aws.s3_daily_storage.number_of_objects"}}},s3TotalRequests:{s3TotalRequests:{max:{field:"aws.s3_request.requests.total"}}},s3UploadBytes:{s3UploadBytes:{max:{field:"aws.s3_request.uploaded.bytes"}}},s3DownloadBytes:{s3DownloadBytes:{max:{field:"aws.s3_request.downloaded.bytes"}}}},R=Object.keys(O),I={tsvb:{awsS3BucketSize:M,awsS3TotalRequests:D,awsS3NumberOfObjects:q,awsS3DownloadBytes:T,awsS3UploadBytes:C},snapshot:O,defaultSnapshot:"s3BucketSize",defaultTimeRangeInSeconds:604800},B={id:"awsS3",displayName:i.i18n.translate("xpack.metricsData.inventoryModels.awsS3.displayName",{defaultMessage:"S3 Buckets"}),singularDisplayName:i.i18n.translate("xpack.metricsData.inventoryModels.awsS3.singularDisplayName",{defaultMessage:"S3 Bucket"}),requiredModule:"aws",crosslinkSupport:{details:!0,logs:!0,apm:!1,uptime:!1},metrics:I,fields:{id:"aws.s3.bucket.name",name:"aws.s3.bucket.name"},requiredMetrics:["awsS3BucketSize","awsS3NumberOfObjects","awsS3TotalRequests","awsS3DownloadBytes","awsS3UploadBytes"],tooltipMetrics:["s3BucketSize","s3NumberOfObjects","s3TotalRequests","s3UploadBytes","s3DownloadBytes"]},N=_("awsRDSLatency",["aws.rds"],[{id:"read",split_mode:"everything",metrics:[{field:"aws.rds.latency.read",id:"avg",type:"avg"}]},{id:"write",split_mode:"everything",metrics:[{field:"aws.rds.latency.write",id:"avg",type:"avg"}]},{id:"insert",split_mode:"everything",metrics:[{field:"aws.rds.latency.insert",id:"avg",type:"avg"}]},{id:"update",split_mode:"everything",metrics:[{field:"aws.rds.latency.update",id:"avg",type:"avg"}]},{id:"commit",split_mode:"everything",metrics:[{field:"aws.rds.latency.commit",id:"avg",type:"avg"}]}]),E=_("awsRDSConnections",["aws.rds"],[{id:"connections",split_mode:"everything",metrics:[{field:"aws.rds.database_connections",id:"avg-conns",type:"avg"}]}]),P=_("awsRDSCpuTotal",["aws.rds"],[{id:"cpu",split_mode:"everything",metrics:[{field:"aws.rds.cpu.total.pct",id:"avg-cpu",type:"avg"},{id:"convert-to-percent",script:"params.avg",type:"calculation",variables:[{field:"avg-cpu",id:"var-avg",name:"avg"}]}]}]),j=_("awsRDSQueriesExecuted",["aws.rds"],[{id:"queries",split_mode:"everything",metrics:[{field:"aws.rds.queries",id:"avg-queries",type:"avg"}]}]),U=_("awsRDSActiveTransactions",["aws.rds"],[{id:"active",split_mode:"everything",metrics:[{field:"aws.rds.transactions.active",id:"avg",type:"avg"}]},{id:"blocked",split_mode:"everything",metrics:[{field:"aws.rds.transactions.blocked",id:"avg",type:"avg"}]}]),A={cpu:{cpu_avg:{avg:{field:"aws.rds.cpu.total.pct"}},cpu:{bucket_script:{buckets_path:{cpu:"cpu_avg"},script:{source:"params.cpu",lang:"painless"},gap_policy:"skip"}}},rdsLatency:{rdsLatency:{avg:{field:"aws.rds.latency.dml"}}},rdsConnections:{rdsConnections:{avg:{field:"aws.rds.database_connections"}}},rdsQueriesExecuted:{rdsQueriesExecuted:{avg:{field:"aws.rds.queries"}}},rdsActiveTransactions:{rdsActiveTransactions:{avg:{field:"aws.rds.transactions.active"}}}},Q=Object.keys(A),K={tsvb:{awsRDSLatency:N,awsRDSConnections:E,awsRDSCpuTotal:P,awsRDSQueriesExecuted:j,awsRDSActiveTransactions:U},snapshot:A,defaultSnapshot:"cpu",defaultTimeRangeInSeconds:14400},z={id:"awsRDS",displayName:i.i18n.translate("xpack.metricsData.inventoryModels.awsRDS.displayName",{defaultMessage:"RDS Databases"}),singularDisplayName:i.i18n.translate("xpack.metricsData.inventoryModels.awsRDS.singularDisplayName",{defaultMessage:"RDS Database"}),requiredModule:"aws",crosslinkSupport:{details:!0,logs:!0,apm:!1,uptime:!1},metrics:K,fields:{id:"aws.rds.db_instance.arn",name:"aws.rds.db_instance.identifier"},requiredMetrics:["awsRDSCpuTotal","awsRDSConnections","awsRDSQueriesExecuted","awsRDSActiveTransactions","awsRDSLatency"],tooltipMetrics:["cpu","rdsLatency","rdsConnections","rdsQueriesExecuted","rdsActiveTransactions"]},L=_("awsSQSMessagesVisible",["aws.sqs"],[{id:"visible",split_mode:"everything",metrics:[{field:"aws.sqs.messages.visible",id:"avg-visible",type:"avg"}]}],">=300s"),V=_("awsSQSMessagesDelayed",["aws.sqs"],[{id:"delayed",split_mode:"everything",metrics:[{field:"aws.sqs.messages.delayed",id:"avg-delayed",type:"avg"}]}],">=300s"),$=_("awsSQSMessagesSent",["aws.sqs"],[{id:"sent",split_mode:"everything",metrics:[{field:"aws.sqs.messages.sent",id:"avg-sent",type:"avg"}]}],">=300s"),F=_("awsSQSMessagesEmpty",["aws.sqs"],[{id:"empty",split_mode:"everything",metrics:[{field:"aws.sqs.messages.not_visible",id:"avg-empty",type:"avg"}]}],">=300s"),H=_("awsSQSOldestMessage",["aws.sqs"],[{id:"oldest",split_mode:"everything",metrics:[{field:"aws.sqs.oldest_message_age.sec",id:"max-oldest",type:"max"}]}],">=300s"),W={sqsMessagesVisible:{sqsMessagesVisible:{avg:{field:"aws.sqs.messages.visible"}}},sqsMessagesDelayed:{sqsMessagesDelayed:{max:{field:"aws.sqs.messages.delayed"}}},sqsMessagesEmpty:{sqsMessagesEmpty:{max:{field:"aws.sqs.messages.not_visible"}}},sqsMessagesSent:{sqsMessagesSent:{max:{field:"aws.sqs.messages.sent"}}},sqsOldestMessage:{sqsOldestMessage:{max:{field:"aws.sqs.oldest_message_age.sec"}}}},J=Object.keys(W),X={tsvb:{awsSQSMessagesVisible:L,awsSQSMessagesDelayed:V,awsSQSMessagesSent:$,awsSQSMessagesEmpty:F,awsSQSOldestMessage:H},snapshot:W,defaultSnapshot:"sqsMessagesVisible",defaultTimeRangeInSeconds:14400},G={id:"awsSQS",displayName:i.i18n.translate("xpack.metricsData.inventoryModels.awsSQS.displayName",{defaultMessage:"SQS Queues"}),singularDisplayName:i.i18n.translate("xpack.metricsData.inventoryModels.awsSQS.singularDisplayName",{defaultMessage:"SQS Queue"}),requiredModule:"aws",crosslinkSupport:{details:!0,logs:!0,apm:!1,uptime:!1},metrics:X,fields:{id:"aws.sqs.queue.name",name:"aws.sqs.queue.name"},requiredMetrics:["awsSQSMessagesVisible","awsSQSMessagesDelayed","awsSQSMessagesSent","awsSQSMessagesEmpty","awsSQSOldestMessage"],tooltipMetrics:["sqsMessagesVisible","sqsMessagesDelayed","sqsMessagesEmpty","sqsMessagesSent","sqsOldestMessage"]},Y=(e,t,s)=>({[`${e}_interfaces`]:{terms:{field:s},aggregations:{[`${e}_interface_max`]:{max:{field:t}}}},[`${e}_sum_of_interfaces`]:{sum_bucket:{buckets_path:`${e}_interfaces>${e}_interface_max`}},[`${e}_deriv`]:{derivative:{buckets_path:`${e}_sum_of_interfaces`,gap_policy:"skip",unit:"1s"}},[e]:{bucket_script:{buckets_path:{value:`${e}_deriv[normalized_value]`},script:{source:"params.value > 0.0 ? params.value : 0.0",lang:"painless"},gap_policy:"skip"}}}),Z={cpu:{cpu:{avg:{field:"docker.cpu.total.pct"}}},memory:{memory:{avg:{field:"docker.memory.usage.pct"}}},rx:Y("rx","docker.network.inbound.bytes","docker.network.interface"),tx:Y("tx","docker.network.outbound.bytes","docker.network.interface")},ee=Object.keys(Z),te={snapshot:Z,getFormulas:async()=>await s.e(446).then(s.bind(s,446)).then((({formulas:e})=>e)),getCharts:async()=>await s.e(76).then(s.bind(s,76)).then((({charts:e})=>e)),defaultSnapshot:"cpu",defaultTimeRangeInSeconds:3600},se={id:"container",displayName:i.i18n.translate("xpack.metricsData.inventoryModel.container.displayName",{defaultMessage:"Docker Containers"}),singularDisplayName:i.i18n.translate("xpack.metricsData.inventoryModel.container.singularDisplayName",{defaultMessage:"Docker Container"}),requiredModule:"docker",crosslinkSupport:{details:!0,logs:!0,apm:!0,uptime:!0},fields:{id:"container.id",name:"container.name",ip:"container.ip_address"},metrics:te,requiredMetrics:["containerOverview","containerCpuUsage","containerMemory","containerNetworkTraffic","containerDiskIOBytes","containerDiskIOOps","containerK8sOverview","containerK8sCpuUsage","containerK8sMemoryUsage"],tooltipMetrics:["cpu","memory","rx","tx"]},ie={tsvb:{nginxActiveConnections:(e,t,s)=>({id:"nginxActiveConnections",requires:["nginx.stubstatus"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"connections",metrics:[{field:"nginx.stubstatus.active",id:"avg-active",type:"avg"}],split_mode:"everything"}]}),nginxHits:(e,t,s)=>({id:"nginxHits",requires:["nginx.access"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"200s",metrics:[{id:"count-200",type:"count"}],split_mode:"filter",filter:{query:"http.response.status_code:[200 TO 299]",language:"lucene"}},{id:"300s",metrics:[{id:"count-300",type:"count"}],split_mode:"filter",filter:{query:"http.response.status_code:[300 TO 399]",language:"lucene"}},{id:"400s",metrics:[{id:"count-400",type:"count"}],split_mode:"filter",filter:{query:"http.response.status_code:[400 TO 499]",language:"lucene"}},{id:"500s",metrics:[{id:"count-500",type:"count"}],split_mode:"filter",filter:{query:"http.response.status_code:[500 TO 599]",language:"lucene"}}]}),nginxRequestRate:(e,t,s)=>({id:"nginxRequestRate",requires:["nginx.stubstatus"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"rate",metrics:[{field:"nginx.stubstatus.requests",id:"max-requests",type:"max"},{field:"max-requests",id:"derv-max-requests",type:"derivative",unit:"1s"},{id:"posonly-derv-max-requests",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"derv-max-requests"}],script:"params.rate > 0.0 ? params.rate : 0.0"}],split_mode:"everything"}]}),nginxRequestsPerConnection:(e,t,s)=>({id:"nginxRequestsPerConnection",requires:["nginx.stubstatus"],index_pattern:t,interval:s,time_field:e,type:"timeseries",series:[{id:"reqPerConns",metrics:[{field:"nginx.stubstatus.handled",id:"max-handled",type:"max"},{field:"nginx.stubstatus.requests",id:"max-requests",type:"max"},{id:"reqs-per-connection",type:"calculation",variables:[{id:"var-handled",name:"handled",field:"max-handled"},{id:"var-requests",name:"requests",field:"max-requests"}],script:"params.handled > 0.0 && params.requests > 0.0 ? params.handled / params.requests : 0.0"}],split_mode:"everything"}]}),awsCpuUtilization:(e,t)=>({id:"awsCpuUtilization",requires:["aws.ec2"],map_field_to:"cloud.instance.id",id_type:"cloud",index_pattern:t,interval:">=5m",time_field:e,type:"timeseries",series:[{id:"cpu-util",metrics:[{field:"aws.ec2.cpu.total.pct",id:"avg-cpu-util",type:"avg"}],split_mode:"everything"}]}),awsDiskioBytes:(e,t)=>({id:"awsDiskioBytes",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"timeseries",series:[{id:"writes",metrics:[{field:"aws.ec2.diskio.write.bytes",id:"sum-diskio-out",type:"sum"},{id:"csum-sum-diskio-out",field:"sum-diskio-out",type:"cumulative_sum"},{id:"deriv-csum-sum-diskio-out",unit:"1s",type:"derivative",field:"csum-sum-diskio-out"},{id:"posonly-deriv-csum-sum-diskio-out",field:"deriv-csum-sum-diskio-out",type:"positive_only"}],split_mode:"everything"},{id:"reads",metrics:[{field:"aws.ec2.diskio.read.bytes",id:"sum-diskio-in",type:"sum"},{id:"csum-sum-diskio-in",field:"sum-diskio-in",type:"cumulative_sum"},{id:"deriv-csum-sum-diskio-in",unit:"1s",type:"derivative",field:"csum-sum-diskio-in"},{id:"posonly-deriv-csum-sum-diskio-in",field:"deriv-csum-sum-diskio-in",type:"positive_only"},{id:"inverted-posonly-deriv-csum-sum-diskio-in",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"posonly-deriv-csum-sum-diskio-in"}],script:"params.rate * -1"}],split_mode:"everything"}]}),awsDiskioOps:(e,t)=>({id:"awsDiskioOps",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"timeseries",series:[{id:"writes",metrics:[{field:"aws.ec2.diskio.write.count",id:"sum-diskio-writes",type:"sum"},{id:"csum-sum-diskio-writes",field:"sum-diskio-writes",type:"cumulative_sum"},{id:"deriv-csum-sum-diskio-writes",unit:"1s",type:"derivative",field:"csum-sum-diskio-writes"},{id:"posonly-deriv-csum-sum-diskio-writes",field:"deriv-csum-sum-diskio-writes",type:"positive_only"}],split_mode:"everything"},{id:"reads",metrics:[{field:"aws.ec2.diskio.read.count",id:"sum-diskio-reads",type:"sum"},{id:"csum-sum-diskio-reads",field:"sum-diskio-reads",type:"cumulative_sum"},{id:"deriv-csum-sum-diskio-reads",unit:"1s",type:"derivative",field:"csum-sum-diskio-reads"},{id:"posonly-deriv-csum-sum-diskio-reads",field:"deriv-csum-sum-diskio-reads",type:"positive_only"},{id:"inverted-posonly-deriv-csum-sum-diskio-reads",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"posonly-deriv-csum-sum-diskio-reads"}],script:"params.rate * -1"}],split_mode:"everything"}]}),awsNetworkBytes:(e,t)=>({id:"awsNetworkBytes",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"timeseries",series:[{id:"tx",metrics:[{field:"aws.ec2.network.out.bytes",id:"sum-net-out",type:"sum"},{id:"csum-sum-net-out",field:"sum-net-out",type:"cumulative_sum"},{id:"deriv-csum-sum-net-out",unit:"1s",type:"derivative",field:"csum-sum-net-out"},{id:"posonly-deriv-csum-sum-net-out",field:"deriv-csum-sum-net-out",type:"positive_only"}],split_mode:"everything"},{id:"rx",metrics:[{field:"aws.ec2.network.in.bytes",id:"sum-net-in",type:"sum"},{id:"csum-sum-net-in",field:"sum-net-in",type:"cumulative_sum"},{id:"deriv-csum-sum-net-in",unit:"1s",type:"derivative",field:"csum-sum-net-in"},{id:"posonly-deriv-csum-sum-net-in",field:"deriv-csum-sum-net-in",type:"positive_only"},{id:"inverted-posonly-deriv-csum-sum-net-in",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"posonly-deriv-csum-sum-net-in"}],script:"params.rate * -1"}],split_mode:"everything"}]}),awsNetworkPackets:(e,t)=>({id:"awsNetworkPackets",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"timeseries",series:[{id:"packets-out",metrics:[{field:"aws.ec2.network.out.packets",id:"avg-net-out",type:"avg"}],split_mode:"everything"},{id:"packets-in",metrics:[{field:"aws.ec2.network.in.packets",id:"avg-net-in",type:"avg"},{id:"inverted-avg-net-in",type:"calculation",variables:[{id:"var-avg",name:"avg",field:"avg-net-in"}],script:"params.avg * -1"}],split_mode:"everything"}]}),awsOverview:(e,t)=>({id:"awsOverview",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"top_n",series:[{id:"cpu-util",split_mode:"everything",metrics:[{field:"aws.ec2.cpu.total.pct",id:"cpu-total-pct",type:"max"}]},{id:"status-check-failed",split_mode:"everything",metrics:[{field:"aws.ec2.status.check_failed",id:"status-check-failed",type:"max"}]},{id:"packets-out",split_mode:"everything",metrics:[{field:"aws.ec2.network.out.packets",id:"network-out-packets",type:"avg"}]},{id:"packets-in",split_mode:"everything",metrics:[{field:"aws.ec2.network.in.packets",id:"network-in-packets",type:"avg"}]}]}),...g.tsvb,...x.tsvb,...I.tsvb,...K.tsvb,...X.tsvb}},ae={host:c,pod:v,container:se,awsEC2:S,awsS3:B,awsRDS:z,awsSQS:G},re=Object.values(ae),ne=e=>{const t=re.find((t=>t.id===e));if(!t)throw new Error(i.i18n.translate("xpack.metricsData.inventoryModels.findInventoryModel.error",{defaultMessage:"The inventory model you've attempted to find does not exist"}));return t},le=["host","pod","container"],oe=e=>{switch(e){case"pod":return"kubernetes.pod.uid";case"host":return"host.name";case"container":return"container.id"}},de=e=>{const t=ne(e);if(le.includes(e)){const s=oe(e)||t.fields.id;return{...t.fields,id:s}}return t.fields},ue=e=>null!==e&&"object"==typeof e&&Object.values(e).some((e=>void 0===e||e&&"field"in e)),ce=e=>!!e.derivative,pe=e=>!!e.sum_bucket,me=e=>{const t=e;return!(!t.aggregations||!t.terms)},ye=__kbnSharedDeps__.IoTs,ge=ye.keyof({host:null,pod:null,container:null,awsEC2:null,awsS3:null,awsSQS:null,awsRDS:null}),ve=ye.keyof({line:null,area:null,bar:null}),_e=ye.keyof({abbreviatedNumber:null,bits:null,bytes:null,number:null,percent:null,highPrecision:null}),we=ye.keyof({hostSystemOverview:null,hostCpuUsageTotal:null,hostCpuUsage:null,hostK8sOverview:null,hostK8sCpuCap:null,hostK8sDiskCap:null,hostK8sMemoryCap:null,hostK8sPodCap:null,hostLoad:null,hostMemoryUsage:null,hostNetworkTraffic:null,podOverview:null,podCpuUsage:null,podMemoryUsage:null,podLogUsage:null,podNetworkTraffic:null,containerOverview:null,containerCpuUsage:null,containerDiskIOOps:null,containerDiskIOBytes:null,containerMemory:null,containerNetworkTraffic:null,containerK8sOverview:null,containerK8sCpuUsage:null,containerK8sMemoryUsage:null,nginxHits:null,nginxRequestRate:null,nginxActiveConnections:null,nginxRequestsPerConnection:null,awsOverview:null,awsCpuUtilization:null,awsNetworkBytes:null,awsNetworkPackets:null,awsDiskioBytes:null,awsDiskioOps:null,awsEC2CpuUtilization:null,awsEC2NetworkTraffic:null,awsEC2DiskIOBytes:null,awsS3TotalRequests:null,awsS3NumberOfObjects:null,awsS3BucketSize:null,awsS3DownloadBytes:null,awsS3UploadBytes:null,awsRDSCpuTotal:null,awsRDSConnections:null,awsRDSQueriesExecuted:null,awsRDSActiveTransactions:null,awsRDSLatency:null,awsSQSMessagesVisible:null,awsSQSMessagesDelayed:null,awsSQSMessagesSent:null,awsSQSMessagesEmpty:null,awsSQSOldestMessage:null,custom:null}),fe=ye.keyof({avg:null,max:null,min:null,calculation:null,cardinality:null,series_agg:null,positive_only:null,derivative:null,count:null,sum:null,cumulative_sum:null}),ke=ye.type({id:ye.string,type:ye.literal("count")}),be=ye.intersection([ye.type({id:ye.string,type:fe}),ye.partial({field:ye.string})]),he=ye.type({field:ye.string,id:ye.string,name:ye.string}),xe=ye.type({id:ye.string,script:ye.string,type:ye.literal("calculation"),variables:ye.array(he)}),Se=ye.type({id:ye.string,field:ye.string,unit:ye.string,type:ye.literal("derivative")}),Me=ye.type({id:ye.string,function:ye.string,type:ye.literal("series_agg")}),De=ye.type({id:ye.string,value:ye.number}),qe=ye.intersection([ye.type({id:ye.string,type:ye.literal("percentile"),percentiles:ye.array(De)}),ye.partial({field:ye.string})]),Te=ye.union([ke,be,xe,Se,qe,Me]),Ce=ye.intersection([ye.type({id:ye.string,metrics:ye.array(Te),split_mode:ye.string}),ye.partial({terms_field:ye.string,terms_size:ye.number,terms_order_by:ye.string,filter:ye.type({query:ye.string,language:ye.keyof({lucene:null,kuery:null})})})]),Oe=(ye.intersection([ye.type({id:we,requires:ye.array(ye.string),index_pattern:ye.union([ye.string,ye.array(ye.string)]),interval:ye.string,time_field:ye.string,type:ye.string,series:ye.array(Ce)}),ye.partial({filter:ye.string,map_field_to:ye.string,id_type:ye.keyof({cloud:null,node:null}),drop_last_bucket:ye.boolean})]),{count:null,cpuV2:null,cpu:null,diskLatency:null,diskSpaceUsage:null,load:null,memory:null,memoryFree:null,memoryTotal:null,normalizedLoad1m:null,tx:null,rx:null,txV2:null,rxV2:null,logRate:null,diskIOReadBytes:null,diskIOWriteBytes:null,s3TotalRequests:null,s3NumberOfObjects:null,s3BucketSize:null,s3DownloadBytes:null,s3UploadBytes:null,rdsConnections:null,rdsQueriesExecuted:null,rdsActiveTransactions:null,rdsLatency:null,sqsMessagesVisible:null,sqsMessagesDelayed:null,sqsMessagesSent:null,sqsMessagesEmpty:null,sqsOldestMessage:null,custom:null}),Re=ye.keyof(Oe),Ie=__kbnSharedDeps__.Lodash,Be=["avg","max","min","cardinality","rate","count","sum","p95","p99","custom"],Ne=Be.reduce(((e,t)=>({...e,[t]:null})),{}),Ee=ye.keyof(Ne),Pe=(0,Ie.xor)(Be,["custom","rate","p95","p99"]).reduce(((e,t)=>({...e,[t]:null})),{}),je=ye.keyof(Pe),Ue=ye.type({aggregation:Ee}),Ae=ye.intersection([ye.type({name:ye.string,aggregation:je}),ye.partial({field:ye.string,filter:ye.string})]),Qe=ye.partial({field:ye.union([ye.string,ye.undefined]),custom_metrics:ye.array(Ae),equation:ye.string}),Ke=ye.intersection([Ue,Qe]),ze=ye.type({from:ye.number,to:ye.number,interval:ye.string}),Le=ye.type({timerange:ze,indexPattern:ye.string,metrics:ye.array(Ke)}),Ve=ye.union([ye.string,ye.null,ye.undefined]),$e=ye.record(ye.string,ye.union([ye.string,ye.null])),Fe=ye.partial({groupBy:ye.union([Ve,ye.array(Ve)]),groupInstance:ye.union([Ve,ye.array(Ve)]),afterKey:ye.union([ye.string,ye.null,ye.undefined,$e]),limit:ye.union([ye.number,ye.null,ye.undefined]),filterQuery:ye.union([ye.string,ye.null,ye.undefined]),forceInterval:ye.boolean,dropLastBucket:ye.boolean}),He=(ye.intersection([Le,Fe]),ye.type({total:ye.number,afterKey:ye.union([ye.string,ye.null,$e])})),We=ye.keyof({date:null,number:null,string:null}),Je=ye.type({name:ye.string,type:We}),Xe=ye.intersection([ye.type({timestamp:ye.number}),ye.record(ye.string,ye.union([ye.string,ye.number,ye.null,ye.undefined,ye.array(ye.object)]))]),Ge=ye.intersection([ye.type({id:ye.string,columns:ye.array(Je),rows:ye.array(Xe)}),ye.partial({keys:ye.array(ye.string)})]),Ye=(ye.type({series:ye.array(Ge),pageInfo:He}),ye.union([ye.string,ye.null,ye.undefined])),Ze=ye.type({id:ye.string,aggregations:ye.UnknownRecord}),et=ye.intersection([ye.type({timerange:ze,indexPattern:ye.string,metrics:ye.array(Ze),includeTimeseries:ye.union([ye.boolean,(tt=!0,ye.undefined.pipe(new ye.Type("BooleanFromString",ye.literal(tt).is,((e,t)=>ye.success(tt)),(()=>{}))))])}),ye.partial({groupBy:ye.array(Ye),groupInstance:ye.array(Ye),modules:ye.array(ye.string),afterKey:ye.union([ye.null,$e]),limit:ye.union([ye.number,ye.null]),filters:ye.array(ye.UnknownRecord),dropPartialBuckets:ye.boolean,alignDataToEnd:ye.boolean})]);var tt;const st=ye.intersection([ye.type({afterKey:ye.union([ye.null,$e,ye.undefined])}),ye.partial({interval:ye.number})]),it=ye.keyof({date:null,number:null,string:null}),at=ye.type({name:ye.string,type:it}),rt=ye.intersection([ye.type({timestamp:ye.number}),ye.record(ye.string,ye.union([ye.string,ye.number,ye.null,ye.undefined,ye.array(ye.object)]))]),nt=ye.intersection([ye.type({id:ye.string,columns:ye.array(at),rows:ye.array(rt)}),ye.partial({keys:ye.array(ye.string)})]),lt=ye.intersection([nt,ye.partial({metricsets:ye.array(ye.string)})]),ot=ye.type({series:ye.array(lt),info:st})},503:(e,t,s)=>{"use strict";s.d(t,{Q7:()=>n,fJ:()=>r});var i=s(286),a=s(409);const r=a.useKibana,n=e=>{const{Provider:t}=(0,i.useMemo)((()=>(e=>(0,a.createKibanaReactContext)({...e,share:{}}))(e)),[e]);return t}},50:(e,t,s)=>{"use strict";s.r(t),s.d(t,{plugin:()=>m,useAssetDetailsRedirect:()=>p.g});var i=s(915);class MetricsDataClient{constructor(e){this.http=e}async metricsExplorer(e){return this.http.post("/api/infra/metrics_explorer",{body:JSON.stringify(e)})}async metricsIndices(){return this.http.get("/api/metrics/indices")}}var a=s(286),r=s(791);const n=(0,a.lazy)((()=>Promise.all([s.e(156),s.e(458)]).then(s.bind(s,458))));function l(e,t){return({timerange:s,filterClauseDsl:i,sourceId:l})=>(0,r.jsx)(a.Suspense,{fallback:null},(0,r.jsx)(n,{core:e,metricsClient:t,sourceId:l||"default",timerange:s,filterClauseDsl:i}))}const o=(0,a.lazy)((()=>Promise.all([s.e(156),s.e(608)]).then(s.bind(s,608))));function d(e,t){return({timerange:s,filterClauseDsl:i,sourceId:n})=>(0,r.jsx)(a.Suspense,{fallback:null},(0,r.jsx)(o,{core:e,metricsClient:t,sourceId:n||"default",timerange:s,filterClauseDsl:i}))}const u=(0,a.lazy)((()=>Promise.all([s.e(156),s.e(61)]).then(s.bind(s,61))));function c(e,t){return({timerange:s,filterClauseDsl:i,sourceId:n})=>(0,r.jsx)(a.Suspense,{fallback:null},(0,r.jsx)(u,{core:e,metricsClient:t,sourceId:n||"default",timerange:s,filterClauseDsl:i}))}class Plugin{constructor(e){(0,i.default)(this,"logger",void 0),this.logger=e.logger.get()}setup(e){return{metricsClient:new MetricsDataClient(e.http)}}start(e){const t=new MetricsDataClient(e.http);return{metricsClient:t,ContainerMetricsTable:l(e,t),HostMetricsTable:d(e,t),PodMetricsTable:c(e,t)}}stop(){}}var p=s(993);const m=e=>new Plugin(e)},993:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var i=s(286);const a=__kbnSharedDeps__.ReactRouterDom;var r=s(880),n=s(780),l=s(503);const o=()=>{const e=(0,a.useLocation)(),{services:{application:{currentAppId$:t},share:s}}=(0,l.fJ)(),o=(0,r.A)(t),d=null==s?void 0:s.url.locators.get(n.ASSET_DETAILS_LOCATOR_ID);return{getAssetDetailUrl:(0,i.useCallback)((({assetType:t,assetId:s,search:i})=>{var a;const{to:r,from:n,...l}=i,u={assetDetails:Object.keys(l).length>0?{...l,dateRange:{from:n?new Date(n).toISOString():void 0,to:r?new Date(r).toISOString():void 0}}:{},_a:{time:{...n?{from:new Date(n).toISOString()}:void 0,...r?{to:new Date(r).toISOString()}:void 0,interval:">=1m"}},assetType:t,assetId:s,state:{...null!==(a=e.state)&&void 0!==a?a:{},...e.key?{originAppId:o,originSearch:e.search,originPathname:e.pathname}:{}}};return(({href:e,onClick:t})=>({href:e,onClick:e=>{e.defaultPrevented||!(e=>!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))(e)&&(e=>0===e.button)(e)&&(e.preventDefault(),t())}}))({href:null==d?void 0:d.getRedirectUrl(u),onClick:()=>{null==d||d.navigate(u,{replace:!1})}})}),[o,e.key,e.pathname,e.search,e.state,d])}}},943:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(286),a="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=a},880:(e,t,s)=>{"use strict";var i=s(941),a=s(286),r=i.__importDefault(s(943));t.A=function(e,t){var s=a.useState(t),i=s[0],n=s[1];return r.default((function(){var t=e.subscribe(n);return function(){return t.unsubscribe()}}),[e]),i}},516:(e,t,s)=>{s.p=window.__kbnPublicPath__.metricsDataAccess},137:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},409:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},780:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/observabilityShared/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},808:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/observabilityShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},915:(e,t,s)=>{e.exports=s(497)(67493)},319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},494:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnDatemath},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,s)=>(i.f[s](e,t),t)),[])),i.u=e=>"metricsDataAccess.chunk."+e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},i.l=(t,s,a,r)=>{if(e[t])e[t].push(s);else{var n,l;if(void 0!==a)for(var o=document.getElementsByTagName("script"),d=0;d<o.length;d++){var u=o[d];if(u.getAttribute("src")==t){n=u;break}}n||(l=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,i.nc&&n.setAttribute("nonce",i.nc),n.src=t),e[t]=[s];var c=(s,i)=>{n.onerror=n.onload=null,clearTimeout(p);var a=e[t];if(delete e[t],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((e=>e(i))),s)return s(i)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=c.bind(null,n.onerror),n.onload=c.bind(null,n.onload),l&&document.head.appendChild(n)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var a=s.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=s[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={16:0};i.f.j=(t,s)=>{var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)s.push(a[2]);else{var r=new Promise(((s,i)=>a=e[t]=[s,i]));s.push(a[2]=r);var n=i.p+i.u(t),l=new Error;i.l(n,(s=>{if(i.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",l.name="ChunkLoadError",l.type=r,l.request=n,a[1](l)}}),"chunk-"+t,t)}};var t=(t,s)=>{var a,r,[n,l,o]=s,d=0;if(n.some((t=>0!==e[t]))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);o&&o(i)}for(t&&t(s);d<n.length;d++)r=n[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0},s=self.metricsDataAccess_bundle_jsonpfunction=self.metricsDataAccess_bundle_jsonpfunction||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i(516),__kbnBundles__.define("plugin/metricsDataAccess/public",i,50),__kbnBundles__.define("plugin/metricsDataAccess/common",i,489)})();