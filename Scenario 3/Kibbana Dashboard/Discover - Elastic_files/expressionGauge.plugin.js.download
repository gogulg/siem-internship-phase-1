(()=>{var e,t={699:(e,t,a)=>{"use strict";a.d(t,{VG:()=>r,ml:()=>n,PO:()=>s});const r=e=>{if(e){var t;const a=e=>e.type?e:e.child?a(e.child):void 0;return null===(t=a(e))||void 0===t?void 0:t.type}},n=e=>{if(e){var t;const a=e=>e.child?a(e.child):e;return null===(t=a(e))||void 0===t?void 0:t.type}};function s(e,t){return e&&e[t]?Object.fromEntries(Object.entries(e[t]).map((([e,t])=>"ignore"===t?[e,void 0]:[e,t]))):{}}a(195)},728:(e,t,a)=>{"use strict";a.r(t),a.d(t,{EXPRESSION_GAUGE_NAME:()=>s,GaugeColorModes:()=>u,GaugeLabelMajorModes:()=>l,GaugeShapes:()=>i,GaugeTicksPositions:()=>o,PLUGIN_ID:()=>p,PLUGIN_NAME:()=>g,gaugeFunction:()=>c});var r=a(8),n=a(634);const s="gauge",i={HORIZONTAL_BULLET:"horizontalBullet",VERTICAL_BULLET:"verticalBullet",SEMI_CIRCLE:"semiCircle",ARC:"arc",CIRCLE:"circle"},o={HIDDEN:"hidden",AUTO:"auto",BANDS:"bands"},l={AUTO:"auto",CUSTOM:"custom",NONE:"none"},u={PALETTE:"palette",NONE:"none"},c=()=>({name:s,type:"render",inputTypes:["datatable"],help:r.i18n.translate("expressionGauge.functions.gauge.help",{defaultMessage:"Gauge visualization"}),args:{shape:{types:["string"],options:[i.HORIZONTAL_BULLET,i.VERTICAL_BULLET,i.SEMI_CIRCLE,i.ARC,i.CIRCLE],help:r.i18n.translate("expressionGauge.functions.gauge.args.shape.help",{defaultMessage:"Type of gauge chart"}),required:!0,strict:!0},metric:{types:["string","vis_dimension"],help:r.i18n.translate("expressionGauge.functions.gauge.args.metric.help",{defaultMessage:"Current value"})},min:{types:["string","vis_dimension"],help:r.i18n.translate("expressionGauge.functions.gauge.args.min.help",{defaultMessage:"Minimum value"})},max:{types:["string","vis_dimension"],help:r.i18n.translate("expressionGauge.functions.gauge.args.max.help",{defaultMessage:"Maximum value"})},goal:{types:["string","vis_dimension"],help:r.i18n.translate("expressionGauge.functions.gauge.args.goal.help",{defaultMessage:"Goal Value"})},colorMode:{types:["string"],default:u.NONE,options:[u.NONE,u.PALETTE],help:r.i18n.translate("expressionGauge.functions.gauge.args.colorMode.help",{defaultMessage:"If set to palette, the palette colors will be applied to the bands"}),strict:!0},palette:{types:["palette"],help:r.i18n.translate("expressionGauge.functions.gauge.args.palette.help",{defaultMessage:"Provides colors for the values"})},ticksPosition:{types:["string"],default:o.AUTO,options:[o.HIDDEN,o.AUTO,o.BANDS],help:r.i18n.translate("expressionGauge.functions.gauge.args.ticksPosition.help",{defaultMessage:"Specifies the placement of ticks"}),strict:!0},labelMajor:{types:["string"],help:r.i18n.translate("expressionGauge.functions.gauge.args.labelMajor.help",{defaultMessage:"Specifies the labelMajor of the gauge chart displayed inside the chart."})},labelMajorMode:{types:["string"],options:[l.NONE,l.AUTO,l.CUSTOM],help:r.i18n.translate("expressionGauge.functions.gauge.args.labelMajorMode.help",{defaultMessage:"Specifies the mode of labelMajor"}),default:l.AUTO,strict:!0},labelMinor:{types:["string"],help:r.i18n.translate("expressionGauge.functions.gauge.args.labelMinor.help",{defaultMessage:"Specifies the labelMinor of the gauge chart"})},centralMajor:{deprecated:!0,types:["string"],help:r.i18n.translate("expressionGauge.functions.gauge.args.centralMajor.help",{defaultMessage:"Specifies the centralMajor of the gauge chart displayed inside the chart."})},centralMajorMode:{deprecated:!0,types:["string"],options:[l.NONE,l.AUTO,l.CUSTOM],help:r.i18n.translate("expressionGauge.functions.gauge.args.centralMajorMode.help",{defaultMessage:"Specifies the mode of centralMajor"}),strict:!0},percentageMode:{deprecated:!0,types:["boolean"],default:!1,help:r.i18n.translate("expressionGauge.functions.gauge.percentageMode.help",{defaultMessage:"Enables relative precentage mode"})},respectRanges:{types:["boolean"],default:!1,help:r.i18n.translate("expressionGauge.functions.gauge.respectRanges.help",{defaultMessage:"Respect max and min values from ranges"})},commonLabel:{types:["string"],help:r.i18n.translate("expressionGauge.functions.gauge.args.commonLabel.help",{defaultMessage:"Specifies the common label outside the chart"})},ariaLabel:{types:["string"],help:r.i18n.translate("expressionGauge.functions.gaugeChart.config.ariaLabel.help",{defaultMessage:"Specifies the aria label of the gauge chart"})}},fn(e,t,a){var i,o,l,u,c,p,g,d;(0,n.validateAccessor)(t.metric,e.columns),(0,n.validateAccessor)(t.min,e.columns),(0,n.validateAccessor)(t.max,e.columns),(0,n.validateAccessor)(t.goal,e.columns);const{metric:h,min:f,max:m,goal:_}=t;if(null!=a&&null!==(i=a.inspectorAdapters)&&void 0!==i&&i.tables){a.inspectorAdapters.tables.reset(),a.inspectorAdapters.tables.allowCsvExport=!0;const t=(0,n.prepareLogTable)(e,[[h?[h]:void 0,r.i18n.translate("expressionGauge.logDatatable.metric",{defaultMessage:"Metric"})],[f?[f]:void 0,r.i18n.translate("expressionGauge.logDatatable.min",{defaultMessage:"Min"})],[m?[m]:void 0,r.i18n.translate("expressionGauge.logDatatable.max",{defaultMessage:"Max"})],[_?[_]:void 0,r.i18n.translate("expressionGauge.logDatatable.goal",{defaultMessage:"Goal"})]],!0);a.inspectorAdapters.tables.logDatatable("default",t)}return{type:"render",as:s,value:{data:e,args:{...t,ariaLabel:null!==(o=null!==(l=t.ariaLabel)&&void 0!==l?l:null===(u=a.variables)||void 0===u?void 0:u.embeddableTitle)&&void 0!==o?o:null===(c=a.getExecutionContext)||void 0===c||null===(p=c.call(a))||void 0===p?void 0:p.description},canNavigateToLens:Boolean(null==a||null===(g=a.variables)||void 0===g?void 0:g.canNavigateToLens),overrides:null===(d=a.variables)||void 0===d?void 0:d.overrides}}}}),p="expressionGauge",g="expressionGauge"},25:(e,t,a)=>{"use strict";a.d(t,{S_:()=>d,Qh:()=>u,Xp:()=>l,gP:()=>i,Y0:()=>o,tw:()=>g,X8:()=>n});var r=a(634);const n=(e,t)=>{if(!t||!e)return;const a=e&&t[e];return null===a||Array.isArray(a)&&!a.length?void 0:"number"==typeof a?a:Array.isArray(a)&&"number"==typeof a[a.length-1]?a[a.length-1]:void 0};function s(e){const t=Math.floor(Math.log10(e)),a=e/Math.pow(10,t);let r=10;return a<=1?r=1:a<=2?r=2:a<=5&&(r=5),r*Math.pow(10,t)}const i=(e,t,a,r)=>{const i=null!=t&&t.max?n(t.max,e):void 0;if(null!=i)return i;if(r&&null!=a&&a.rangeMax){const r=null!=t&&t.metric?n(t.metric,e):void 0;return!r||r<(null==a?void 0:a.rangeMax)?a.rangeMax:r}if(e&&t){const{metric:n,goal:i}=t,l=n&&e[n],u=i&&e[i],c=o(e,t,a,r);if(null!=l){const e=[c,u,l].filter((e=>"number"==typeof e));return function(e,t){const a=t+1e-7,r=s(a-e),n=s(r/4);return{min:Math.floor(e/n)*n,max:Math.ceil(Math.ceil(a/n)*n)}}(c,Math.max(...e)).max}}return 100},o=(e,t,a,r)=>{const s=null!=t&&t.min?n(t.min,e):void 0;if(null!=s)return s;if(r&&null!=a&&a.rangeMin){const r=null!=t&&t.metric?n(t.metric,e):void 0;return!r||r>(null==a?void 0:a.rangeMin)?a.rangeMin:r}if(e&&t){const{metric:a,max:r}=t,n=[a&&e[a],r&&e[r]].filter((e=>"number"==typeof e));if(Math.min(...n)<=0)return Math.min(...n)-10}return 0},l=(e,t)=>{const a=null!=t&&t.goal?n(t.goal,e):void 0;if(null!=a)return a;const r=o(e,t),s=i(e,t);return Math.round(.75*(s-r)+r)},u=(e,t)=>{const{metric:a,min:n,max:s,goal:i}=e;if(a||n||s||i)return{min:n?(0,r.getAccessorByDimension)(n,t):void 0,max:s?(0,r.getAccessorByDimension)(s,t):void 0,goal:i?(0,r.getAccessorByDimension)(i,t):void 0,metric:a?(0,r.getAccessorByDimension)(a,t):void 0}};var c=a(59),p=a(728);const g=e=>({[p.GaugeShapes.HORIZONTAL_BULLET]:c.BulletSubtype.horizontal,[p.GaugeShapes.VERTICAL_BULLET]:c.BulletSubtype.vertical,[p.GaugeShapes.SEMI_CIRCLE]:c.BulletSubtype.halfCircle,[p.GaugeShapes.ARC]:c.BulletSubtype.twoThirdsCircle,[p.GaugeShapes.CIRCLE]:c.BulletSubtype.circle}[e]),d=(e,t)=>{const{rangeMin:a,rangeMax:r,range:n}=e.params,s=t[0],i=t[t.length-1];let o=a,l=r;if("percent"===n){const e={min:s,max:i};o=((e,{min:t,max:a})=>isFinite(e)?e*((a-t)/100):t)(o,e),l=((e,{min:t,max:a})=>isFinite(e)?e*((a-t)/100):a)(l,e)}return"number"===n&&(o=isFinite(o)?o:s,l=isFinite(l)?l:i),{min:o,max:l}}},442:(e,t,a)=>{"use strict";a.r(t),a.d(t,{getGoalValue:()=>_.Xp,getMaxValue:()=>_.gP,getMinValue:()=>_.Y0,getValueFromAccessor:()=>_.X8,plugin:()=>b});var r=a(215),n=a(728);const[s,i]=(0,r.createGetterSetter)("fieldFormats"),[o,l]=(0,r.createGetterSetter)("palette");var u=a(185),c=a(8),p=(a(286),a(791));const g=__kbnSharedDeps__.ReactDom,d=__kbnSharedDeps__.KbnReactKibanaContextRender,h=__kbnSharedDeps__.KbnAnalytics;var f=a(699),m={name:"fv05tr",styles:"height:100%;width:100%;overflow:hidden;user-select:text"};class ExpressionGaugePlugin{setup(e,{expressions:t,charts:i}){i.palettes.getPalettes().then((e=>{l(e)}));const _=(0,r.createStartServicesGetter)(e.getStartServices);t.registerFunction(n.gaugeFunction),t.registerRenderer((({getStartDeps:e})=>({name:n.EXPRESSION_GAUGE_NAME,displayName:c.i18n.translate("expressionGauge.renderer.visualizationName",{defaultMessage:"Gauge"}),reuseDomNode:!0,render:async(t,r,i)=>{const{core:l,plugins:c}=e();i.onDestroy((()=>{(0,g.unmountComponentAtNode)(t)}));const{GaugeComponent:_}=await a.e(842).then(a.bind(a,842));(0,g.render)((0,p.jsx)(d.KibanaRenderContextProvider,l,(0,p.jsx)("div",{className:"eui-scrollBar","data-test-subj":"gaugeChart",css:m},(0,p.jsx)(_,(0,u.default)({},r,{setChartSize:e=>{const t={name:"chartSize",data:e};i.event(t)},formatFactory:s().deserialize,chartsThemeService:c.charts.theme,paletteService:o(),renderComplete:()=>{let e;switch(r.args.shape){case n.GaugeShapes.HORIZONTAL_BULLET:e=`${n.EXPRESSION_GAUGE_NAME}_horizontal`;break;case n.GaugeShapes.VERTICAL_BULLET:e=`${n.EXPRESSION_GAUGE_NAME}_vertical`;break;case n.GaugeShapes.SEMI_CIRCLE:e=`${n.EXPRESSION_GAUGE_NAME}_semi_circle`;break;case n.GaugeShapes.ARC:e=`${n.EXPRESSION_GAUGE_NAME}_arc`;break;case n.GaugeShapes.CIRCLE:e=`${n.EXPRESSION_GAUGE_NAME}_circle`;break;default:e=n.EXPRESSION_GAUGE_NAME}const t=i.getExecutionContext(),a=(0,f.VG)(t),s=(0,f.ml)(t);if(a&&s){var o;const t=[`render_${s}_${e}`,r.canNavigateToLens?`render_${s}_${e}_convertable`:void 0].filter((e=>Boolean(e)));null===(o=c.usageCollection)||void 0===o||o.reportUiCounter(a,h.METRIC_TYPE.COUNT,t)}i.done()},uiState:i.uiState})))),t)}}))({getStartDeps:_}))}start(e,{fieldFormats:t}){i(t)}}var _=a(25);function b(){return new ExpressionGaugePlugin}},698:(e,t,a)=>{a.p=window.__kbnPublicPath__.expressionGauge},240:(e,t,a)=>{a.r(t);var r=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},195:(e,t,a)=>{a.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},215:(e,t,a)=>{a.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},634:(e,t,a)=>{a.r(t);var r=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},185:(e,t,a)=>{e.exports=a(497)(51858)},59:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var s=a[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.m=t,r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[])),r.u=e=>"expressionGauge.chunk."+e+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},r.l=(t,a,n,s)=>{if(e[t])e[t].push(a);else{var i,o;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==t){i=c;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.src=t),e[t]=[a];var p=(a,r)=>{i.onerror=i.onload=null,clearTimeout(g);var n=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(r))),a)return a(r)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),o&&document.head.appendChild(i)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={438:0};r.f.j=(t,a)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var s=new Promise(((a,r)=>n=e[t]=[a,r]));a.push(n[2]=s);var i=r.p+r.u(t),o=new Error;r.l(i,(a=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,n[1](o)}}),"chunk-"+t,t)}};var t=(t,a)=>{var n,s,[i,o,l]=a,u=0;if(i.some((t=>0!==e[t]))){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);l&&l(r)}for(t&&t(a);u<i.length;u++)s=i[u],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},a=self.expressionGauge_bundle_jsonpfunction=self.expressionGauge_bundle_jsonpfunction||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),r(698),__kbnBundles__.define("plugin/expressionGauge/public",r,442),__kbnBundles__.define("plugin/expressionGauge/common",r,728)})();