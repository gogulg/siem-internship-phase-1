(()=>{var e,t={699:(e,t,n)=>{"use strict";n.d(t,{VG:()=>r,ml:()=>s,i3:()=>o,PO:()=>a});const r=e=>{if(e){var t;const n=e=>e.type?e:e.child?n(e.child):void 0;return null===(t=n(e))||void 0===t?void 0:t.type}},s=e=>{if(e){var t;const n=e=>e.child?n(e.child):e;return null===(t=n(e))||void 0===t?void 0:t.type}};function a(e,t){return e&&e[t]?Object.fromEntries(Object.entries(e[t]).map((([e,t])=>"ignore"===t?[e,void 0]:[e,t]))):{}}var i=n(195);function o(e=[],t,n){return t?e.filter((({[t]:e})=>!(void 0===e||null!=n&&n.includes(e)))).map((e=>{const n=e[t],r=((0,i.isMultiFieldKey)(n)?n.keys:[n]).map(String),s=r.join(",");return{key:r,stringifiedKeys:s}})).reduce(((e,{key:t,stringifiedKeys:n})=>(e.keys.has(n)||(e.keys.add(n),e.categories.push(1===t.length?t[0]:t)),e)),{keys:new Set,categories:[]}).categories:[]}},478:(e,t,n)=>{"use strict";n.d(t,{HM:()=>r,t4:()=>a,x2:()=>s});const r="tagcloud",s={LINEAR:"linear",LOG:"log",SQUARE_ROOT:"square root"},a={SINGLE:"single",RIGHT_ANGLED:"right angled",MULTIPLE:"multiple"}},435:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EXPRESSION_NAME:()=>r.HM,Orientation:()=>r.t4,ScaleOptions:()=>r.x2});var r=n(478)},396:(e,t,n)=>{"use strict";n.d(t,{h:()=>a,t:()=>s});var r=n(215);const[s,a]=(0,r.createGetterSetter)("fieldFormats")},447:(e,t,n)=>{"use strict";n.r(t),n.d(t,{plugin:()=>y});var r=n(215),s=n(185),a=n(286);const i=__kbnSharedDeps__.ReactDom;var o=n(791),l=n(8);const c=__kbnSharedDeps__.KbnReactKibanaContextRender;var u=n(500);const d=__kbnSharedDeps__.KbnAnalytics;var p=n(699),g=n(435);const b={height:"100%"},f=(0,a.lazy)((()=>n.e(864).then(n.bind(n,864))));var m=n(634),_=n(478);const v={help:l.i18n.translate("expressionTagcloud.functions.tagcloudHelpText",{defaultMessage:"Tagcloud visualization."}),argHelp:{scale:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.scaleHelpText",{defaultMessage:"Scale to determine font size of a word"}),orientation:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.orientationHelpText",{defaultMessage:"Orientation of words inside tagcloud"}),minFontSize:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.minFontSizeHelpText",{defaultMessage:"Min font size"}),maxFontSize:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.maxFontSizeHelpText",{defaultMessage:"Max font size"}),showLabel:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.showLabelHelpText",{defaultMessage:"Show chart label"}),palette:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.paletteHelpText",{defaultMessage:"Defines the chart palette name"}),metric:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.metricHelpText",{defaultMessage:"metric dimension configuration"}),bucket:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.bucketHelpText",{defaultMessage:"bucket dimension configuration"}),ariaLabel:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.ariaLabelHelpText",{defaultMessage:"Specifies the aria label of the tagcloud"}),isPreview:l.i18n.translate("expressionTagcloud.functions.tagcloud.args.isPreviewHelpText",{defaultMessage:"Set isPreview to true to avoid showing out of room warnings"}),colorMapping:l.i18n.translate("expressionTagcloud.layer.colorMapping.help",{defaultMessage:"JSON key-value pairs of the color mapping model"})},dimension:{tags:l.i18n.translate("expressionTagcloud.functions.tagcloud.dimension.tags",{defaultMessage:"Tags"}),tagSize:l.i18n.translate("expressionTagcloud.functions.tagcloud.dimension.tagSize",{defaultMessage:"Tag size"})}},h=()=>{const{help:e,argHelp:t,dimension:n}=v;return{name:_.HM,type:"render",inputTypes:["datatable"],help:e,args:{scale:{types:["string"],default:_.x2.LINEAR,options:[_.x2.LINEAR,_.x2.LOG,_.x2.SQUARE_ROOT],help:t.scale,strict:!0},orientation:{types:["string"],default:_.t4.SINGLE,options:[_.t4.SINGLE,_.t4.RIGHT_ANGLED,_.t4.MULTIPLE],help:t.orientation,strict:!0},minFontSize:{types:["number"],default:18,help:t.minFontSize},maxFontSize:{types:["number"],default:72,help:t.maxFontSize},showLabel:{types:["boolean"],default:!0,help:t.showLabel},palette:{types:["palette","system_palette"],help:t.palette,default:"{palette}"},metric:{types:["vis_dimension","string"],help:t.metric,required:!0},bucket:{types:["vis_dimension","string"],help:t.bucket},ariaLabel:{types:["string"],help:t.ariaLabel,required:!1},isPreview:{types:["boolean"],help:t.isPreview,default:!1,required:!1},colorMapping:{types:["string"],help:t.colorMapping}},fn(e,t,r){var s,a,i,o,l,c,u,d;(0,m.validateAccessor)(t.metric,e.columns),(0,m.validateAccessor)(t.bucket,e.columns);const p={scale:t.scale,orientation:t.orientation,minFontSize:t.minFontSize,maxFontSize:t.maxFontSize,showLabel:t.showLabel,metric:t.metric,...t.bucket&&{bucket:t.bucket},palette:t.palette,ariaLabel:null!==(s=null!==(a=t.ariaLabel)&&void 0!==a?a:null===(i=r.variables)||void 0===i?void 0:i.embeddableTitle)&&void 0!==s?s:null===(o=r.getExecutionContext)||void 0===o||null===(l=o.call(r))||void 0===l?void 0:l.description,isPreview:Boolean(t.isPreview),colorMapping:t.colorMapping};if(null!=r&&null!==(c=r.inspectorAdapters)&&void 0!==c&&c.tables){const s=[[[t.metric],n.tagSize]];t.bucket&&s.push([[t.bucket],n.tags]);const a=(0,m.prepareLogTable)(e,s,!0);r.inspectorAdapters.tables.logDatatable("default",a)}return{type:"render",as:_.HM,value:{visData:e,visType:_.HM,visParams:p,syncColors:null!==(u=null==r||null===(d=r.isSyncColorsEnabled)||void 0===d?void 0:d.call(r))&&void 0!==u&&u}}}}};var x=n(396);class ExpressionTagcloudPlugin{setup(e,{expressions:t,charts:n}){const a=(0,r.createStartServicesGetter)(e.getStartServices);t.registerFunction(h),t.registerRenderer((({getStartDeps:e})=>({name:g.EXPRESSION_NAME,displayName:l.i18n.translate("expressionTagcloud.renderer.tagcloud.displayName",{defaultMessage:"Tag Cloud visualization"}),help:l.i18n.translate("expressionTagcloud.renderer.tagcloud.helpDescription",{defaultMessage:"Render a tag cloud"}),reuseDomNode:!0,render:async(t,n,r)=>{const{core:a,plugins:l}=e();r.onDestroy((()=>{(0,i.unmountComponentAtNode)(t)}));const m=()=>{const e=r.getExecutionContext(),t=(0,p.VG)(e),n=(0,p.ml)(e);var s;t&&n&&(null===(s=l.usageCollection)||void 0===s||s.reportUiCounter(t,d.METRIC_TYPE.COUNT,[`render_${n}_${g.EXPRESSION_NAME}`])),r.done()};r.event({name:"chartSize",data:{maxDimensions:{x:{value:100,unit:"percentage"},y:{value:100,unit:"percentage"}}}});const _=await l.charts.palettes.getPalettes();let v=!1;l.charts.theme.darkModeEnabled$.subscribe((e=>{v=e.darkMode})).unsubscribe(),(0,i.render)((0,o.jsx)(c.KibanaRenderContextProvider,a,(0,o.jsx)(o.ClassNames,null,(({css:e,cx:t})=>(0,o.jsx)(u.VisualizationContainer,{handlers:r,className:t("tagCloudContainer",e(b)),renderComplete:m},(0,o.jsx)(f,(0,s.default)({},n,{palettesRegistry:_,renderComplete:m,fireEvent:r.event,syncColors:n.syncColors,overrides:n.overrides,isDarkMode:v})))))),t)}}))({getStartDeps:a}))}start(e,{fieldFormats:t}){(0,x.h)(t)}stop(){}}function y(){return new ExpressionTagcloudPlugin}},794:(e,t,n)=>{n.p=window.__kbnPublicPath__.expressionTagcloud},240:(e,t,n)=>{n.r(t);var r=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},195:(e,t,n)=>{n.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},215:(e,t,n)=>{n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},634:(e,t,n)=>{n.r(t);var r=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},500:(e,t,n)=>{n.r(t);var r=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},185:(e,t,n)=>{e.exports=n(497)(51858)},59:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"expressionTagcloud.chunk."+e+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},r.l=(t,n,s,a)=>{if(e[t])e[t].push(n);else{var i,o;if(void 0!==s)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==t){i=u;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.src=t),e[t]=[n];var d=(n,r)=>{i.onerror=i.onload=null,clearTimeout(p);var s=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach((e=>e(r))),n)return n(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),o&&document.head.appendChild(i)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={470:0};r.f.j=(t,n)=>{var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var a=new Promise(((n,r)=>s=e[t]=[n,r]));n.push(s[2]=a);var i=r.p+r.u(t),o=new Error;r.l(i,(n=>{if(r.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,s[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var s,a,[i,o,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);l&&l(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.expressionTagcloud_bundle_jsonpfunction=self.expressionTagcloud_bundle_jsonpfunction||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r(794),__kbnBundles__.define("plugin/expressionTagcloud/public",r,447),__kbnBundles__.define("plugin/expressionTagcloud/common",r,435)})();