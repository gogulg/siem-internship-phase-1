/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e={967:(e,t,r)=>{"use strict";r.r(t),r.d(t,{plugin:()=>u});const i=__kbnSharedDeps__.Rxjs,a=__kbnSharedDeps__.FastestLevenshtein,o=(e,t)=>{e=e.toLowerCase();const r=[t.app.title,...t.subLinkTitles].join(" ").toLowerCase(),i=l(e,r),a=[...t.app.keywords.map((e=>e.toLowerCase())),...t.keywords.map((e=>e.toLowerCase()))],o=n(e,a);return Math.max(i,o)},l=(e,t)=>{if(t===e)return 100;if(t.startsWith(e))return 90;if(t.includes(e))return 75;const r=Math.max(e.length,t.length),i=(0,a.distance)(e,t),o=Math.floor(100*(1-i/r));return o>=60?o:0},n=(e,t)=>{const r=t.map((t=>l(e,t)));return Math.max(...r)},s=(e,t)=>{var r,i;return t?[...t.path&&t.visibleIn.includes("globalSearch")?[{...t,id:`${e.id}-${t.id}`,app:e,path:`${e.appRoute}${t.path}`,subLinkTitles:[t.title],keywords:[...null!==(r=t.keywords)&&void 0!==r?r:[]]}]:[],...t.deepLinks.flatMap((t=>s(e,t))).map((e=>({...e,subLinkTitles:[t.title,...e.subLinkTitles],keywords:[...t.keywords,...e.keywords]})))]:[...e.visibleIn.includes("globalSearch")?[{id:e.id,app:e,path:e.appRoute,subLinkTitles:[],keywords:null!==(i=null==e?void 0:e.keywords)&&void 0!==i?i:[]}]:[],...e.deepLinks.flatMap((t=>s(e,t)))]},p="application";class GlobalSearchProvidersPlugin{setup({getStartServices:e},{globalSearch:t}){const r=e().then((([e])=>e.application));return t.registerResultProvider((e=>{const t=(0,i.from)(e).pipe((0,i.mergeMap)((e=>e.applications$)),(0,i.map)((e=>[...e.values()].filter((e=>0===e.status&&!0!==e.chromeless)))),(0,i.shareReplay)(1));return{id:"application",find:({term:e,types:r,tags:a},{aborted$:l,maxResults:n})=>a||r&&!r.includes(p)?(0,i.of)([]):t.pipe((0,i.takeUntil)(l),(0,i.take)(1),(0,i.map)((t=>{const r=((e,t)=>t.flatMap((t=>{var r;return e.length>0?s(t):t.visibleIn.includes("globalSearch")?[{id:t.id,app:t,path:t.appRoute,subLinkTitles:[],keywords:null!==(r=t.keywords)&&void 0!==r?r:[]}]:[]})).map((t=>({appLink:t,score:o(e,t)}))).filter((({score:e})=>e>0)).map((({appLink:e,score:t})=>((e,t)=>{var r,i,a,o,l,n,s,p,u;const c="management"===e.app.id&&e.subLinkTitles.length>0?e.subLinkTitles:[e.app.title,...e.subLinkTitles];return{id:e.id,title:c.join(" / "),type:"application",icon:null!==(r=e.euiIconType)&&void 0!==r?r:e.app.euiIconType,url:e.path,meta:{categoryId:null!==(i=null!==(a=null===(o=e.category)||void 0===o?void 0:o.id)&&void 0!==a?a:null===(l=e.app.category)||void 0===l?void 0:l.id)&&void 0!==i?i:null,categoryLabel:null!==(n=null!==(s=null===(p=e.category)||void 0===p?void 0:p.label)&&void 0!==s?s:null===(u=e.app.category)||void 0===u?void 0:u.label)&&void 0!==n?n:null},score:t}})(e,t))))(null!=e?e:"",[...t.values()]);return r.sort(((e,t)=>t.score-e.score)).slice(0,n)}))),getSearchableTypes:()=>[p]}})(r)),{}}start(){return{}}}const u=()=>new GlobalSearchProvidersPlugin},568:(e,t,r)=>{r.p=window.__kbnPublicPath__.globalSearchProviders}},t={};function r(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r(568),__kbnBundles__.define("plugin/globalSearchProviders/public",r,967)})();