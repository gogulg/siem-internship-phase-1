/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t={428:(e,t,a)=>{"use strict";a.d(t,{CI:()=>s,Wr:()=>i,h8:()=>n,zl:()=>r});const n="aiopsChangePointChart",i="aiopsChangePointChart",s="aiopsChangePointChartDataViewId",r={CHARTS:"charts",TABLE:"table"}},2224:(e,t,a)=>{"use strict";a.d(t,{KO:()=>o,fr:()=>r,jq:()=>l,n2:()=>i,qh:()=>s});var n=a(5008);const i="aiops",s={LOG_RATE_ANALYSIS_FIELD_CANDIDATES:"/internal/aiops/log_rate_analysis/field_candidates",LOG_RATE_ANALYSIS:"/internal/aiops/log_rate_analysis",CATEGORIZATION_FIELD_VALIDATION:"/internal/aiops/categorization_field_validation"},r="aiops-analysis-run-origin",o={CASES:"cases",DASHBOARD:"dashboard",DEFAULT:"embeddable",DISCOVER:"discover",ML_AIOPS_LABS:"ml_aiops_labs"},l=[{id:"logs-aiops",getDisplayName:()=>n.i18n.translate("xpack.aiops.embedabble.groupingDisplayName",{defaultMessage:"Log analysis"}),getIconType:()=>"machineLearningApp"}]},2427:(e,t,a)=>{"use strict";a.d(t,{OZ:()=>n,Xz:()=>s,l3:()=>i});const n="aiopsPatternAnalysisEmbeddable",i="aiopsPatternAnalysisEmbeddable",s="aiopsPatternAnalysisEmbeddableDataViewId"},5105:(e,t,a)=>{"use strict";a.d(t,{Zt:()=>s,nS:()=>i,ot:()=>o,q1:()=>r,rv:()=>l});var n=a(1319);const i=3867412,s=()=>{const{euiTheme:e}=(0,n.useEuiTheme)();return{barColor:(e.flags.hasVisColorAdjustment,e.colors.vis.euiColorVis0),barHighlightColor:e.flags.hasVisColorAdjustment?"orange":e.colors.vis.euiColorVis8}},r="aiopsLogRateAnalysisEmbeddable",o="aiopsLogRateAnalysisEmbeddableDataViewId",l="aiopsLogRateAnalysisEmbeddable"},2589:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ChangePointDetection:()=>f,LogCategorization:()=>m,LogRateAnalysis:()=>u,LogRateAnalysisContent:()=>b,plugin:()=>L});var n=a(190),i=a(1264),s=a(4286),r=a.n(s),o=a(1319),l=a(6791);const c=r().lazy((()=>Promise.all([a.e(74),a.e(676),a.e(52),a.e(896),a.e(378),a.e(144),a.e(882)]).then(a.bind(a,8882)))),d=r().lazy((()=>Promise.all([a.e(74),a.e(676),a.e(52),a.e(896),a.e(378),a.e(109)]).then(a.bind(a,5109)))),p=({children:e})=>(0,l.jsx)(o.EuiErrorBoundary,null,(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)(o.EuiSkeletonText,{lines:3})},e)),u=e=>(0,l.jsx)(p,null,(0,l.jsx)(c,e)),b=e=>(0,l.jsx)(p,null,(0,l.jsx)(d,e)),g=r().lazy((()=>Promise.all([a.e(74),a.e(676),a.e(52),a.e(402),a.e(896),a.e(514),a.e(144),a.e(542)]).then(a.bind(a,5542)))),m=e=>(0,l.jsx)(p,null,(0,l.jsx)(g,e)),_=r().lazy((()=>Promise.all([a.e(74),a.e(676),a.e(52),a.e(402),a.e(514),a.e(479),a.e(48)]).then(a.bind(a,7048)))),h=e=>(0,l.jsx)(p,null,(0,l.jsx)(_,e)),y=r().lazy((()=>Promise.all([a.e(74),a.e(676),a.e(883),a.e(144),a.e(421),a.e(522)]).then(a.bind(a,4522)))),f=e=>(0,l.jsx)(p,null,(0,l.jsx)(y,e));var A=a(428),P=a(2427),v=a(5105),w=a(4839),x=a(7546),E=a(5008);const D="ACTION_CATEGORIZE_FIELD",j="CATEGORIZE_FIELD_TRIGGER",k={id:j,title:E.i18n.translate("xpack.ml.actions.runPatternAnalysis.title",{defaultMessage:"Run pattern analysis"}),description:E.i18n.translate("xpack.ml.actions.runPatternAnalysis.description",{defaultMessage:"Triggered when user wants to run pattern analysis on a field."})},S=async e=>{const{apiIsPresentationContainer:t}=await Promise.all([a.e(857),a.e(689)]).then(a.bind(a,2689));return t(e)?e:void 0},C=async e=>{var t;const{apiHasParentApi:n,apiPublishesTimeRange:i}=await a.e(857).then(a.bind(a,3857));let s=null===(t=e.timeRange$)||void 0===t?void 0:t.getValue();return!s&&n(e)&&i(e.parentApi)&&(s=e.parentApi.timeRange$.getValue()),s};var O=a(2224);const R=async e=>{const{apiIsPresentationContainer:t}=await Promise.all([a.e(857),a.e(689)]).then(a.bind(a,2689));return t(e)?e:void 0},T=async e=>{const{apiIsPresentationContainer:t}=await Promise.all([a.e(857),a.e(689)]).then(a.bind(a,2689));return t(e)?e:void 0};var I=a(5879);class AiopsPlugin{setup(e,{embeddable:t,cases:s,licensing:o,uiActions:c}){Promise.all([(0,n.firstValueFrom)(o.license$),e.getStartServices()]).then((([n,[o,d]])=>{const{canUseAiops:p}=o.application.capabilities.ml;n.hasAtLeast("platinum")&&p&&(t&&((e,t)=>{e.registerReactEmbeddableFactory(A.Wr,(async()=>{const{getChangePointChartEmbeddableFactory:e}=await Promise.all([a.e(857),a.e(643)]).then(a.bind(a,7643));return e(t.getStartServices)})),e.registerReactEmbeddableFactory(P.l3,(async()=>{const{getPatternAnalysisEmbeddableFactory:e}=await Promise.all([a.e(857),a.e(853)]).then(a.bind(a,1853));return e(t.getStartServices)})),e.registerReactEmbeddableFactory(v.q1,(async()=>{const{getLogRateAnalysisEmbeddableFactory:e}=await Promise.all([a.e(857),a.e(143)]).then(a.bind(a,143));return e(t.getStartServices)}))})(t,e),c&&function(e,t,n){const i=function(e,t){return{id:"open-change-point-in-ml-app",type:"openChangePointInMlAppAction",getIconType:e=>"link",getDisplayName:()=>E.i18n.translate("xpack.aiops.actions.openChangePointInMlAppName",{defaultMessage:"Open in AIOps Labs"}),async getHref(e){const{isChangePointChartEmbeddableContext:n}=await a.e(740).then(a.bind(a,8359));if(!n(e))throw new w.IncompatibleActionError;const i=t.share.url.locators.get("ML_APP_LOCATOR"),{metricField:s,fn:r,splitField:o,dataViewId:l}=e.embeddable;return i.getUrl({page:"aiops/change_point_detection",pageState:{index:l.getValue(),timeRange:await C(e.embeddable),fieldConfigs:[{fn:r.getValue(),metricField:s.getValue(),...o.getValue()?{splitField:o.getValue()}:{}}]}})},async execute(t){const{isChangePointChartEmbeddableContext:n}=await a.e(740).then(a.bind(a,8359));if(!n(t))throw new w.IncompatibleActionError;const i=await this.getHref(t);i&&await e.application.navigateToUrl(i)},async isCompatible(e){const{isChangePointChartEmbeddableContext:t}=await a.e(740).then(a.bind(a,8359));return t(e)}}}(t,n),s=function(e,t){return{id:"create-change-point-chart",grouping:[{id:"ml",getDisplayName:()=>E.i18n.translate("xpack.aiops.navMenu.mlAppNameText",{defaultMessage:"Machine Learning and Analytics"}),getIconType:()=>"machineLearningApp"}],order:10,getIconType:()=>"changePointDetection",getDisplayName:()=>E.i18n.translate("xpack.aiops.embeddableChangePointChartDisplayName",{defaultMessage:"Change point detection"}),isCompatible:async e=>Boolean(await S(e.embeddable)),async execute(n){const i=await S(n.embeddable);if(!i)throw new w.IncompatibleActionError;try{const{resolveEmbeddableChangePointUserInput:s}=await Promise.all([a.e(74),a.e(857),a.e(676),a.e(883),a.e(861),a.e(880)]).then(a.bind(a,4861)),r=await s(e,t,n.embeddable,n.embeddable.uuid);i.addNewPanel({panelType:A.Wr,initialState:r})}catch(e){return Promise.reject()}}}}(t,n),r=function(e,t){return{id:"create-pattern-analysis-embeddable",grouping:O.jq,getIconType:()=>"logPatternAnalysis",getDisplayName:()=>E.i18n.translate("xpack.aiops.embeddablePatternAnalysisDisplayName",{defaultMessage:"Pattern analysis"}),isCompatible:async e=>Boolean(await R(e.embeddable)),async execute(n){const i=await R(n.embeddable);if(!i)throw new w.IncompatibleActionError;try{const{resolveEmbeddablePatternAnalysisUserInput:s}=await Promise.all([a.e(857),a.e(402),a.e(479),a.e(516),a.e(880)]).then(a.bind(a,4760)),r={dataViewId:void 0},o=await i.addNewPanel({panelType:P.l3,initialState:r});if(!o)return;const l=()=>{i.removePanel(o.uuid)};s(e,t,n.embeddable,o.uuid,!0,o,l)}catch(e){return Promise.reject()}}}}(t,n),o=function(e,t){return{id:"create-log-rate-analysis-embeddable",grouping:O.jq,getIconType:()=>"logRateAnalysis",getDisplayName:()=>E.i18n.translate("xpack.aiops.embeddableLogRateAnalysisDisplayName",{defaultMessage:"Log rate analysis"}),isCompatible:async e=>Boolean(await T(e.embeddable)),async execute(n){const i=await T(n.embeddable);if(!i)throw new w.IncompatibleActionError;try{const{resolveEmbeddableLogRateAnalysisUserInput:s}=await Promise.all([a.e(857),a.e(359)]).then(a.bind(a,740)),r={dataViewId:void 0},o=await i.addNewPanel({panelType:v.q1,initialState:r});if(!o)return;const l=()=>{i.removePanel(o.uuid)};s(e,t,n.embeddable,o.uuid,!0,o,l)}catch(e){return Promise.reject()}}}}(t,n);e.addTriggerAction(w.ADD_PANEL_TRIGGER,r),e.addTriggerAction(w.ADD_PANEL_TRIGGER,s),e.registerTrigger(k),e.addTriggerAction(j,((e,t)=>(0,w.createAction)({type:D,id:D,getDisplayName:()=>E.i18n.translate("xpack.aiops.categorizeFieldAction.displayName",{defaultMessage:"Pattern analysis"}),isCompatible:async({field:e})=>{var t;return!0===(null===(t=e.esTypes)||void 0===t?void 0:t.includes("text"))},execute:async n=>{const{field:i,dataView:s,originatingApp:r,additionalFilter:o}=n,{showCategorizeFlyout:l}=await Promise.all([a.e(74),a.e(676),a.e(52),a.e(402),a.e(514),a.e(754)]).then(a.bind(a,8754));l(i,s,e,t,r,o)}}))(t,n)),e.addTriggerAction(x.CONTEXT_MENU_TRIGGER,i),e.addTriggerAction(w.ADD_PANEL_TRIGGER,o)}(c,o,d),s&&function(e,t,n){const s=(0,i.bp)(t,n);e.attachmentFramework.registerPersistableState({id:A.h8,icon:"machineLearningApp",displayName:E.i18n.translate("xpack.aiops.changePointDetection.cases.attachmentName",{defaultMessage:"Change point chart"}),getAttachmentViewObject:()=>({event:(0,l.jsx)(I.FormattedMessage,{id:"xpack.aiops.changePointDetection.cases.attachmentEvent",defaultMessage:"added change point chart"}),timelineAvatar:"machineLearningApp",children:r().lazy((async()=>{const{initComponent:e}=await a.e(5).then(a.bind(a,5005));return{default:e(n.fieldFormats,s)}}))}),getAttachmentRemovalObject:()=>({event:(0,l.jsx)(I.FormattedMessage,{id:"xpack.aiops.changePointDetection.cases.attachmentRemovalEvent",defaultMessage:"removed change point chart"})})});const o=(0,i.u0)(t,n);e.attachmentFramework.registerPersistableState({id:P.OZ,icon:"machineLearningApp",displayName:E.i18n.translate("xpack.aiops.logPatternAnalysis.cases.attachmentName",{defaultMessage:"Log pattern analysis"}),getAttachmentViewObject:()=>({event:(0,l.jsx)(I.FormattedMessage,{id:"xpack.aiops.logPatternAnalysis.cases.attachmentEvent",defaultMessage:"added log pattern analysis"}),timelineAvatar:"machineLearningApp",children:r().lazy((async()=>{const{initComponent:e}=await a.e(441).then(a.bind(a,6441));return{default:e(n.fieldFormats,o)}}))}),getAttachmentRemovalObject:()=>({event:(0,l.jsx)(I.FormattedMessage,{id:"xpack.aiops.logPatternAnalysis.cases.attachmentRemovalEvent",defaultMessage:"removed log pattern analysis"})})});const c=(0,i.Y)(t,n);e.attachmentFramework.registerPersistableState({id:v.rv,icon:"machineLearningApp",displayName:E.i18n.translate("xpack.aiops.logRateAnalysis.cases.attachmentName",{defaultMessage:"Log rate analysis"}),getAttachmentViewObject:()=>({event:(0,l.jsx)(I.FormattedMessage,{id:"xpack.aiops.logRateAnalysis.cases.attachmentEvent",defaultMessage:"added log rate analysis"}),timelineAvatar:"machineLearningApp",children:r().lazy((async()=>{const{initComponent:e}=await a.e(914).then(a.bind(a,4914));return{default:e(n.fieldFormats,c)}}))}),getAttachmentRemovalObject:()=>({event:(0,l.jsx)(I.FormattedMessage,{id:"xpack.aiops.logRateAnalysis.cases.attachmentRemovalEvent",defaultMessage:"removed log rate analysis"})})})}(s,o,d))}))}start(e,t){return{ChangePointDetectionComponent:(0,i.bp)(e,t),getPatternAnalysisAvailable:async()=>{const{getPatternAnalysisAvailable:e}=await a.e(188).then(a.bind(a,1188));return e(t.licensing)},PatternAnalysisComponent:h}}stop(){}}function L(){return new AiopsPlugin}},1264:(e,t,a)=>{"use strict";a.d(t,{bp:()=>c,Y:()=>b,u0:()=>p});var n=a(3185),i=a(4286),s=a.n(i),r=a(6791);function o(e,t={}){const a=s().lazy(e);return s().forwardRef(((e,n)=>{var o;return(0,r.jsx)(i.Suspense,{fallback:null!==(o=t.fallback)&&void 0!==o?o:null},s().createElement(a,{...e,ref:n}))}))}const l=o((async()=>Promise.all([a.e(74),a.e(676),a.e(883),a.e(421),a.e(92)]).then(a.bind(a,8092)))),c=(e,t)=>s().memo((a=>(0,r.jsx)(l,(0,n.default)({coreStart:e,pluginStart:t},a)))),d=o((async()=>Promise.all([a.e(74),a.e(52),a.e(402),a.e(514),a.e(344)]).then(a.bind(a,3344)))),p=(e,t)=>s().memo((a=>(0,r.jsx)(d,(0,n.default)({coreStart:e,pluginStart:t},a)))),u=o((async()=>Promise.all([a.e(74),a.e(52),a.e(896),a.e(378),a.e(284)]).then(a.bind(a,313)))),b=(e,t)=>s().memo((a=>(0,r.jsx)(u,(0,n.default)({coreStart:e,pluginStart:t},a))))},9577:(e,t,a)=>{a.p=window.__kbnPublicPath__.aiops},450:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/cases/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},2212:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7195:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},4627:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7674:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/dataViews/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7546:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},2374:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},409:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},1215:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},7704:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},4839:(e,t,a)=>{a.r(t);var n=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},3185:(e,t,a)=>{e.exports=a(2497)(51858)},3059:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},1319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},6791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},6744:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnAnalytics},6494:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnDatemath},1192:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEbtTools},5964:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsQuery},5008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},5879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},5995:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnRison},1728:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},1783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},4286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},2874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},7012:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRedux},1493:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRouterDom},7150:e=>{"use strict";e.exports=__kbnSharedDeps__.ReduxjsToolkit},190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},2497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},a={};function n(e){var i=a[e];if(void 0!==i)return i.exports;var s=a[e]={id:e,exports:{}};return t[e](s,s.exports,n),s.exports}n.m=t,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[])),n.u=e=>"aiops.chunk."+e+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},n.l=(t,a,i,s)=>{if(e[t])e[t].push(a);else{var r,o;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==t){r=d;break}}r||(o=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.src=t),e[t]=[a];var p=(a,n)=>{r.onerror=r.onload=null,clearTimeout(u);var i=e[t];if(delete e[t],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),a)return a(n)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),o&&document.head.appendChild(r)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var i=a.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=a[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={763:0};n.f.j=(t,a)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var s=new Promise(((a,n)=>i=e[t]=[a,n]));a.push(i[2]=s);var r=n.p+n.u(t),o=new Error;n.l(r,(a=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,i[1](o)}}),"chunk-"+t,t)}};var t=(t,a)=>{var i,s,[r,o,l]=a,c=0;if(r.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);l&&l(n)}for(t&&t(a);c<r.length;c++)s=r[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},a=self.aiops_bundle_jsonpfunction=self.aiops_bundle_jsonpfunction||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),n.nc=void 0,n(9577),__kbnBundles__.define("plugin/aiops/public",n,2589)})();