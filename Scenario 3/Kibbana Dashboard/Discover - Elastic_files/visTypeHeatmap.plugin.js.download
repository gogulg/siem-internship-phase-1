(()=>{var e,t={435:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LEGACY_HEATMAP_CHARTS_LIBRARY:()=>a});const a="visualization:visualize:legacyHeatmapChartsLibrary"},508:(e,t,r)=>{"use strict";r.r(t),r.d(t,{heatmapVisType:()=>T,plugin:()=>E});var a=r(915),s=r(435),i=r(8),n=r(59),o=r(627),l=r(240),p=r(500),c=r(566),u=r(904),d=r(322);const g=e=>{var t,r;const a=(0,u.buildExpressionFunction)("heatmap_legend",{isVisible:e.addLegend,position:e.legendPosition,shouldTruncate:null===(t=e.truncateLegend)||void 0===t||t,maxLines:null!==(r=e.maxLegendLines)&&void 0!==r?r:1,legendSize:e.legendSize});return(0,u.buildExpression)([a])},m=e=>{const t=(0,u.buildExpressionFunction)("visdimension",{accessor:e.accessor});return e.format&&(t.addArgument("format",e.format.id),t.addArgument("formatParams",JSON.stringify(e.format.params))),(0,u.buildExpression)([t])},_=e=>{var t,r;const a=(0,u.buildExpressionFunction)("heatmap_grid",{isCellLabelVisible:null!==(t=null===(r=e.valueAxes)||void 0===r?void 0:r[0].labels.show)&&void 0!==t&&t,isXAxisLabelVisible:!0,isYAxisLabelVisible:!0,isYAxisTitleVisible:!0,isXAxisTitleVisible:!0});return(0,u.buildExpression)([a])},h=async(e,t)=>{var r;const a=(0,p.getVisSchemas)(e,t);!0===e.params.percentageMode&&a.metric.forEach((t=>{var r;t.format={id:"percent",params:{pattern:null!==(r=e.params.percentageFormatPattern)&&void 0!==r?r:`0,0.[${"0".repeat(2)}]%`}}}));const s={showTooltip:e.params.addTooltip,highlightInHover:e.params.enableHover,lastRangeIsRightOpen:null!==(r=e.params.lastRangeIsRightOpen)&&void 0!==r&&r,percentageMode:e.params.percentageMode,legend:g(e.params),gridConfig:_(e.params)},i=(0,u.buildExpressionFunction)("heatmap",s);let n;if(a.metric.length&&i.addArgument("valueAccessor",m(a.metric[0])),a.segment&&a.segment.length&&i.addArgument("xAccessor",m(a.segment[0])),a.group&&a.group.length&&i.addArgument("yAccessor",m(a.group[0])),a.split_row&&a.split_row.length&&i.addArgument("splitRowAccessor",m(a.split_row[0])),a.split_column&&a.split_column.length&&i.addArgument("splitColumnAccessor",m(a.split_column[0])),e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length){var o;const t=(0,d.o)(e.params.colorsRange,e.params.colorSchema,e.params.invertColors);n=(0,u.buildExpressionFunction)("palette",{...t,range:"number",continuity:"none",rangeMin:e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length?e.params.colorsRange[0].from:void 0,rangeMax:e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length?e.params.colorsRange[(null===(o=e.params)||void 0===o?void 0:o.colorsRange.length)-1].to:void 0})}else{const t=(0,d.d)(e.params.colorsNumber,e.params.colorSchema,e.params.invertColors);n=(0,u.buildExpressionFunction)("palette",{...t,range:"percent",continuity:"none",rangeMin:0,rangeMax:100})}return i.addArgument("palette",(0,u.buildExpression)([n])),(0,u.buildExpression)([i]).toAst()};var b=r(185),v=r(286),f=r(791);const y=(0,v.lazy)((()=>r.e(145).then(r.bind(r,145)))),x=({showElasticChartsOptions:e,palettes:t})=>r=>(0,f.jsx)(y,(0,b.default)({},r,{palettes:t,showElasticChartsOptions:e})),T=e=>(({showElasticChartsOptions:e=!1,palettes:t})=>({name:"heatmap",title:i.i18n.translate("visTypeHeatmap.heatmap.heatmapTitle",{defaultMessage:"Heat map"}),icon:"heatmap",description:i.i18n.translate("visTypeHeatmap.heatmap.heatmapDescription",{defaultMessage:"Display values as colors in a matrix."}),fetchDatatable:!0,toExpressionAst:h,getSupportedTriggers:()=>[p.VIS_EVENT_TO_TRIGGER.filter],visConfig:{defaults:{type:"heatmap",addTooltip:!0,addLegend:!0,enableHover:!1,legendPosition:n.Position.Right,colorsNumber:4,colorSchema:l.ColorSchemas.GreenToRed,setColorRange:!1,colorsRange:[],invertColors:!1,percentageMode:!1,valueAxes:[{show:!1,id:"ValueAxis-1",type:c.Gw.Value,scale:{type:c.bF.Linear,defaultYExtents:!1},labels:{show:!1,rotate:0,overwriteColor:!1,color:"black"}}]}},editorConfig:{enableDataViewChange:!0,optionsTemplate:x({showElasticChartsOptions:e,palettes:t}),schemas:[{group:o.AggGroupNames.Metrics,name:"metric",title:i.i18n.translate("visTypeHeatmap.heatmap.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","median","sum","min","max","cardinality","std_dev","top_hits","!filtered_metric","!single_percentile","!single_percentile_rank"],defaults:[{schema:"metric",type:"count"}]},{group:o.AggGroupNames.Buckets,name:"segment",title:i.i18n.translate("visTypeHeatmap.heatmap.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"group",title:i.i18n.translate("visTypeHeatmap.heatmap.groupTitle",{defaultMessage:"Y-axis"}),min:0,max:1,aggFilter:["!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:o.AggGroupNames.Buckets,name:"split",title:i.i18n.translate("visTypeHeatmap.heatmap.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]}]},requiresSearch:!0,navigateToLens:async(e,t)=>{const{convertToLens:a}=await r.e(481).then(r.bind(r,481));return e?a(e,t):null},getExpressionVariables:async(e,t)=>{const{convertToLens:a}=await r.e(481).then(r.bind(r,481));return{canNavigateToLens:Boolean(null!=e&&e.params?await a(e,t):null)}}}))(e);var w=r(107);class VisTypeHeatmapPlugin{constructor(e){(0,a.default)(this,"initializerContext",void 0),this.initializerContext=e}setup(e,{visualizations:t,charts:r,usageCollection:a}){if(!e.uiSettings.get(s.LEGACY_HEATMAP_CHARTS_LIBRARY)){const{readOnly:e}=this.initializerContext.config.get();t.createBaseVisualization({...T({showElasticChartsOptions:!0,palettes:r.palettes}),disableCreate:Boolean(e),disableEdit:Boolean(e)})}return{}}start(e,{dataViews:t}){(0,w.L)(t)}}const E=e=>new VisTypeHeatmapPlugin(e)},107:(e,t,r)=>{"use strict";r.d(t,{L:()=>i,x:()=>s});var a=r(215);const[s,i]=(0,a.createGetterSetter)("dataViews")},566:(e,t,r)=>{"use strict";r.d(t,{Gw:()=>s,bF:()=>a});let a=function(e){return e.Linear="linear",e.Log="log",e.SquareRoot="square root",e}({}),s=function(e){return e.Category="category",e.Value="value",e}({})},322:(e,t,r)=>{"use strict";r.d(t,{d:()=>n,o:()=>o});var a=r(212);const s="rgba(0, 0, 0, 0)",i=(e,t,r,s=!1)=>{const i=s?1-e/t:e/t;return(0,a.getHeatmapColors)(i,r)},n=(e,t,r=!1,a=!1)=>{const n=[],o=[];if(!e)return{color:[]};a&&(n.push(s),o.push(0));const l=100/e;for(let a=0;a<e;a++)n.push(i(a,e,t,r)),o.push(l+a*l);return{color:null!=n?n:[],stop:null!=o?o:[]}},o=(e,t,r=!1)=>e.reduce(((e,a,n,o)=>(n&&a.from!==o[n-1].to&&(e.color.push(s),e.stop.push(a.from)),e.color.push(i(n,o.length,t,r)),e.stop.push(a.to),e)),{color:[],stop:[]})},169:(e,t,r)=>{r.p=window.__kbnPublicPath__.visTypeHeatmap},212:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},240:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},627:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},904:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},215:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},499:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/visDefaultEditor/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},587:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/visualizations/common/convert_to_lens");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},500:(e,t,r)=>{r.r(t);var a=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},185:(e,t,r)=>{e.exports=r(497)(51858)},915:(e,t,r)=>{e.exports=r(497)(67493)},59:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},8:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},472:e=>{"use strict";e.exports=__kbnSharedDeps__.Uuid},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},r={};function a(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>"visTypeHeatmap.chunk."+e+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},a.l=(t,r,s,i)=>{if(e[t])e[t].push(r);else{var n,o;if(void 0!==s)for(var l=document.getElementsByTagName("script"),p=0;p<l.length;p++){var c=l[p];if(c.getAttribute("src")==t){n=c;break}}n||(o=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.src=t),e[t]=[r];var u=(r,a)=>{n.onerror=n.onload=null,clearTimeout(d);var s=e[t];if(delete e[t],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((e=>e(a))),r)return r(a)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),o&&document.head.appendChild(n)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={589:0};a.f.j=(t,r)=>{var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise(((r,a)=>s=e[t]=[r,a]));r.push(s[2]=i);var n=a.p+a.u(t),o=new Error;a.l(n,(r=>{if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",o.name="ChunkLoadError",o.type=i,o.request=n,s[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,i,[n,o,l]=r,p=0;if(n.some((t=>0!==e[t]))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);l&&l(a)}for(t&&t(r);p<n.length;p++)i=n[p],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.visTypeHeatmap_bundle_jsonpfunction=self.visTypeHeatmap_bundle_jsonpfunction||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),a(169),__kbnBundles__.define("plugin/visTypeHeatmap/public",a,508),__kbnBundles__.define("plugin/visTypeHeatmap/common",a,435)})();