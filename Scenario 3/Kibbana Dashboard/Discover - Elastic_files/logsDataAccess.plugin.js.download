/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e={367:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LogSourcesProvider:()=>d,LogSourcesSettingSynchronisationInfo:()=>h,plugin:()=>v,useLogSourcesContext:()=>p});const n="observability:logSources",s=e=>e.map((e=>e.indexPattern)).join(",");function o(e){const{uiSettings:t}=e.deps,r=async()=>t.get(n).map((e=>({indexPattern:e})));return{getLogSources:r,getFlattenedLogSources:async()=>{const e=await r();return s(e)},setLogSources:async e=>{await t.set(n,e.map((e=>e.indexPattern)))}}}class LogsDataAccessPlugin{setup(){}start(e,t){return{services:{logSourcesService:o({deps:{uiSettings:e.uiSettings}})}}}stop(){}}var i=r(286),a=r.n(i);r(721);var c={};var u=r(915),l=r(812);class CanceledPromiseError extends Error{constructor(e){super(e),(0,u.default)(this,"isCanceled",!0),Object.setPrototypeOf(this,new.target.prototype)}}class SilentCanceledPromiseError extends CanceledPromiseError{}const g=()=>{},[d,p]=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s=[],o=[],a=function(e){var t=(0,i.createContext)(c);s.push(t),o.push(function(e){return function(){return(0,i.useContext)(e)}}(t))};r.length?r.forEach((function(e){return a(e.name)})):a(e.name);return[function(t){for(var n=t.children,o=function(e,t){if(null==e)return{};var r,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(t,["children"]),a=e(o),c=n,u=0;u<s.length;u+=1){var l=s[u],g=r[u]||function(e){return e};c=(0,i.createElement)(l.Provider,{value:g(a)},c)}return c}].concat(o)}((({logSourcesService:e})=>{const[t,r]=(0,i.useState)([]),[n,o]=(0,i.useState)(void 0),[a,c]=(({createPromise:e,onResolve:t=g,onReject:r=g,cancelPreviousOn:n="never",triggerOrThrow:s="whenMounted"},o)=>{const a=(0,l.A)(),c=(0,i.useCallback)((()=>{switch(s){case"always":return!0;case"whenMounted":return a()}}),[a,s]),u=(0,i.useRef)([]),[d,p]=(0,i.useState)({state:"uninitialized"}),f=(0,i.useCallback)((()=>{p({state:"uninitialized"})}),[]),S=(0,i.useMemo)((()=>(...s)=>{let o;const i=new Promise(((e,t)=>{o=t})),a=u.current,l=()=>{a.forEach((e=>e.cancel()))},d=e(...s),f=Promise.race([d,i]);p({state:"pending",promise:f}),"creation"===n&&l();const S={cancel:()=>{o(new CanceledPromiseError)},cancelSilently:()=>{o(new SilentCanceledPromiseError)},promise:f.then((e=>(["settlement","resolution"].includes(n)&&l(),u.current=u.current.filter((e=>e.promise!==S.promise)),t&&c()&&t(e),p((t=>"pending"===t.state&&t.promise===f?{state:"resolved",promise:S.promise,value:e}:t)),e)),(e=>{if(!(e instanceof SilentCanceledPromiseError)){if(["settlement","rejection"].includes(n)&&l(),u.current=u.current.filter((e=>e.promise!==S.promise)),c()){if(!r)throw e;r(e)}p((t=>"pending"===t.state&&t.promise===f?{state:"rejected",promise:f,value:e}:t))}}))};return u.current=[...u.current,S],S.promise.catch(g),S.promise}),o);return(0,i.useEffect)((()=>()=>{u.current.forEach((e=>e.cancelSilently()))}),[]),[d,S,f]})({cancelPreviousOn:"resolution",createPromise:async()=>await e.getLogSources(),onResolve:e=>{r(e),o(void 0)},onReject:e=>{o(e)}},[]);(0,i.useEffect)((()=>{c()}),[c]);const u=(0,i.useMemo)((()=>s(t)),[t]);return{isUninitialized:"uninitialized"===a.state,isLoadingLogSources:"pending"===a.state,hasFailedLoadingLogSources:void 0!==n,logSourcesError:n,logSources:t,combinedIndices:u}})),f=__kbnSharedDeps__.ElasticEui,S=__kbnSharedDeps__.KbnI18nReact,m=__kbnSharedDeps__.EmotionReact,h=({isLoading:e,logSourcesValue:t,getUrlForApp:r,title:n})=>{const s=(0,i.useMemo)((()=>r("management",{path:`/kibana/settings?query=${encodeURIComponent("Log sources")}`})),[r]);return(0,m.jsx)(a().Fragment,null,(0,m.jsx)(f.EuiDescribedFormGroup,{fullWidth:!0,title:(0,m.jsx)("h4",null,null!=n?n:(0,m.jsx)(S.FormattedMessage,{id:"xpack.logsDataAccess.logSourcesSettingInfo.logSourcesSettingTitle",defaultMessage:"Log sources"})),description:(0,m.jsx)(S.FormattedMessage,{id:"xpack.logsDataAccess.logSourcesSettingInfo.logSourcesSettingDescription",defaultMessage:"This value is synchronised with the Kibana log sources advanced setting. It can be changed via the {advancedSettingsLink}.",values:{advancedSettingsLink:(0,m.jsx)(f.EuiLink,{"data-test-subj":"xpack.infra.logSourcesSettingInfo.logSourcesSettingLink",href:s},(0,m.jsx)(S.FormattedMessage,{id:"xpack.logsDataAccess.logSourcesSettingInfo.logSourcesSettingLinkText",defaultMessage:"advanced settings page"}))}})},(0,m.jsx)(f.EuiFormRow,{fullWidth:!0,label:(0,m.jsx)(S.FormattedMessage,{id:"xpack.logsDataAccess.logSourcesSettingInfo.logSourcesSettingLabel",defaultMessage:"Log sources advanced setting"})},(0,m.jsx)(f.EuiFieldText,{"data-test-subj":"logSourcesSettingInput",fullWidth:!0,disabled:!0,isLoading:e,value:t,isInvalid:!1}))))},v=()=>new LogsDataAccessPlugin},812:(e,t,r)=>{"use strict";var n=r(286);t.A=function(){var e=n.useRef(!1),t=n.useCallback((function(){return e.current}),[]);return n.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},106:(e,t,r)=>{r.p=window.__kbnPublicPath__.logsDataAccess},721:(e,t,r)=>{e.exports=r(497)(4971)},915:(e,t,r)=>{e.exports=r(497)(67493)},286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r(106),__kbnBundles__.define("plugin/logsDataAccess/public",r,367)})();