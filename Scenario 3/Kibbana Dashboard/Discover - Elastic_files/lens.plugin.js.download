/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t,i,a={70598:(e,t,i)=>{"use strict";i.d(t,{g6:()=>n,HK:()=>r,yk:()=>a,oV:()=>o}),i(80190),i(4513),i(17961);const a=e=>null!==e&&"object"==typeof e&&"trackContentfulRender"in e,n=e=>Boolean((e=>"function"==typeof(null==e?void 0:e.addNewPanel))(e)&&"function"==typeof(null==e?void 0:e.removePanel)&&"function"==typeof(null==e?void 0:e.replacePanel)&&"function"==typeof(null==e?void 0:e.addNewPanel)&&s(e)),s=e=>Boolean(null==e?void 0:e.children$),r=e=>Boolean(e&&"object"==typeof(null==e?void 0:e.settings)),o=e=>Boolean(e&&e.openOverlay&&e.clearOverlays)},17961:(e,t,i)=>{"use strict";i.d(t,{J$:()=>T,I6:()=>O,g1:()=>D,XY:()=>c,mL:()=>P,cm:()=>I,HQ:()=>h,Qr:()=>x,cH:()=>f,i0:()=>u,B_:()=>A,PJ:()=>p,P4:()=>n,jg:()=>S,Sd:()=>C,fr:()=>r,yW:()=>m,KS:()=>l});var a=i(80190);const n=()=>[new a.BehaviorSubject(null),()=>{},()=>!0];var s=i(84286);const r=(...e)=>{const[t,i]=(0,s.useState)((()=>o(e))),n=(0,s.useMemo)((()=>(0,a.combineLatest)(e).pipe((0,a.skip)(1),(0,a.debounceTime)(0)).subscribe((e=>{i(e)}))),[]);return(0,s.useEffect)((()=>()=>n.unsubscribe()),[n]),t},o=e=>e.map((e=>{var t,i;return null!==(t=null==e||null===(i=e.getValue)||void 0===i?void 0:i.call(e))&&void 0!==t?t:void 0})),l=e=>{const t=(0,s.useRef)(!0),[i,n]=(0,s.useState)(null==e?void 0:e.getValue());return(0,s.useEffect)((()=>{if(t.current?t.current=!1:n(null==e?void 0:e.getValue()),!e)return;const i=e.pipe((0,a.skip)(1)).subscribe((e=>n(e)));return()=>i.unsubscribe()}),[e]),i},c=e=>Boolean(e&&void 0!==(null==e?void 0:e.parentApi)),u=e=>Boolean(e&&void 0!==(null==e?void 0:e.viewMode$)),p=e=>u(e)?e.viewMode$.getValue():c(e)&&u(e.parentApi)?e.parentApi.viewMode$.getValue():void 0;var d=i(55964),g=i(4513),b=i.n(g);const h=e=>Boolean(e&&void 0!==(null==e?void 0:e.timeslice$)),_=e=>Boolean(e&&void 0!==(null==e?void 0:e.timeRange$)),f=e=>Boolean(e&&_(e)&&(e=>Boolean(e&&void 0!==(null==e?void 0:e.filters$)))(e)&&void 0!==(null==e?void 0:e.query$));function m({filters:e,query:t,timeRange:i}){const n=(0,s.useMemo)((()=>({filters$:new a.BehaviorSubject(e),query$:new a.BehaviorSubject(t),timeRange$:new a.BehaviorSubject(i)})),[]);return(0,s.useEffect)((()=>{(0,d.onlyDisabledFiltersChanged)(n.filters$.getValue(),e,{...d.COMPARE_ALL_OPTIONS,state:!1})||n.filters$.next(e)}),[e,n.filters$]),(0,s.useEffect)((()=>{b()(n.query$.getValue(),t)||n.query$.next(t)}),[t,n.query$]),(0,s.useEffect)((()=>{b()(n.timeRange$.getValue(),i)||n.timeRange$.next(i)}),[i,n.timeRange$]),n}var v=i(81018);const y=e=>Boolean(e&&void 0!==(null==e?void 0:e.reload$));function E(e,t){var i,a,n,s,r,o,l,c,u,p,d,g,b;const h=e;return{isReload:t,filters:null==h||null===(i=h.parentApi)||void 0===i||null===(a=i.filters$)||void 0===a?void 0:a.value,query:null==h||null===(n=h.parentApi)||void 0===n||null===(s=n.query$)||void 0===s?void 0:s.value,searchSessionId:null==h||null===(r=h.parentApi)||void 0===r||null===(o=r.searchSessionId$)||void 0===o?void 0:o.value,timeRange:null!==(l=null==h||null===(c=h.timeRange$)||void 0===c?void 0:c.value)&&void 0!==l?l:null==h||null===(u=h.parentApi)||void 0===u||null===(p=u.timeRange$)||void 0===p?void 0:p.value,timeslice:null!=h&&null!==(d=h.timeRange$)&&void 0!==d&&d.value||null==h||null===(g=h.parentApi)||void 0===g||null===(b=g.timeslice$)||void 0===b?void 0:b.value}}function w(e){return!(!c(e)||!(0,v.w)(e.parentApi))&&"string"==typeof e.parentApi.searchSessionId$.value}function A(e){const t=function(e){const t=[];if(_(e)&&t.push(e.timeRange$.pipe((0,a.skip)(1))),c(e)&&f(e.parentApi)&&t.push((0,a.combineLatest)([e.parentApi.filters$,e.parentApi.query$]).pipe((0,a.skip)(1),(0,a.filter)((()=>!w(e))))),c(e)&&_(e.parentApi)){const i=[e.parentApi.timeRange$];e.parentApi.timeslice$&&i.push(e.parentApi.timeslice$),t.push((0,a.combineLatest)(i).pipe((0,a.skip)(1),(0,a.filter)((()=>!w(e)&&!function(e){return!!_(e)&&"object"==typeof e.timeRange$.value}(e)))))}return t}(e),i=function(e){const t=[];return c(e)&&(0,v.w)(e.parentApi)&&t.push(e.parentApi.searchSessionId$.pipe((0,a.skip)(1))),c(e)&&y(e.parentApi)&&t.push(e.parentApi.reload$.pipe((0,a.filter)((()=>!w(e))))),t}(e);if(0===i.length)return(0,a.merge)(...t).pipe((0,a.startWith)(E(e,!1)),(0,a.debounceTime)(0),(0,a.map)((()=>E(e,!1))));const n=new a.Subject,s=(0,a.merge)(...t).pipe((0,a.switchMap)((t=>(0,a.of)(t).pipe((0,a.delay)(0),(0,a.takeUntil)(n),(0,a.map)((()=>E(e,!1))))))),r=(0,a.merge)(...i).pipe((0,a.tap)((()=>n.next())),(0,a.map)((()=>E(e,!0))));return(0,a.merge)(r,s).pipe((0,a.startWith)(E(e,!1)))}const S=e=>{const t=new a.BehaviorSubject(e.timeRange);function i(e){t.next(e)}return{serialize:()=>({timeRange:t.value}),comparators:{timeRange:[t,i,b()]},api:{timeRange$:t,setTimeRange:i}}},T=e=>void 0!==e.getAppContext&&"function"==typeof e.getAppContext,O=e=>Boolean(e&&"boolean"==typeof e.disableTriggers),D=e=>Boolean(e&&"object"==typeof e&&Object.hasOwn(e,"executionContext")),P=(e,t)=>Boolean(e&&e.type)&&e.type===t,I=e=>Boolean(e&&void 0!==(null==e?void 0:e.disabledActionIds$)&&"function"==typeof(null==e?void 0:e.setDisabledActionIds)),x=e=>Boolean(e&&void 0!==(null==e?void 0:e.title$)&&void 0!==(null==e?void 0:e.hideTitle$)),C=e=>{const t=new a.BehaviorSubject(e.title),i=new a.BehaviorSubject(e.description),n=new a.BehaviorSubject(e.hidePanelTitles),s=e=>{e!==t.value&&t.next(e)},r=e=>{e!==n.value&&n.next(e)},o=e=>{e!==i.value&&i.next(e)};return{api:{title$:t,hideTitle$:n,setTitle:s,setHideTitle:r,description$:i,setDescription:o},comparators:{title:[t,s],description:[i,o],hidePanelTitles:[n,r,(e,t)=>Boolean(e)===Boolean(t)]},serialize:()=>({title:t.value,hidePanelTitles:n.value,description:i.value})}}},81018:(e,t,i)=>{"use strict";i.d(t,{w:()=>a});const a=e=>Boolean(e&&void 0!==(null==e?void 0:e.searchSessionId$))},22787:(e,t,i)=>{"use strict";i.r(t),i.d(t,{APP_ID:()=>r,BASE_API_URL:()=>p,COLOR_MAPPING_OFF_BY_DEFAULT:()=>T,CategoryDisplay:()=>f,DOCUMENT_FIELD_NAME:()=>y,DOC_TYPE:()=>o,INDEX_PATTERN_TYPE:()=>h,LENS_APP_NAME:()=>l,LENS_EDIT_BY_VALUE:()=>d,LENS_EMBEDDABLE_TYPE:()=>c,LENS_ICON:()=>g,LegendDisplay:()=>v,NOT_INTERNATIONALIZED_PRODUCT_NAME:()=>u,NumberDisplay:()=>m,PLUGIN_ID:()=>s,PieChartTypes:()=>_,STAGE_ID:()=>b,getBasePath:()=>E,getEditPath:()=>A,getFullPath:()=>S});var a=i(45995),n=i.n(a);const s="lens",r=s,o="lens",l=s,c=o,u="Lens Visualizations",p="/api/lens",d="edit_by_value",g="lensApp",b="production",h="index-pattern",_={PIE:"pie",DONUT:"donut",TREEMAP:"treemap",MOSAIC:"mosaic",WAFFLE:"waffle"},f={DEFAULT:"default",INSIDE:"inside",HIDE:"hide"},m={HIDDEN:"hidden",PERCENT:"percent",VALUE:"value"},v={DEFAULT:"default",SHOW:"show",HIDE:"hide"},y="___records___";function E(){return"#/"}const w="_g";function A(e,t,i,a){const s={};t&&(s.time=t),i&&(s.filters=i),a&&(s.refreshInterval=a);const r=Object.keys(s).length?`?${w}=${n().encode(s)}`:"";return e?`#/edit/${encodeURIComponent(e)}${r}`:`#/${d}${r}`}function S(e){return`/app/${s}${e?A(e):"#/"}`}const T=!1},22601:(e,t,i)=>{"use strict";i.d(t,{v:()=>a});const a={DATA:"data",REFERENCELINE:"referenceLine",ANNOTATIONS:"annotations",METRIC_TRENDLINE:"metricTrendline"}},4077:(e,t,i)=>{"use strict";i.d(t,{Uk:()=>o,ZZ:()=>LensAppLocatorDefinition,w5:()=>r});var a=i(68915),n=i(45995),s=i.n(n);const r="LENS_APP_LOCATOR",o="LENS_SHARE_STATE_ACTION";class LensAppLocatorDefinition{constructor(){(0,a.default)(this,"id",r),(0,a.default)(this,"getLocation",(async e=>{const{filters:t,query:a,savedObjectId:n,resolvedDateRange:r,searchSessionId:l}=e,c=function(e){if(e.savedObjectId)return{};if(!(e.activeDatasourceId&&e.datasourceStates&&e.visualization&&e.references))return{};const t={activeDatasourceId:e.activeDatasourceId,visualization:e.visualization,datasourceStates:Object.fromEntries(Object.entries(e.datasourceStates).map((([e,{state:t}])=>[e,t]))),references:e.references};return e.dataViewSpecs&&(t.dataViewSpecs=e.dataViewSpecs),t}(e),u={},{isFilterPinned:p}=await Promise.resolve().then(i.t.bind(i,55964,23));a&&(c.query=a),r&&(c.resolvedDateRange=r,u.time={from:r.fromDate,to:r.toDate}),null!=t&&t.length&&(c.filters=t,u.filters=null==t?void 0:t.filter((e=>!p(e))));const d=n?`/edit/${encodeURIComponent(n)}`:"",g=`${window.location.origin}${window.location.pathname}`,b=new URL(g);return b.hash=d,b.searchParams.append("_g",s().encodeUnknown(u)||""),l&&(c.searchSessionId=l),{app:"lens",path:b.href.replace(g,""),state:{type:o,payload:c}}}))}}},59140:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LENS_EMBEDDABLE_TYPE:()=>c.LENS_EMBEDDABLE_TYPE,isLensApi:()=>te.$C,layerTypes:()=>ie.v,plugin:()=>ae});var a=i(68915),n=i(61215),s=i(67546),r=i(22500),o=i(84839),l=i(75008),c=i(22787),u=i(25208);const p="ACTION_OPEN_IN_DISCOVER",d=async()=>await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));var g=i(70598);const b="ACTION_CREATE_ESQL_CHART",h=async()=>await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));class CreateESQLPanelAction{constructor(e,t,i){(0,a.default)(this,"type",b),(0,a.default)(this,"id",b),(0,a.default)(this,"order",50),(0,a.default)(this,"grouping",[s.ADD_PANEL_VISUALIZATION_GROUP]),this.startDependencies=e,this.core=t,this.getEditorFrameService=i}getDisplayName(){return l.i18n.translate("xpack.lens.app.createVisualizationLabel",{defaultMessage:"ES|QL"})}getIconType(){return"esqlVis"}async isCompatible({embeddable:e}){if(!(0,g.g6)(e))return!1;const{isCreateActionCompatible:t}=await h();return t(this.core)}async execute({embeddable:e}){if(!(0,g.g6)(e))throw new o.IncompatibleActionError;const{executeCreateAction:t}=await h(),i=await this.getEditorFrameService();t({deps:this.startDependencies,core:this.core,api:e,editorFrameService:i})}}const _="IN_APP_EMBEDDABLE_EDIT_TRIGGER",f={id:_,title:l.i18n.translate("xpack.lens.inAppEditTrigger.title",{defaultMessage:"In-app embeddable edit"}),description:l.i18n.translate("xpack.lens.inAppEditTrigger.description",{defaultMessage:"Triggers an in app flyout on the current embeddable"})},m="ACTION_EDIT_LENS_EMBEDDABLE";class EditLensEmbeddableAction{constructor(e,t){(0,a.default)(this,"type",m),(0,a.default)(this,"id",m),(0,a.default)(this,"order",50),this.startDependencies=e,this.core=t}getDisplayName(){return l.i18n.translate("xpack.lens.app.editLensEmbeddableLabel",{defaultMessage:"Edit visualization"})}getIconType(){return"pencil"}async isCompatible({attributes:e}){const{isEmbeddableEditActionCompatible:t}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));return t(this.core,e)}async execute({attributes:e,lensEvent:t,container:a,onUpdate:n,onApply:s,onCancel:r}){const{executeEditEmbeddableAction:o}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));e&&o({deps:this.startDependencies,core:this.core,attributes:e,lensEvent:t,container:a,onUpdate:n,onApply:s,onCancel:r})}}var v=i(3185),y=i(84286),E=i.n(y),w=i(81319),A=i(96791);const S=E().lazy((()=>Promise.all([i.e(595),i.e(41),i.e(691)]).then(i.bind(i,55691))));function T(){return(0,A.jsx)(w.EuiOverlayMask,null,(0,A.jsx)(w.EuiLoadingSpinner,null))}const O=e=>(0,A.jsx)(y.Suspense,{fallback:(0,A.jsx)(T,null)},(0,A.jsx)(S,e));function D(e,t){return a=>{const[n,s]=(0,y.useState)();return(0,y.useEffect)((()=>{!async function(){const{getLensServices:a,getLensAttributeService:n}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370)),r=await a(e,t,n(e,t));s(r)}()}),[]),n?(0,A.jsx)(w.EuiOverlayMask,null,(0,A.jsx)(O,(0,v.default)({},a,{lensServices:n}))):(0,A.jsx)(T,null)}}const P="lens_datatable_column",I={name:P,aliases:[],type:P,help:"",inputTypes:["null"],args:{columnId:{types:["string"],help:""},alignment:{types:["string"],help:""},sortingHint:{types:["string"],help:""},hidden:{types:["boolean"],help:""},oneClickFilter:{types:["boolean"],help:""},width:{types:["number"],help:""},isTransposed:{types:["boolean"],help:""},transposable:{types:["boolean"],help:""},colorMode:{types:["string"],help:""},palette:{types:["palette"],help:""},colorMapping:{types:["string"],help:""},summaryRow:{types:["string"],help:""},summaryLabel:{types:["string"],help:""}},fn:function(e,t){return{type:P,...t}}},x={name:"lens_map_to_columns",type:"datatable",help:l.i18n.translate("xpack.lens.functions.mapToColumns.help",{defaultMessage:"A helper to transform a datatable to match Lens column definitions"}),args:{idMap:{types:["string"],help:l.i18n.translate("xpack.lens.functions.mapToColumns.idMap.help",{defaultMessage:"A JSON encoded object in which keys are the datatable column ids and values are the Lens column definitions. Any datatable columns not mentioned within the ID map will be kept unmapped."})},isTextBased:{types:["boolean"],help:l.i18n.translate("xpack.lens.functions.mapToColumns.isESQL.help",{defaultMessage:"An optional flag to indicate if this is about the text based datasource."})}},inputTypes:["datatable"],async fn(...e){var t;const{mapToOriginalColumns:a}=await i.e(86).then(i.bind(i,66086)),{mapToOriginalColumnsTextBased:n}=await i.e(363).then(i.bind(i,77363));return null!=e&&null!==(t=e[1])&&void 0!==t&&t.isTextBased?n(...e):a(...e)}},C={name:"lens_format_column",type:"datatable",help:"",args:{format:{types:["string"],help:"",required:!0},columnId:{types:["string"],help:"",required:!0},decimals:{types:["number"],help:""},suffix:{types:["string"],help:""},parentFormat:{types:["string"],help:""},compact:{types:["boolean"],help:""},pattern:{types:["string"],help:""},fromUnit:{types:["string"],help:""},toUnit:{types:["string"],help:""}},inputTypes:["datatable"],async fn(...e){const{formatColumnFn:t}=await i.e(408).then(i.bind(i,88408));return t(...e)}},L={name:"lens_counter_rate",type:"datatable",inputTypes:["datatable"],help:l.i18n.translate("xpack.lens.functions.counterRate.help",{defaultMessage:"Calculates the counter rate of a column in a data table"}),args:{by:{help:l.i18n.translate("xpack.lens.functions.counterRate.args.byHelpText",{defaultMessage:"Column to split the counter rate calculation by"}),multi:!0,types:["string"],required:!1},inputColumnId:{help:l.i18n.translate("xpack.lens.functions.counterRate.args.inputColumnIdHelpText",{defaultMessage:"Column to calculate the counter rate of"}),types:["string"],required:!0},outputColumnId:{help:l.i18n.translate("xpack.lens.functions.counterRate.args.outputColumnIdHelpText",{defaultMessage:"Column to store the resulting counter rate in"}),types:["string"],required:!0},outputColumnName:{help:l.i18n.translate("xpack.lens.functions.counterRate.args.outputColumnNameHelpText",{defaultMessage:"Name of the column to store the resulting counter rate in"}),types:["string"],required:!1}},async fn(...e){const{counterRateFn:t}=await i.e(152).then(i.bind(i,57152));return t(...e)}},N=(...e)=>({name:"lens_time_scale",type:"datatable",help:"",args:{dateColumnId:{types:["string"],help:""},inputColumnId:{types:["string"],help:"",required:!0},outputColumnId:{types:["string"],help:"",required:!0},outputColumnName:{types:["string"],help:""},targetUnit:{types:["string"],options:["s","m","h","d"],help:"",required:!0},reducedTimeRange:{types:["string"],help:""}},inputTypes:["datatable"],async fn(...t){const{timeScaleFn:a}=await i.e(918).then(i.bind(i,9918));return a(...e)(...t)}}),j={name:"lens_collapse",type:"datatable",inputTypes:["datatable"],help:l.i18n.translate("xpack.lens.functions.collapse.help",{defaultMessage:"Collapses multiple rows into a single row using the specified aggregate function."}),args:{by:{help:l.i18n.translate("xpack.lens.functions.collapse.args.byHelpText",{defaultMessage:"Columns to group by - these columns are kept as-is"}),multi:!0,types:["string"],required:!1},metric:{help:l.i18n.translate("xpack.lens.functions.collapse.args.metricHelpText",{defaultMessage:"Column to calculate the specified aggregate function of"}),types:["string"],multi:!0,required:!1},fn:{help:l.i18n.translate("xpack.lens.functions.collapse.args.fnHelpText",{defaultMessage:"The aggregate function to apply"}),types:["string"],multi:!0,required:!0}},async fn(...e){const{collapseFn:t}=await i.e(972).then(i.bind(i,19972));return t(...e)}};var k=i(7195),B=i(51783),V=i.n(B);const R=(e,t)=>{if(!e)return 0;const i=(0,k.getAbsoluteTimeRange)(e,null!=t?{forceNow:new Date(t)}:{});return e?V()(i.to).diff(V()(i.from)):0},M={name:"formula_time_range",help:l.i18n.translate("xpack.lens.formula.timeRange.help",{defaultMessage:"The specified time range, in milliseconds (ms)."}),args:{},fn(e,t,{getSearchContext:i}){const{timeRange:a,now:n}=i();return R(a,n)}},z={name:"formula_interval",help:l.i18n.translate("xpack.lens.formula.interval.help",{defaultMessage:"The specified minimum interval for the date histogram, in milliseconds (ms)."}),args:{targetBars:{types:["number"],help:l.i18n.translate("xpack.lens.formula.interval.targetBars.help",{defaultMessage:"The target number of bars for the date histogram."})}},fn(e,t,{getSearchContext:i}){const{timeRange:a,now:n}=i();return a&&t.targetBars?(0,k.calcAutoIntervalNear)(t.targetBars,R(a,n)).asMilliseconds():0}},F={name:"formula_now",help:l.i18n.translate("xpack.lens.formula.now.help",{defaultMessage:"The current now moment used in Kibana expressed in milliseconds (ms)."}),args:{},fn(e,t,{getSearchContext:i}){var a;return null!==(a=i().now)&&void 0!==a?a:Date.now()}};var $=i(80190),U=i(64390),q=i(14627),G=i(17961);const H=async()=>await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));class OpenInDiscoverDrilldown{constructor(e){(0,a.default)(this,"id","OPEN_IN_DISCOVER_DRILLDOWN"),(0,a.default)(this,"order",8),(0,a.default)(this,"getDisplayName",(()=>l.i18n.translate("xpack.lens.app.exploreDataInDiscoverDrilldown",{defaultMessage:"Open in Discover"}))),(0,a.default)(this,"euiIcon","discoverApp"),(0,a.default)(this,"ReactCollectConfig",(({config:e,onConfig:t})=>(0,A.jsx)(w.EuiFormRow,{hasChildLabel:!1},(0,A.jsx)(w.EuiSwitch,{id:"openInNewTab",name:"openInNewTab",label:l.i18n.translate("xpack.lens.app.exploreDataInDiscoverDrilldown.newTabConfig",{defaultMessage:"Open in new tab"}),checked:e.openInNewTab,onChange:()=>t({...e,openInNewTab:!e.openInNewTab}),"data-test-subj":"openInDiscoverDrilldownOpenInNewTab"})))),(0,a.default)(this,"CollectConfig",this.ReactCollectConfig),(0,a.default)(this,"createConfig",(()=>({openInNewTab:!0}))),(0,a.default)(this,"isConfigValid",(e=>!0)),(0,a.default)(this,"isCompatible",(async(e,t)=>{const{isCompatible:i}=await H();return i({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable,...e})})),(0,a.default)(this,"isConfigurable",(e=>this.deps.hasDiscoverAccess()&&(0,G.mL)(e.embeddable,c.DOC_TYPE))),(0,a.default)(this,"getHref",(async(e,t)=>{const{getHref:i}=await H();return i({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable})})),(0,a.default)(this,"execute",(async(e,t)=>{if(e.openInNewTab)window.open(await this.getHref(e,t),"_blank");else{const{getLocation:e}=await H(),{app:i,path:a,state:n}=await e({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable});await this.deps.application().navigateToApp(i,{path:a,state:n})}})),this.deps=e}supportedTriggers(){return[q.APPLY_FILTER_TRIGGER]}}var Y=i(4077),K=i(27888),Z=i(75879);function W(e){const t=[];return e.some((e=>(0,k.tableHasFormulas)(e.columns,e.rows)))&&t.push({title:l.i18n.translate("xpack.lens.app.downloadButtonFormulasWarningTitle",{defaultMessage:"Formulas detected"}),message:l.i18n.translate("xpack.lens.app.downloadButtonFormulasWarningMessage",{defaultMessage:"Your CSV contains characters that spreadsheet applications might interpret as formulas."})}),t}const Q=(e,t,i)=>a=>(0,o.createAction)({type:r.ACTION_CONVERT_TO_LENS,id:e,getDisplayName:()=>t,isCompatible:async()=>!!a.capabilities.visualize_v2.show,execute:async e=>{const t=Object.values(e.layers),n={...e,layers:t,isVisualizeAction:!0};a.navigateToApp(c.APP_ID,{state:{type:r.ACTION_CONVERT_TO_LENS,payload:n,originatingApp:i}})}});var X=i(42770);function J(e){const t=(0,y.useMemo)((()=>new $.BehaviorSubject(e)),[]);return(0,y.useEffect)((()=>{t.next(e)}),[t,e]),t}function ee({title:e,withDefaultActions:t,extraActions:i,showInspector:a,syncColors:n,syncCursor:r,syncTooltips:o,viewMode:l,id:u,query:p,filters:d,timeRange:g,disabledActions:b,searchSessionId:h,forceDSL:_,hidePanelTitles:f,lastReloadRequestTime:m,...v}){const E=(0,y.useMemo)((()=>({syncColors$:new $.BehaviorSubject(!1),syncCursor$:new $.BehaviorSubject(!1),syncTooltips$:new $.BehaviorSubject(!1)})),[]),w=J(b),S=J(l),T=J(h),O=J(f),[D,P]=(0,y.useState)(void 0),I=(0,y.useRef)(v.attributes?{attributes:v.attributes}:(0,X.pT)(null,e)),x=(0,G.yW)({query:p,filters:d,timeRange:g}),C=Boolean(t)||((null==i?void 0:i.length)||0)>0,L=(0,y.useMemo)((()=>new $.BehaviorSubject(void 0)),[]);(0,y.useEffect)((()=>{L.next()}),[L,m]),(0,y.useEffect)((()=>{D&&(D.updateAttributes({..."attributes"in I.current?I.current.attributes:I.current,...v.attributes}),D.updateOverrides(v.overrides))}),[D,v.attributes,v.overrides]),(0,y.useEffect)((()=>{null!=n&&E.syncColors$.getValue()!==n&&E.syncColors$.next(n),null!=r&&E.syncCursor$.getValue()!==r&&E.syncCursor$.next(r),null!=o&&E.syncTooltips$.getValue()!==o&&E.syncTooltips$.next(o)}),[E,n,r,o]);const N=(0,y.useMemo)((()=>({hideInspector:!a,showNotifications:!1,showShadow:!1,showBadges:!1,getActions:async(e,a)=>{const n=t?await(null==D?void 0:D.getTriggerCompatibleActions(e,a)):[];return(null!=i?i:[]).concat(n||[])}})),[a,t,i,D]);return(0,A.jsx)(s.ReactEmbeddableRenderer,{type:c.LENS_EMBEDDABLE_TYPE,maybeId:u,getParentApi:()=>({...v,...x,searchSessionId$:T,disabledActionIds$:w,setDisabledActionIds:e=>w.next(e),viewMode$:S,settings:E,getSerializedStateForChild:()=>({rawState:I.current,references:[]}),getRuntimeStateForChild:()=>({...I.current,attributes:v.attributes}),forceDSL:_,hideTitle$:O,reload$:L}),onApiAvailable:P,hidePanelChrome:!C,panelProps:N})}class LensPlugin{constructor(){(0,a.default)(this,"datatableVisualization",void 0),(0,a.default)(this,"editorFrameService",void 0),(0,a.default)(this,"editorFrameSetup",void 0),(0,a.default)(this,"queuedVisualizations",[]),(0,a.default)(this,"FormBasedDatasource",void 0),(0,a.default)(this,"TextBasedDatasource",void 0),(0,a.default)(this,"xyVisualization",void 0),(0,a.default)(this,"legacyMetricVisualization",void 0),(0,a.default)(this,"metricVisualization",void 0),(0,a.default)(this,"pieVisualization",void 0),(0,a.default)(this,"heatmapVisualization",void 0),(0,a.default)(this,"gaugeVisualization",void 0),(0,a.default)(this,"tagcloudVisualization",void 0),(0,a.default)(this,"topNavMenuEntries",[]),(0,a.default)(this,"hasDiscoverAccess",!1),(0,a.default)(this,"dataViewsService",void 0),(0,a.default)(this,"locator",void 0),(0,a.default)(this,"initEditorFrameService",(async()=>({datasourceMap:{},visualizationMap:{}})))}setup(e,{urlForwarding:t,expressions:a,data:s,fieldFormats:r,embeddable:o,visualizations:p,charts:d,globalSearch:g,usageCollection:b,uiActionsEnhanced:h,share:_,contentManagement:f}){const m=(0,n.createStartServicesGetter)(e.getStartServices),v=async()=>{const{setUsageCollectionStart:t,initMemoizedErrorNotification:a}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370)),{core:r,plugins:o}=m(),{visualizationMap:l,datasourceMap:c}=await this.initEditorFrameService(),[{getLensAttributeService:u},p]=await Promise.all([Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370)),o.eventAnnotation.getService()]);return o.usageCollection&&t(o.usageCollection),a(r),{...o,attributeService:u(r,o),capabilities:r.application.capabilities,coreHttp:r.http,coreStart:r,timefilter:o.data.query.timefilter.timefilter,expressionRenderer:o.expressions.ReactExpressionRenderer,documentToExpression:(t,i)=>this.editorFrameService.documentToExpression(t,{dataViews:o.dataViews,storage:new n.Storage(localStorage),uiSettings:e.uiSettings,timefilter:o.data.query.timefilter.timefilter,nowProvider:o.data.nowProvider,forceDSL:i,eventAnnotationService:p}),injectFilterReferences:s.query.filterManager.inject.bind(s.query.filterManager),visualizationMap:l,datasourceMap:c,theme:e.theme,uiSettings:e.uiSettings}};var y;return o&&(o.registerReactEmbeddableFactory(c.LENS_EMBEDDABLE_TYPE,(async()=>{const[e,{createLensEmbeddableFactory:t}]=await Promise.all([v(),Promise.all([i.e(595),i.e(41),i.e(906),i.e(776)]).then(i.bind(i,57776))]);return t(e)})),o.registerAddFromLibraryType({onAdd:async(e,t)=>{const{attributeService:i}=await v(),a=await(0,X.bf)(i,{savedObjectId:t.id},t.references);e.addNewPanel({panelType:c.LENS_EMBEDDABLE_TYPE,initialState:a})},savedObjectType:c.LENS_EMBEDDABLE_TYPE,savedObjectName:l.i18n.translate("xpack.lens.mapSavedObjectLabel",{defaultMessage:"Lens"}),getIconForSavedObject:()=>c.LENS_ICON})),_&&(this.locator=_.url.locators.create(new Y.ZZ),_.register((({uiSettings:e,formatFactoryFn:t,atLeastGold:i})=>({id:"csvDownloadLens",getShareMenuItems:({objectType:a,sharingData:n})=>{if("lens"!==a)return[];const{title:s,datatables:r,csvEnabled:o}=n;return[{shareMenuItem:{name:l.i18n.translate("xpack.lens.reporting.shareContextMenu.csvReportsButtonLabel",{defaultMessage:"CSV Download"}),icon:"document",disabled:!o,sortOrder:1},label:"CSV",reportType:"lens_csv",generateExport:()=>async function({title:e,datatables:t,formatFactory:i,uiSettings:a}){if(0===t.length)return void(window.ELASTIC_LENS_CSV_DOWNLOAD_DEBUG&&(window.ELASTIC_LENS_CSV_CONTENT=void 0));const n=t.reduce(((n,s,r)=>{if(s){const o=t.length>1?`-${r+1}`:"";n[`${e}${o}.csv`]={content:q.exporters.datatableToCSV(s,{csvSeparator:a.get("csv:separator",","),quoteValues:a.get("csv:quoteValues",!0),formatFactory:i,escapeFormulaValues:!1}),type:q.exporters.CSV_MIME_TYPE}}return n}),{});window.ELASTIC_LENS_CSV_DOWNLOAD_DEBUG&&(window.ELASTIC_LENS_CSV_CONTENT=n),n&&(0,K.downloadMultipleAs)(n)}({title:s,formatFactory:t(),datatables:r,uiSettings:e}),warnings:W(r),...i()?{disabled:!o,renderLayoutOptionSwitch:!1,getJobParams:void 0}:{helpText:(0,A.jsx)(Z.FormattedMessage,{id:"xpack.lens.application.csvPanelContent.generationDescription",defaultMessage:"Download the data displayed in the visualization."}),generateExportButton:(0,A.jsx)(Z.FormattedMessage,{id:"xpack.lens.share.csvButton",defaultMessage:"Download CSV"})}}]}}))({uiSettings:e.uiSettings,formatFactoryFn:()=>m().plugins.fieldFormats.deserialize,atLeastGold:()=>{var e;let t=!1;return null===(e=m().plugins.licensing)||void 0===e||e.license$.pipe().subscribe((e=>{t=e.hasAtLeast("gold")})),t}}))),p.registerAlias({alias:{path:(0,c.getBasePath)(),app:c.APP_ID},name:c.APP_ID,promotion:!0,title:l.i18n.translate("xpack.lens.visTypeAlias.title",{defaultMessage:"Lens"}),description:l.i18n.translate("xpack.lens.visTypeAlias.description",{defaultMessage:"Create visualizations using an intuitive drag-and-drop interface. Smart suggestions help you follow best practices and find the chart types that best match your data."}),order:60,icon:c.LENS_ICON,stage:c.STAGE_ID,appExtensions:{visualizations:{docTypes:[c.LENS_EMBEDDABLE_TYPE],searchFields:["title^3"],clientOptions:{update:{overwrite:!0}},client:u.m,toListItem(e){const{id:t,type:i,updatedAt:a,attributes:n,managed:s}=e,{title:r,description:o}=n;return{id:t,title:r,description:o,updatedAt:a,managed:s,editor:{editUrl:(0,c.getEditPath)(t),editApp:"lens"},icon:c.LENS_ICON,stage:c.STAGE_ID,savedObjectType:i,type:c.LENS_EMBEDDABLE_TYPE,typeTitle:l.i18n.translate("xpack.lens.visTypeAlias.type",{defaultMessage:"Lens"})}}}}}),h.registerDrilldown(new OpenInDiscoverDrilldown({dataViews:()=>this.dataViewsService,locator:()=>null==_?void 0:_.url.locators.get("DISCOVER_APP_LOCATOR"),hasDiscoverAccess:()=>this.hasDiscoverAccess,application:()=>m().core.application})),f.registry.register({id:"lens",version:{latest:1},name:l.i18n.translate("xpack.lens.content.name",{defaultMessage:"Lens Visualization"})}),(t=>{var a;[M,F,z,j,L,C,x,I,(a=()=>m().plugins.fieldFormats.deserialize,{name:"lens_datatable",type:"render",inputTypes:["datatable"],help:l.i18n.translate("xpack.lens.datatable.expressionHelpLabel",{defaultMessage:"Datatable renderer"}),args:{title:{types:["string"],help:l.i18n.translate("xpack.lens.datatable.titleLabel",{defaultMessage:"Title"})},description:{types:["string"],help:""},columns:{types:["lens_datatable_column"],help:"",multi:!0},sortingColumnId:{types:["string"],help:""},sortingDirection:{types:["string"],help:""},fitRowToContent:{types:["boolean"],help:""},rowHeightLines:{types:["number"],help:""},headerRowHeight:{types:["string"],help:""},headerRowHeightLines:{types:["number"],help:""},pageSize:{types:["number"],help:""}},async fn(...e){const{datatableFn:t}=await i.e(524).then(i.bind(i,56524));return t(a)(...e)}}),N((()=>m().plugins.data.datatableUtilities),(async()=>{const{getTimeZone:t}=await i.e(595).then(i.bind(i,80595));return t(e.uiSettings)}),(()=>m().plugins.data.nowProvider.get()))].forEach((e=>t.registerFunction(e)))})(a),e.application.register({id:c.APP_ID,title:c.NOT_INTERNATIONALIZED_PRODUCT_NAME,visibleIn:[],mount:async t=>{const{core:n,plugins:o}=m();await this.initParts(e,s,d,a,r,o.fieldFormats.deserialize);const{mountApp:l,getLensAttributeService:c,setUsageCollectionStart:u,initMemoizedErrorNotification:p}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));o.usageCollection&&u(o.usageCollection),p(n);const g=this.editorFrameService.start(n,o);return l(e,t,{createEditorFrame:g.createInstance,attributeService:c(n,o),topNavMenuEntryGenerators:this.topNavMenuEntries,locator:this.locator})}}),g&&g.registerResultProvider((y=e.getStartServices().then((([{application:{capabilities:e}}])=>e)),{id:"lens",find:({term:e="",types:t,tags:i})=>i||t&&!t.includes("application")?(0,$.of)([]):(0,$.from)(y.then((({navLinks:{visualize:t}})=>{if(!t)return[];const i=l.i18n.translate("xpack.lens.searchTitle",{defaultMessage:"Lens: create visualizations",description:"Lens is a product name and should not be translated"}),a=i.toLowerCase();let n=0;return a===(e=e.toLowerCase())?n=100:a.startsWith(e)?n=90:a.includes(e)&&(n=75),0===n?[]:[{id:"lens",title:i,type:"application",icon:"logoKibana",meta:{categoryId:U.DEFAULT_APP_CATEGORIES.kibana.id,categoryLabel:U.DEFAULT_APP_CATEGORIES.kibana.label},score:n,url:(0,c.getFullPath)()}]}))),getSearchableTypes:()=>["application"]})),t.forwardApp(c.APP_ID,c.APP_ID),this.initEditorFrameService=async()=>{const{plugins:t}=m();await this.initParts(e,s,d,a,r,t.fieldFormats.deserialize);const[n,o]=await Promise.all([this.editorFrameService.loadVisualizations(),this.editorFrameService.loadDatasources()]),{setVisualizationMap:l,setDatasourceMap:c}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));return c(o),l(n),{datasourceMap:o,visualizationMap:n}},{registerVisualization:e=>{this.editorFrameSetup?this.editorFrameSetup.registerVisualization(e):this.queuedVisualizations.push(e)},registerTopNavMenuEntryGenerator:e=>{this.topNavMenuEntries.push(e)}}}async initParts(e,t,a,n,s,r){const{DatatableVisualization:o,EditorFrameService:l,FormBasedDatasource:c,XyVisualization:u,LegacyMetricVisualization:p,MetricVisualization:d,PieVisualization:g,HeatmapVisualization:b,GaugeVisualization:h,TagcloudVisualization:_,TextBasedDatasource:f}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));this.datatableVisualization=new o,this.editorFrameService=new l,this.FormBasedDatasource=new c,this.TextBasedDatasource=new f,this.xyVisualization=new u,this.legacyMetricVisualization=new p,this.metricVisualization=new d,this.pieVisualization=new g,this.heatmapVisualization=new b,this.gaugeVisualization=new h,this.tagcloudVisualization=new _;const m=this.editorFrameService.setup(),v={expressions:n,data:t,fieldFormats:s,charts:a,editorFrame:m,formatFactory:r};this.FormBasedDatasource.setup(e,v),this.TextBasedDatasource.setup(e,v),this.xyVisualization.setup(e,v),this.datatableVisualization.setup(e,v),this.legacyMetricVisualization.setup(e,v),this.metricVisualization.setup(e,v),this.pieVisualization.setup(e,v),this.heatmapVisualization.setup(e,v),this.gaugeVisualization.setup(e,v),this.tagcloudVisualization.setup(e,v),this.queuedVisualizations.forEach((e=>{m.registerVisualization(e)})),this.editorFrameSetup=m}start(e,t){var a,n;this.hasDiscoverAccess=e.application.capabilities.discover_v2.show,this.dataViewsService=t.dataViews,t.uiActions.hasAction(o.ACTION_VISUALIZE_FIELD)&&t.uiActions.unregisterAction(o.ACTION_VISUALIZE_FIELD),t.uiActions.registerTrigger(f),t.uiActions.addTriggerAction(o.VISUALIZE_FIELD_TRIGGER,(n=e.application,(0,o.createAction)({type:o.ACTION_VISUALIZE_LENS_FIELD,id:o.ACTION_VISUALIZE_LENS_FIELD,getDisplayName:()=>l.i18n.translate("xpack.lens.discover.visualizeFieldLegend",{defaultMessage:"Visualize field"}),isCompatible:async()=>!!n.capabilities.visualize_v2.show,execute:async e=>{n.navigateToApp("lens",{state:{type:o.ACTION_VISUALIZE_LENS_FIELD,payload:e}})}}))),t.uiActions.addTriggerAction(r.VISUALIZE_EDITOR_TRIGGER,(e=>(0,o.createAction)({type:r.ACTION_CONVERT_TO_LENS,id:r.ACTION_CONVERT_TO_LENS,getDisplayName:()=>l.i18n.translate("xpack.lens.visualizeTSVBLegend",{defaultMessage:"Visualize TSVB chart"}),isCompatible:async()=>!!e.capabilities.visualize_v2.show,execute:async t=>{const i=Object.values(t.layers),a={...t,layers:i,isVisualizeAction:!0};e.navigateToApp("lens",{state:{type:r.ACTION_CONVERT_TO_LENS,payload:a,originatingApp:l.i18n.translate("xpack.lens.TSVBLabel",{defaultMessage:"TSVB"})}})}}))(e.application)),t.uiActions.addTriggerAction(r.DASHBOARD_VISUALIZATION_PANEL_TRIGGER,Q(r.ACTION_CONVERT_DASHBOARD_PANEL_TO_LENS,l.i18n.translate("xpack.lens.visualizeLegacyVisualizationChart",{defaultMessage:"Visualize legacy visualization chart"}),l.i18n.translate("xpack.lens.dashboardLabel",{defaultMessage:"Dashboard"}))(e.application)),t.uiActions.addTriggerAction(r.AGG_BASED_VISUALIZATION_TRIGGER,Q(r.ACTION_CONVERT_DASHBOARD_PANEL_TO_LENS,l.i18n.translate("xpack.lens.visualizeAggBasedLegend",{defaultMessage:"Visualize agg based chart"}),l.i18n.translate("xpack.lens.AggBasedLabel",{defaultMessage:"aggregation based visualization"}))(e.application));const u=new EditLensEmbeddableAction(t,e);t.uiActions.addTriggerAction(_,u);const g=new CreateESQLPanelAction(t,e,(async()=>(this.editorFrameService||await this.initEditorFrameService(),this.editorFrameService)));t.uiActions.addTriggerAction(o.ADD_PANEL_TRIGGER,g);const b=null===(a=t.share)||void 0===a?void 0:a.url.locators.get("DISCOVER_APP_LOCATOR");return b&&t.uiActions.addTriggerAction(s.CONTEXT_MENU_TRIGGER,((e,t,i)=>{const a={type:p,id:p,order:20,getIconType:()=>"discoverApp",getDisplayName:()=>l.i18n.translate("xpack.lens.action.exploreInDiscover",{defaultMessage:"Explore in Discover"}),getHref:async a=>{const{getHref:n}=await d();return n({locator:e,dataViews:t,hasDiscoverAccess:i,...a})},isCompatible:async a=>{const{isCompatible:n}=await d();return await n({hasDiscoverAccess:i,locator:e,dataViews:t,embeddable:a.embeddable})},couldBecomeCompatible:({embeddable:e})=>(e.canViewUnderlyingData$,i&&Boolean(e.canViewUnderlyingData$)),subscribeToCompatibilityChanges:({embeddable:e},t)=>(e.canViewUnderlyingData$,e.canViewUnderlyingData$.subscribe((e=>{t(e,a)}))),execute:async a=>{const{execute:n}=await d();return n({...a,locator:e,dataViews:t,hasDiscoverAccess:i})}};return(0,o.createAction)(a)})(b,t.dataViews,this.hasDiscoverAccess)),{EmbeddableComponent:ee,SaveModalComponent:D(e,t),navigateToPrefilledEditor:(i,{openInNewTab:a=!1,originatingApp:n="",originatingPath:r,skipAppLeave:o=!1}={})=>{null!=i&&i.timeRange&&!a&&t.data.query.timefilter.timefilter.setTime(i.timeRange),new s.EmbeddableStateTransfer(e.application.navigateToApp,e.application.currentAppId$).navigateToEditor(c.APP_ID,{openInNewTab:a,path:(0,c.getEditPath)(void 0,a&&(null==i?void 0:i.timeRange)||void 0),state:{originatingApp:n,originatingPath:r,valueInput:i},skipAppLeave:o})},canUseEditor:()=>{var t;return Boolean(null===(t=e.application.capabilities.visualize_v2)||void 0===t?void 0:t.show)},getXyVisTypes:async()=>{const{visualizationSubtypes:e}=await Promise.all([i.e(901),i.e(478)]).then(i.bind(i,70901));return e},stateHelperApi:async()=>{const{createFormulaPublicApi:e,createChartInfoApi:a,suggestionsApi:n}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370)),{visualizationMap:s,datasourceMap:r}=await this.initEditorFrameService();return{formula:e(),chartInfo:a(t.dataViews,s,r),suggestions:(e,t,i,a,o)=>n({datasourceMap:r,visualizationMap:s,context:e,dataView:t,excludedVisualizations:i,preferredChartType:a,preferredVisAttributes:o})}},EditLensConfigPanelApi:async()=>{const{visualizationMap:a,datasourceMap:n}=await this.initEditorFrameService(),{getEditLensConfiguration:s}=await Promise.all([i.e(595),i.e(41),i.e(691),i.e(901),i.e(370),i.e(906)]).then(i.bind(i,2370));return await s(e,t,a,n)}}}stop(){}}var te=i(11971),ie=i(22601);const ae=()=>new LensPlugin},25208:(e,t,i)=>{"use strict";i.d(t,{m:()=>n});var a=i(22787);function n(e){return{get:async t=>e.client.get({contentTypeId:a.DOC_TYPE,id:t}),create:async({data:t,options:i})=>await e.client.create({contentTypeId:a.DOC_TYPE,data:t,options:i}),update:async({id:t,data:i,options:n})=>await e.client.update({contentTypeId:a.DOC_TYPE,id:t,data:i,options:n}),delete:async t=>await e.client.delete({contentTypeId:a.DOC_TYPE,id:t}),search:async(t={},i)=>e.client.search({contentTypeId:a.DOC_TYPE,query:t,options:i})}}},42770:(e,t,i)=>{"use strict";i.d(t,{IN:()=>_,Lc:()=>m,Lz:()=>h,Mw:()=>f,S3:()=>g,bf:()=>u,pT:()=>c,uV:()=>p,zC:()=>b});var a=i(17961),n=i(30770),s=i(80190),r=i(4513),o=i.n(r),l=i(55964);function c(e=null,t,i,a,n){return{attributes:{title:null!=t?t:"",description:null!=i?i:"",visualizationType:e,references:[],state:{query:a||{query:"",language:"kuery"},filters:n||[],internalReferences:[],datasourceStates:{...a&&(0,l.isOfAggregateQueryType)(a)?{textBased:{}}:{formBased:{}}},visualization:{}}}}}async function u(e,t,i){if(t.savedObjectId)try{const{attributes:i,managed:a,sharingSavedObjectProps:n}=await e.loadFromLibrary(t.savedObjectId);return{...t,attributes:i,managed:a,sharingSavedObjectProps:n}}catch(e){return{...t,attributes:c().attributes}}return e.injectReferences("attributes"in t?t:{attributes:t},null!=i&&i.length?i:void 0)}function p(){return{}}function d(e){return[e,t=>e.next(t),o()]}function g(e){if(e instanceof s.BehaviorSubject)return[e,d(e)];const t=new s.BehaviorSubject(e);return[t,d(t)]}function b(e){var t;return(0,l.isOfAggregateQueryType)(null===(t=e.attributes)||void 0===t?void 0:t.state.query)}function h(e){return(0,a.i0)(e)?(0,a.PJ)(e):void 0}function _(e){var t;const i=null!==(t=h(e))&&void 0!==t?t:"view";return"print"===i?"view":i}function f(e){return(0,a.g1)(e)?e.executionContext:(t=e,(0,n.isObject)(t)&&"getAppContext"in t&&"function"==typeof t.getAppContext?{type:e.getAppContext().currentAppId}:void 0);var t}function m(e){return(0,a.i0)(e)?e.viewMode$:(0,a.XY)(e)?m(e.parentApi):new s.BehaviorSubject("view")}},11971:(e,t,i)=>{"use strict";i.d(t,{$C:()=>s,Nq:()=>l,U6:()=>o,W:()=>r,n2:()=>c});var a=i(17961),n=i(30770);const s=e=>Boolean(e&&(0,a.mL)(e,"lens")&&"canViewUnderlyingData$"in e&&function(e){return["getSavedVis","getViewUnderlyingDataArgs","isTextBasedLanguage","getTextBasedLanguage"].every((t=>"function"==typeof e[t]))}(e)&&(0,a.Qr)(e)&&(0,a.cH)(e));function r(e){return(0,n.isObject)(e)&&["onFilter","onBrushEnd","onLoad","onTableRowClick","onBeforeBadgesRender"].some((t=>Object.hasOwn(e,t)))}function o(e){return(0,n.isObject)(e)&&["style","className","noPadding","viewMode","abortController"].some((t=>Object.hasOwn(e,t)))}function l(e){return(0,n.isObject)(e)&&Object.hasOwn(e,"abortController")}function c(e){return(0,n.isObject)(e)&&Object.hasOwn(e,"canEditInline")}},4513:e=>{"use strict";e.exports=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;var a,n,s;if(Array.isArray(t)){if((a=t.length)!=i.length)return!1;for(n=a;0!=n--;)if(!e(t[n],i[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if((a=(s=Object.keys(t)).length)!==Object.keys(i).length)return!1;for(n=a;0!=n--;)if(!Object.prototype.hasOwnProperty.call(i,s[n]))return!1;for(n=a;0!=n--;){var r=s[n];if(!e(t[r],i[r]))return!1}return!0}return t!=t&&i!=i}},90399:(e,t,i)=>{i.p=window.__kbnPublicPath__.lens},52212:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},95240:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},64390:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},7195:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},14627:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},17674:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/dataViews/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},67546:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},40975:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/esqlDataGrid/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},60104:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/esql/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},56525:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/eventAnnotation/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},47951:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/expressionGauge/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},66239:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/expressionGauge/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},32123:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/expressionMetricVis/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},79789:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/expressionTagcloud/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},46707:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/expressionXY/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},77876:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/expressions/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},20904:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},52374:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},78370:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/inspector/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},20409:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},21359:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},61215:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},7704:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},92927:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},27888:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/share/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},84839:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},11684:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},134:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/visualizations/common/constants");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},98634:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},22500:(e,t,i)=>{i.r(t);var a=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},3185:(e,t,i)=>{e.exports=i(52497)(51858)},68915:(e,t,i)=>{e.exports=i(52497)(67493)},65927:e=>{"use strict";e.exports=__kbnSharedDeps__.Classnames},43059:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticCharts},81319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},96791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},44682:e=>{"use strict";e.exports=__kbnSharedDeps__.FastestLevenshtein},66744:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnAnalytics},9424:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCodeEditor},79551:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCryptoBrowser},76494:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnDatemath},21192:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEbtTools},55964:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsQuery},91991:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnEsqlAst},75008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},75879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},30911:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnMonaco},20482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},45995:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnRison},95735:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSearchErrors},11728:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},30193:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxRouter},53803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},30770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},51783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},62488:e=>{"use strict";e.exports=__kbnSharedDeps__.MomentTimezone},84286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},22874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},47012:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRedux},57150:e=>{"use strict";e.exports=__kbnSharedDeps__.ReduxjsToolkit},80190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},95079:e=>{"use strict";e.exports=__kbnSharedDeps__.SaferLodashSet},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},9472:e=>{"use strict";e.exports=__kbnSharedDeps__.Uuid},52497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return a[e].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=a,s.amdD=function(){throw new Error("define cannot be used indirect")},s.amdO={},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(i,a){if(1&a&&(i=this(i)),8&a)return i;if("object"==typeof i&&i){if(4&a&&i.__esModule)return i;if(16&a&&"function"==typeof i.then)return i}var n=Object.create(null);s.r(n);var r={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>r[e]=()=>i[e]));return r.default=()=>i,s.d(n,r),n},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,i)=>(s.f[i](e,t),t)),[])),s.u=e=>"lens.chunk."+e+".js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},s.l=(e,t,a,n)=>{if(i[e])i[e].push(t);else{var r,o;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==e){r=u;break}}r||(o=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=e),i[e]=[t];var p=(t,a)=>{r.onerror=r.onload=null,clearTimeout(d);var n=i[e];if(delete i[e],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(a))),t)return t(a)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),o&&document.head.appendChild(r)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={167:0};s.f.j=(t,i)=>{var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var n=new Promise(((i,n)=>a=e[t]=[i,n]));i.push(a[2]=n);var r=s.p+s.u(t),o=new Error;s.l(r,(i=>{if(s.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,a[1](o)}}),"chunk-"+t,t)}};var t=(t,i)=>{var a,n,[r,o,l]=i,c=0;if(r.some((t=>0!==e[t]))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);l&&l(s)}for(t&&t(i);c<r.length;c++)n=r[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0},i=self.lens_bundle_jsonpfunction=self.lens_bundle_jsonpfunction||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),s.nc=void 0,s(90399),__kbnBundles__.define("plugin/lens/public",s,59140),__kbnBundles__.define("plugin/lens/common/constants",s,22787)})();