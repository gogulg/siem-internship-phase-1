(()=>{var e={787:(e,t,i)=>{"use strict";i.d(t,{$c:()=>s,AF:()=>n,PF:()=>l,s_:()=>r});const r="files",n="files",s="file",l="esFixedSizeIndex"},727:(e,t,i)=>{"use strict";i.r(t),i.d(t,{id:()=>r,kind:()=>d,maxSize:()=>a,requiredPrivileges:()=>l,tag:()=>n,tags:()=>s});const r="defaultImage",n="files:defaultImage",s=[`access:${n}`],l=[n],a=10485760,d={id:r,allowedMimeTypes:["image/png","image/jpeg","image/webp","image/avif"]}},850:(e,t,i)=>{"use strict";i.r(t),i.d(t,{DefaultFileKind:()=>n,ES_FIXED_SIZE_INDEX_BLOB_STORE:()=>r.PF,FILE_SO_TYPE:()=>r.$c,PLUGIN_ID:()=>r.s_,PLUGIN_NAME:()=>r.AF});var r=i(787),n=i(727)},77:(e,t,i)=>{"use strict";i.r(t),i.d(t,{plugin:()=>$});var r=i(915),n=i(463),s=i.n(n),l=i(359);class FileKindsRegistryImpl{constructor(e){(0,r.default)(this,"fileKinds",new Map),this.onRegister=e}register(e){var t;if(this.fileKinds.get(e.id))throw new Error(`File kind "${e.id}" already registered.`);if(e.id!==encodeURIComponent(e.id))throw new Error(`File kind id "${e.id}" is not a valid file kind ID. Choose an ID that does not need to be URI encoded.`);this.fileKinds.set(e.id,e),null===(t=this.onRegister)||void 0===t||t.call(this,e)}get(e){const t=this.fileKinds.get(e);return s()(t,`File kind with id "${e}" not found.`),t}getAll(){return Array.from(this.fileKinds.values())}}const[a,d]=(0,l.createGetterSetter)("fileKindsRegistry"),o=`/api/${i(787).s_}`,g=`${o}/files`,p=`${o}/shares`,u=`${o}/public`,c=(e,t,i)=>`${g}/${e}/${t}/blob${i?"/"+i:""}`,f=(e,t)=>`${p}/${e}/${t}`,y={headers:{"content-type":"application/json"}};function h({registry:e,http:t,fileKind:i}){return{bulkDelete:e=>t.delete(`${o}/blobs`,{headers:y,body:JSON.stringify(e)}),create:({kind:e,...r})=>t.post(`${g}/${null!=i?i:e}`,{headers:y,body:JSON.stringify(r)}),delete:({kind:e,...r})=>{return t.delete((n=null!=i?i:e,s=r.id,`${g}/${n}/${s}`));var n,s},download:({kind:e,...r})=>t.get(c(null!=i?i:e,r.id,r.fileName),{headers:{Accept:"*/*"}}),getById:({kind:e,...r})=>{return t.get((n=null!=i?i:e,s=r.id,`${g}/${n}/${s}`));var n,s},list:({kind:e,page:r,perPage:n,abortSignal:s,...l}={kind:""})=>t.post(`${g}/${null!=i?i:e}/list`,{headers:y,query:{page:r,perPage:n},body:JSON.stringify(l),signal:s}),update:({kind:e,id:r,...n})=>t.patch(((e,t)=>`${g}/${e}/${t}`)(null!=i?i:e,r),{headers:y,body:JSON.stringify(n)}),upload:({kind:e,abortSignal:r,contentType:n,selfDestructOnAbort:s,...l})=>{return t.put((a=null!=i?i:e,d=l.id,`${g}/${a}/${d}/blob`),{query:{selfDestructOnAbort:s},headers:{"Content-Type":null!=n?n:"application/octet-stream"},signal:r,body:l.body});var a,d},getDownloadHref:({fileKind:e,id:r})=>`${t.basePath.prepend(c(null!=i?i:e,r))}`,share:({kind:e,fileId:r,name:n,validUntil:s})=>t.post(f(null!=i?i:e,r),{headers:y,body:JSON.stringify({name:n,validUntil:s})}),unshare:({kind:e,id:r})=>t.delete(f(null!=i?i:e,r)),getShare:({kind:e,id:r})=>t.get(f(null!=i?i:e,r)),listShares:({kind:e,forFileId:r,page:n,perPage:s})=>t.get(`${p}/${null!=i?i:e}`,{query:{page:n,perPage:s,forFileId:r}}),find:({page:e,perPage:i,...r})=>t.post(`${o}/find`,{query:{page:e,perPage:i},headers:y,body:JSON.stringify(r)}),getMetrics:()=>t.get(`${o}/metrics`),publicDownload:({token:e,fileName:i})=>t.get((e=>`${u}/blob${e?"/"+e:""}`)(i),{query:{token:e}}),getFileKind:t=>e.get(t)}}var b=i(727);class FilesPlugin{constructor(){(0,r.default)(this,"registry",new FileKindsRegistryImpl),(0,r.default)(this,"filesClientFactory",void 0)}setup(e){return this.registry.register({...b.kind,maxSizeBytes:b.maxSize}),this.filesClientFactory={asScoped:t=>h({registry:this.registry,fileKind:t,http:e.http}),asUnscoped:()=>h({registry:this.registry,http:e.http})},{filesClientFactory:this.filesClientFactory,registerFileKind:e=>{this.registry.register(e)}}}start(e){return{filesClientFactory:this.filesClientFactory,getFileKindDefinition:e=>this.registry.get(e),getAllFindKindDefinitions:()=>this.registry.getAll()}}}function $(){return new FilesPlugin}},651:(e,t,i)=>{i.p=window.__kbnPublicPath__.files},359:(e,t,i)=>{i.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},463:(e,t,i)=>{e.exports=i(497)(49905)},915:(e,t,i)=>{e.exports=i(497)(67493)},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),i(651),__kbnBundles__.define("plugin/files/public",i,77),__kbnBundles__.define("plugin/files/common",i,850)})();