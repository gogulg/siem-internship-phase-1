(()=>{var e={672:(e,t,s)=>{"use strict";let i;s.r(t),s.d(t,{SavedObjectSaveModal:()=>SavedObjectSaveModal,SavedObjectSaveModalOrigin:()=>b,isErrorNonFatal:()=>M,plugin:()=>T,showSaveModal:()=>x}),s(11);const a=()=>i.analytics,n=()=>i.i18n,o=()=>i.theme,r=()=>i.userProfile;class SavedObjectsPublicPlugin{setup(){return{}}start(e,{data:t,dataViews:s}){return function(e){i=e}(e),{}}}var l=s(915);const c=__kbnSharedDeps__.ElasticEui,u=__kbnSharedDeps__.KbnI18nReact,d=__kbnSharedDeps__.React;var p=s.n(d);const h=__kbnSharedDeps__.KbnI18n,v=__kbnSharedDeps__.EmotionReact,f=(0,c.htmlIdGenerator)();class SavedObjectSaveModal extends p().Component{constructor(...e){super(...e),(0,l.default)(this,"warning",p().createRef()),(0,l.default)(this,"formId",f("form")),(0,l.default)(this,"savedObjectTitleInputRef",p().createRef()),(0,l.default)(this,"state",{title:this.props.title,copyOnSave:Boolean(this.props.initialCopyOnSave),isTitleDuplicateConfirmed:!1,hasTitleDuplicate:!1,isLoading:!1,visualizationDescription:this.props.description?this.props.description:"",hasAttemptedSubmit:!1}),(0,l.default)(this,"renderViewDescription",(()=>{if(this.props.showDescription)return(0,v.jsx)(c.EuiFormRow,{fullWidth:!0,labelAppend:(0,v.jsx)(c.EuiText,{size:"xs",color:"subdued"},(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModal.optional",defaultMessage:"Optional"})),label:(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModal.descriptionLabel",defaultMessage:"Description"})},(0,v.jsx)(c.EuiTextArea,{fullWidth:!0,"data-test-subj":"savedObjectDescription",value:this.state.visualizationDescription,onChange:this.onDescriptionChange}))})),(0,l.default)(this,"onDescriptionChange",(e=>{this.setState({visualizationDescription:e.target.value})})),(0,l.default)(this,"onTitleDuplicate",(()=>{this.setState({isLoading:!1,isTitleDuplicateConfirmed:!0,hasTitleDuplicate:!0}),this.warning.current&&this.warning.current.focus()})),(0,l.default)(this,"saveSavedObject",(async()=>{this.state.isLoading||(this.setState({isLoading:!0}),await this.props.onSave({newTitle:this.state.title,newCopyOnSave:Boolean(this.props.mustCopyOnSaveMessage)||this.state.copyOnSave,isTitleDuplicateConfirmed:this.state.isTitleDuplicateConfirmed,onTitleDuplicate:this.onTitleDuplicate,newDescription:this.state.visualizationDescription}))})),(0,l.default)(this,"onTitleChange",(e=>{this.setState({title:e.target.value,isTitleDuplicateConfirmed:!1,hasTitleDuplicate:!1})})),(0,l.default)(this,"handleTitleDuplication",(()=>{const e=/\s*\[(\d+)\]$/,t=this.state.title.match(e);if(t){const s=Number(t[1])+1;this.setState({title:this.state.title.replace(e,` [${s}]`)})}else this.setState({title:this.state.title+" [1]"})})),(0,l.default)(this,"onCopyOnSaveChange",(e=>{this.props.title===this.state.title&&e.target.checked&&this.handleTitleDuplication(),this.setState({copyOnSave:e.target.checked}),this.props.onCopyOnSaveChange&&this.props.onCopyOnSaveChange(e.target.checked)})),(0,l.default)(this,"onFormSubmit",(e=>{e.preventDefault();const{hasAttemptedSubmit:t,title:s}=this.state;t||this.setState({hasAttemptedSubmit:!0});const i=void 0===this.props.isValid||this.props.isValid;0!==s.length&&i&&this.saveSavedObject()})),(0,l.default)(this,"renderConfirmButton",(()=>{const{isLoading:e}=this.state;let t=h.i18n.translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"});return this.props.confirmButtonLabel&&(t=this.props.confirmButtonLabel),(0,v.jsx)(c.EuiButton,{fill:!0,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:e,type:"submit",form:this.formId},t)})),(0,l.default)(this,"renderDuplicateTitleCallout",(e=>{if(this.state.hasTitleDuplicate)return(0,v.jsx)(p().Fragment,null,(0,v.jsx)("div",{ref:this.warning,tabIndex:-1},(0,v.jsx)(c.EuiCallOut,{title:(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"This {objectType} already exists",values:{objectType:this.props.objectType}}),color:"warning","data-test-subj":"titleDuplicateWarnMsg",id:e},(0,v.jsx)("p",null,(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Saving ''{title}'' creates a duplicate title.",values:{title:this.state.title}})))),(0,v.jsx)(c.EuiSpacer,null))})),(0,l.default)(this,"renderCopyOnSave",(()=>(0,v.jsx)(p().Fragment,null,(0,v.jsx)(c.EuiFlexItem,{grow:!1},(0,v.jsx)(c.EuiSwitch,{"data-test-subj":"saveAsNewCheckbox",checked:Boolean(this.props.mustCopyOnSaveMessage)||this.state.copyOnSave,disabled:Boolean(this.props.mustCopyOnSaveMessage),onChange:this.onCopyOnSaveChange,label:(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as new {objectType}",values:{objectType:this.props.objectType}})})),this.props.mustCopyOnSaveMessage&&(0,v.jsx)(c.EuiFlexItem,{css:({euiTheme:e})=>({marginLeft:`-${e.size.base}`}),grow:!1},(0,v.jsx)(c.EuiIconTip,{type:"iInCircle",content:this.props.mustCopyOnSaveMessage})),(0,v.jsx)(c.EuiFlexItem,{grow:!0}))))}componentDidMount(){setTimeout((()=>{var e;null===(e=this.savedObjectTitleInputRef.current)||void 0===e||e.focus()}),0)}render(){const{isTitleDuplicateConfirmed:e,hasTitleDuplicate:t,title:s,hasAttemptedSubmit:i}=this.state,a=f(),n=!!this.props.rightOptions,o=i&&(!e&&t||0===s.length),r=(0,v.jsx)(p().Fragment,null,(0,v.jsx)(c.EuiFormRow,{fullWidth:!0,label:(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModal.titleLabel",defaultMessage:"Title"}),isInvalid:o,error:h.i18n.translate("savedObjects.saveModal.titleRequired",{defaultMessage:"A title is required"})},(0,v.jsx)(c.EuiFieldText,{fullWidth:!0,inputRef:this.savedObjectTitleInputRef,"data-test-subj":"savedObjectTitle",value:s,onChange:this.onTitleChange,isInvalid:o,"aria-describedby":this.state.hasTitleDuplicate?a:void 0})),this.renderViewDescription(),"function"==typeof this.props.options?this.props.options(this.state):this.props.options),l=n?(0,v.jsx)(c.EuiFlexGroup,{gutterSize:"m"},(0,v.jsx)(c.EuiFlexItem,null,r),(0,v.jsx)(c.EuiFlexItem,null,"function"==typeof this.props.rightOptions?this.props.rightOptions(this.state):this.props.rightOptions)):r;return(0,v.jsx)(c.EuiModal,{"data-test-subj":"savedObjectSaveModal",className:"kbnSavedObjectSaveModal"+(n?" kbnSavedObjectsSaveModal--wide":""),onClose:this.props.onClose},(0,v.jsx)(c.EuiModalHeader,null,(0,v.jsx)(c.EuiModalHeaderTitle,null,this.props.customModalTitle?this.props.customModalTitle:(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),(0,v.jsx)(c.EuiModalBody,null,this.renderDuplicateTitleCallout(a),(0,v.jsx)(c.EuiForm,{component:"form",onSubmit:this.onFormSubmit,id:this.formId},!this.props.showDescription&&this.props.description&&(0,v.jsx)(c.EuiText,{size:"s",color:"subdued"},this.props.description),l)),(0,v.jsx)(c.EuiModalFooter,null,(0,v.jsx)(c.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},this.props.showCopyOnSave&&this.renderCopyOnSave(),(0,v.jsx)(c.EuiFlexItem,{grow:!1},(0,v.jsx)(c.EuiButtonEmpty,{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"}))),(0,v.jsx)(c.EuiFlexItem,{grow:!1},this.renderConfirmButton()))))}}function b(e){const[t,s]=(0,d.useState)(Boolean(e.originatingApp)),{documentInfo:i}=e,a=h.i18n.translate("savedObjects.saveModalOrigin.returnToOriginLabel",{defaultMessage:"Return"}),n=h.i18n.translate("savedObjects.saveModalOrigin.addToOriginLabel",{defaultMessage:"Add"}),o=t?h.i18n.translate("savedObjects.saveModalOrigin.saveAndReturnLabel",{defaultMessage:"Save and return"}):null;return(0,v.jsx)(SavedObjectSaveModal,{onSave:s=>{e.onSave({...s,returnToOrigin:t})},onClose:e.onClose,title:i.title,showCopyOnSave:!!i.id,initialCopyOnSave:Boolean(i.id)&&t,confirmButtonLabel:o,objectType:e.objectType,options:o=>{const r="function"==typeof e.options?e.options(o):e.options;if(!e.originatingApp)return r;const l=e.getAppNameFromId&&e.getAppNameFromId(e.originatingApp)||e.originatingApp;if(o.copyOnSave&&"dashboards"!==e.originatingApp)return s(!1),r;{var p;const h=!i.id||o.copyOnSave?n:a;return(0,v.jsx)(d.Fragment,null,r,(0,v.jsx)(c.EuiFormRow,null,(0,v.jsx)(c.EuiSwitch,{"data-test-subj":"returnToOriginModeSwitch",checked:t,onChange:e=>{s(e.target.checked)},label:null!==(p=e.returnToOriginSwitchLabel)&&void 0!==p?p:(0,v.jsx)(u.FormattedMessage,{id:"savedObjects.saveModalOrigin.originAfterSavingSwitchLabel",defaultMessage:"{originVerb} to {origin} after saving",values:{originVerb:h,origin:l}})})))}},description:i.description,showDescription:!0})}const g=__kbnSharedDeps__.ReactDom;var m=s.n(g);const j=__kbnSharedDeps__.KbnReactKibanaContextRender,S=(e,t)=>s=>(m().render((0,v.jsx)(j.KibanaRenderContextProvider,t,e),s),()=>m().unmountComponentAtNode(s));function x(e,t){let s;const i=S(p().createElement((function(){const i=()=>{s(),setTimeout((()=>{var t,s;null===(t=(s=e.props).onClose)||void 0===t||t.call(s)}),0)},a=e.props.onSave,n=p().cloneElement(e,{onSave:async(...e)=>{const t=await a(...e);return Boolean("id"in t?t.id:t.error)&&i(),t},onClose:i});return p().createElement(null!=t?t:p().Fragment,{children:n})})),{analytics:a(),theme:o(),i18n:n(),userProfile:r()});s=i(document.createElement("div"))}d.Component;const y=h.i18n.translate("savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"}),O=h.i18n.translate("savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});function M(e){return!!e&&(e.message===y||e.message===O)}const T=()=>new SavedObjectsPublicPlugin},816:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s(721),a=s.n(i),n=s(186),o=s.n(n)()(a());o.push([e.id,".kbnSavedObjectSaveModal{width:600px}.kbnSavedObjectsSaveModal--wide{width:800px}",""]);const r=o},63:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s(721),a=s.n(i),n=s(186),o=s.n(n)()(a());o.push([e.id,".kbnSavedObjectSaveModal{width:600px}.kbnSavedObjectsSaveModal--wide{width:800px}",""]);const r=o},186:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",i=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),i&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),i&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,i,a,n){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);i&&o[u[0]]||(void 0!==n&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=n),s&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=s):u[2]=s),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},721:e=>{"use strict";e.exports=function(e){return e[1]}},197:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var i=s(264),a=s.n(i),n=s(449),o=s.n(n),r=s(811),l=s.n(r),c=s(272),u=s.n(c),d=s(332),p=s.n(d),h=s(745),v=s.n(h),f=s(816),b={};b.styleTagTransform=v(),b.setAttributes=u(),b.insert=l().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=p(),a()(f.A,b);const g=f.A&&f.A.locals?f.A.locals:void 0},120:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var i=s(264),a=s.n(i),n=s(449),o=s.n(n),r=s(811),l=s.n(r),c=s(272),u=s.n(c),d=s(332),p=s.n(d),h=s(745),v=s.n(h),f=s(63),b={};b.styleTagTransform=v(),b.setAttributes=u(),b.insert=l().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=p(),a()(f.A,b);const g=f.A&&f.A.locals?f.A.locals:void 0},264:e=>{"use strict";var t=[];function s(e){for(var s=-1,i=0;i<t.length;i++)if(t[i].identifier===e){s=i;break}return s}function i(e,i){for(var n={},o=[],r=0;r<e.length;r++){var l=e[r],c=i.base?l[0]+i.base:l[0],u=n[c]||0,d="".concat(c," ").concat(u);n[c]=u+1;var p=s(d),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var v=a(h,i);i.byIndex=r,t.splice(r,0,{identifier:d,updater:v,references:1})}o.push(d)}return o}function a(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,a){var n=i(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<n.length;o++){var r=s(n[o]);t[r].references--}for(var l=i(e,a),c=0;c<n.length;c++){var u=s(n[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}n=l}}},811:e=>{"use strict";var t={};e.exports=function(e,s){var i=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},332:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},272:(e,t,s)=>{"use strict";e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},449:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var a=void 0!==s.layer;a&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,a&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var n=s.sourceMap;n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},745:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},529:(e,t,s)=>{s.p=window.__kbnPublicPath__.savedObjects},11:(e,t,s)=>{switch(window.__kbnThemeTag__){case"borealislight":return s(197);case"borealisdark":return s(120)}},915:(e,t,s)=>{e.exports=s(497)(67493)},497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={id:i,exports:{}};return e[i](n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),s.nc=void 0,s(529),__kbnBundles__.define("plugin/savedObjects/public",s,672)})();