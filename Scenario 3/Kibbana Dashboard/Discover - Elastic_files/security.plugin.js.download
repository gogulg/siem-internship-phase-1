/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */(()=>{var e,t,s,i={3991:(e,t,s)=>{"use strict";s.d(t,{BK:()=>l,JG:()=>u});var i=s(4286),r=s.n(i),n=s(6791);const a=r().createContext(null),o=({children:e,...t})=>(0,n.jsx)(a.Provider,{value:t},e),l=({children:e,...t})=>{const{core:{notifications:s,...i},security:{userProfiles:r},toMountPoint:a}=t;return(0,n.jsx)(o,{userProfileApiClient:r,notifySuccess:({title:e,text:t},r)=>{const n={};null!=r&&r.durationMs&&(n.toastLifeTimeMs=r.durationMs),s.toasts.addSuccess({title:e,text:t?a(t,i):void 0},n)}},e)};function u(){const e=(0,i.useContext)(a);if(!e)throw new Error("UserProfilesContext is missing. Ensure your component or React root is wrapped with <UserProfilesProvider /> or <UserProfilesKibanaProvider />.");return e}},8856:(e,t,s)=>{"use strict";s.d(t,{H:()=>o});var i=s(3185),r=s(1319),n=(s(4286),s(892)),a=s(6791);const o=({user:e,avatar:t,...s})=>{const{euiTheme:o}=(0,r.useEuiTheme)();if(!e)return(0,a.jsx)(r.EuiAvatar,(0,i.default)({name:"",color:o.colors.lightestShade,initials:"?"},s));const l=(0,n.Qb)(e);return null!=t&&t.imageUrl?(0,a.jsx)(r.EuiAvatar,(0,i.default)({name:l,imageUrl:t.imageUrl,color:"plain"},s)):(0,a.jsx)(r.EuiAvatar,(0,i.default)({name:l,initials:(0,n.G8)(e,t),initialsLength:n.Nw,color:(0,n.WW)(e,t)},s))}},892:(e,t,s)=>{"use strict";s.d(t,{G8:()=>o,Nc:()=>l,Nw:()=>n,Qb:()=>u,WW:()=>a});var i=s(1319);const r=97,n=2;function a(e,t){if(t&&t.color)return t.color;const s=l(e).codePointAt(0)||r;return i.VISUALIZATION_COLORS[s%i.VISUALIZATION_COLORS.length]}function o(e,t){if(t&&t.initials)return t.initials;const s=l(e).split(" "),i=Math.min(n,s.length);return s.splice(i,s.length),s.map((e=>e.substring(0,1))).join("")}function l(e){return e.full_name||e.email||e.username}function u(e){const t=l(e);return e.email&&e.email!==t?`${t} (${e.email})`:t}},5228:(e,t,s)=>{"use strict";s.d(t,{Pv:()=>l});var i=s(4286),r=s(2874),n=s.n(r),a=s(482),o=s(6791);const l=(e,t)=>s=>(n().render((0,o.jsx)(a.KibanaRenderContextProvider,t,e),s),()=>n().unmountComponentAtNode(s));s(8915),s(5008),i.Component},6183:(e,t,s)=>{"use strict";s.d(t,{V:()=>u});var i=s(3185),r=s(4286),n=s(1243);var a=s(6791);const o={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},l=({children:e,navigateToUrl:t,currentAppId:s,...n})=>{const l=(0,r.useRef)(null),u=(0,r.useCallback)((e=>(({event:e,container:t,navigateToUrl:s,currentAppId:i})=>{if(!t||!i)return;const r=((e,t)=>{let s=e;do{var i,r;if("a"===(null===(i=s)||void 0===i?void 0:i.tagName.toLowerCase()))return s;const e=null===(r=s)||void 0===r?void 0:r.parentElement;if(!e||e===document.body||e===t)break;s=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!r)return;const n=r.href,a=""===r.target||"_self"===r.target,o=0===e.button;n&&a&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),s(r.href))})({event:e,currentAppId:s,navigateToUrl:t,container:l.current})),[s,t]);return(0,a.jsx)("div",(0,i.default)({onClick:u,ref:l,css:o,"data-test-subj":"kbnRedirectAppLink"},n),e)},u=({children:e,...t})=>(0,a.jsx)(l,(0,i.default)({},(0,n.A$)(),t),e)},1243:(e,t,s)=>{"use strict";s.d(t,{A$:()=>c,gx:()=>l,m4:()=>u});var i=s(4286),r=s.n(i),n=s(7880),a=s(6791);const o=r().createContext(null),l=({children:e,...t})=>{const{navigateToUrl:s,currentAppId:i}=t;return(0,a.jsx)(o.Provider,{value:{navigateToUrl:s,currentAppId:i}},e)},u=({children:e,coreStart:t})=>{const{navigateToUrl:s,currentAppId$:i}=t.application,r=(0,n.A)(i,void 0);return(0,a.jsx)(o.Provider,{value:{navigateToUrl:s,currentAppId:r}},e)};function c(){const e=(0,i.useContext)(o);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}},2787:(e,t,s)=>{"use strict";s.d(t,{AE:()=>c,B:()=>v,Bo:()=>b,EM:()=>h,KM:()=>r,LV:()=>m,QI:()=>a,Vd:()=>l,Vz:()=>g,dZ:()=>f,hp:()=>y,nz:()=>o,pJ:()=>n,pr:()=>d,rX:()=>p,wY:()=>i,x:()=>u});const i="*",r="auth_provider_hint",n="auth_url_hash",a="provider",o="msg",l="next",u="kbn-session-error-reason",c=/^(?! )[a-zA-Z0-9 !"#$%&'()*+,\-./\\:;<=>?@\[\]^_`{|}~]*[a-zA-Z0-9!"#$%&'()*+,\-./\\:;<=>?@\[\]^_`{|}~]$/,d=/^[a-zA-Z0-9][a-zA-Z0-9._-]*$/,h=1024,p=5e3,g=3e5,v=1e3,f=6e4,m="/internal/security/session",y=["image/svg+xml","image/jpeg","image/png","image/gif"],b={roles:{public:{v1:"2023-10-31"}}}},1672:(e,t,s)=>{"use strict";s.d(t,{ob:()=>p,RP:()=>h,Lb:()=>d,iY:()=>A,Sy:()=>S,WW:()=>o,G8:()=>l,Nc:()=>r,Sk:()=>x,U$:()=>y,sg:()=>f,tH:()=>C,Pt:()=>m,QD:()=>b,f7:()=>P,FL:()=>c,PJ:()=>_});var i=s(1319);function r(e){return e.full_name||e.email||e.username}const n=97,a=2;function o(e,t){if(t&&t.color)return t.color;const s=r(e).codePointAt(0)||n;return i.VISUALIZATION_COLORS[s%i.VISUALIZATION_COLORS.length]}function l(e,t){if(t&&t.initials)return t.initials;const s=r(e).split(" "),i=Math.min(a,s.length);return s.splice(i,s.length),s.map((e=>e.substring(0,1))).join("")}const u=["reserved","native"];function c(e){return"anonymous"===e.authentication_provider.type}function d(e){return!c(e)&&"http"!==e.authentication_provider.type}function h(e){return u.includes(e.authentication_realm.type)&&!c(e)}function p(e,t){return"native"===e.authentication_realm.type&&t.management.security.users}var g=s(770),v=s(5008);function f(e){var t,s;return null===(t=null===(s=e.transient_metadata)||void 0===s?void 0:s.enabled)||void 0===t||t}function m(e){var t,s;return null!==(t=null===(s=e.metadata)||void 0===s?void 0:s._reserved)&&void 0!==t&&t}function y(e){var t,s;return null!==(t=null===(s=e.metadata)||void 0===s?void 0:s._deprecated)&&void 0!==t&&t}function b(e){var t,s;return null!==(t=m(e)&&(null===(s=e.name)||void 0===s?void 0:s.endsWith("_system")))&&void 0!==t&&t}function x(e){var t,s;return null!==(t=m(e)&&((null===(s=e.name)||void 0===s?void 0:s.endsWith("_admin"))||"superuser"===e.name)||P(e))&&void 0!==t&&t}function S(e){return v.i18n.translate("xpack.security.common.extendedRoleDeprecationNotice",{defaultMessage:"The {roleName} role is deprecated. {reason}",values:{roleName:e.name,reason:w(e)}})}function P(e){var t,s;return null!==(t=null===(s=e.kibana)||void 0===s?void 0:s.some((e=>e.base.includes("*"))))&&void 0!==t&&t}function C(e){var t,s;return m(e)||P(e)||(null!==(t=null===(s=e._transform_error)||void 0===s?void 0:s.length)&&void 0!==t?t:0)>0}function A(e){return(0,g.cloneDeep)(e)}function _(e){const t=A(e);return t.name="",t}function w(e){var t,s;return null!==(t=null===(s=e.metadata)||void 0===s?void 0:s._deprecated_reason)&&void 0!==t?t:""}},38:(e,t,s)=>{"use strict";s.d(t,{$c:()=>c,Qp:()=>o,gb:()=>l});var i=s(4286),r=s(409),n=s(6791);const a=(0,i.createContext)(void 0),o=({children:e,...t})=>{const s=(0,i.useContext)(a),r=(0,n.jsx)(u,{breadcrumb:t},e);return s?r:(0,n.jsx)(l,null,r)},l=({children:e,onChange:t})=>{const{services:s}=(0,r.useKibana)(),o=(0,i.useRef)([]),l=e=>{const i=e.map(((t,s)=>s===e.length-1?{...t,href:void 0}:t));t?t(i):s.chrome&&c(s.chrome)(i)};return(0,n.jsx)(a.Provider,{value:{parents:[],onMount:e=>{e.length>o.current.length&&(o.current=e,l(e))},onUnmount:e=>{e.length<o.current.length&&(o.current=e,l(e))}}},e)},u=({breadcrumb:e,children:t})=>{const{parents:s,onMount:r,onUnmount:o}=(0,i.useContext)(a),l=[...s,e];return(0,i.useEffect)((()=>(r(l),()=>o(s))),[e.text,e.href]),(0,n.jsx)(a.Provider,{value:{parents:l,onMount:r,onUnmount:o}},t)};function c(e,t=e.setBreadcrumbs){return s=>{t(s),0===s.length?e.docTitle.reset():e.docTitle.change(function(e,t=2){return e.slice(0,t).reverse().map((({text:e})=>e))}(s))}}},751:(e,t,s)=>{"use strict";s.d(t,{sH:()=>a.sH,Sh:()=>r,iZ:()=>a.iZ,Ee:()=>n,sb:()=>a.sb});var i=s(3160);const[r,n]=(0,i.A)((({userProfiles:e,users:t})=>({userProfiles:e,users:t})));var a=s(9942)},1221:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var i=s(409);function r(e){const{services:t}=(0,i.useKibana)();return e?t.application.capabilities[e]:t.application.capabilities}},9942:(e,t,s)=>{"use strict";s.d(t,{iZ:()=>u,sH:()=>o,sb:()=>c,uM:()=>l});var i=s(3160),r=s(1777),n=s(7880),a=s(751);const[o,l]=(0,i.A)((({authc:e})=>e));function u(){const e=l();return(0,r.A)(e.getCurrentUser,[e])}function c(e){const{userProfiles:t}=(0,a.Ee)(),s=(0,n.A)(t.dataUpdates$);return(0,r.A)((()=>t.getCurrent(e?{dataPath:e}:void 0)),[t,s])}},8666:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ALL_SPACES_ID:()=>A.wY,plugin:()=>ce});var i=s(8915),r=s(5008),n=s(4286),a=s.n(n),o=s(2874),l=s.n(o),u=s(409),c=s(482),d=s(5228),h=s(193),p=s(3991),g=s(751),v=s(38),f=s(6791);const m=Object.freeze({id:"security_account",create({application:e,authc:t,getStartServices:i,securityApiClients:n}){e.register({id:this.id,title:r.i18n.translate("xpack.security.account.breadcrumb",{defaultMessage:"User settings"}),visibleIn:[],appRoute:"/security/account",async mount({element:e,history:r}){const[[a],{AccountManagementPage:l}]=await Promise.all([i(),Promise.all([s.e(240),s.e(424),s.e(554)]).then(s.bind(s,8554))]);return(0,o.render)((0,f.jsx)(y,{services:a,history:r,authc:t,securityApiClients:n},(0,f.jsx)(l,null)),e),()=>(0,o.unmountComponentAtNode)(e)}})}}),y=({services:e,history:t,authc:s,securityApiClients:i,onChange:r,children:n})=>(0,f.jsx)(c.KibanaRenderContextProvider,e,(0,f.jsx)(u.KibanaContextProvider,{services:e},(0,f.jsx)(g.sH,{authc:s},(0,f.jsx)(g.Sh,i,(0,f.jsx)(h.Router,{history:t},(0,f.jsx)(v.gb,{onChange:r},(0,f.jsx)(p.BK,{core:e,security:{userProfiles:i.userProfiles},toMountPoint:d.Pv},n)))))));var b=s(770),x=s(190);class UserProfileAPIClient{constructor(e){(0,i.default)(this,"internalDataUpdates$",new x.Subject),(0,i.default)(this,"dataUpdates$",this.internalDataUpdates$.asObservable()),(0,i.default)(this,"_userProfile$",new x.BehaviorSubject(null)),(0,i.default)(this,"_enabled$",new x.BehaviorSubject(!1)),(0,i.default)(this,"_userProfileLoaded$",new x.BehaviorSubject(!1)),(0,i.default)(this,"userProfile$",this._userProfile$.asObservable()),(0,i.default)(this,"userProfileLoaded$",this._userProfileLoaded$.asObservable().pipe((0,x.distinctUntilChanged)())),(0,i.default)(this,"enabled$",void 0),this.http=e,this.enabled$=this.userProfileLoaded$.pipe((0,x.skipWhile)((e=>!e)),(0,x.switchMap)((()=>this._enabled$.asObservable())),(0,x.distinctUntilChanged)())}start(){this.getCurrent({dataPath:"avatar,userSettings"}).catch((()=>{}))}getCurrent(e){return this.http.get("/internal/security/user_profile",{query:{dataPath:null==e?void 0:e.dataPath}}).then((e=>{var t;const s=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:{},i=(0,b.merge)(this._userProfile$.getValue(),s);return this._userProfile$.next(i),this._enabled$.next(!0),this._userProfileLoaded$.next(!0),e})).catch((e=>{var t;const s=404===(null==e||null===(t=e.response)||void 0===t?void 0:t.status);return this._enabled$.next(!s),this._userProfileLoaded$.next(!0),Promise.reject(e)}))}bulkGet(e){return this.http.post("/internal/security/user_profile/_bulk_get",{body:JSON.stringify({...e,uids:[...e.uids]})})}suggest(e,t){return this.http.post(e,{body:JSON.stringify(t)})}update(e){const t=this._userProfile$.getValue();return this._userProfile$.next(e),this.http.post("/internal/security/user_profile/_data",{body:JSON.stringify(e)}).then((()=>{this.internalDataUpdates$.next(e)})).catch((e=>(this._userProfile$.next(t),Promise.reject(e))))}partialUpdate(e){const t=(0,b.merge)(this._userProfile$.getValue(),e);return this.update(t)}}const S=__kbnSharedDeps__.KbnCryptoBrowser;class AnalyticsService{constructor(){(0,i.default)(this,"securityLicense",void 0),(0,i.default)(this,"securityFeaturesSubscription",void 0)}setup({analytics:e,authc:t,cloudId:s,http:i,securityLicense:r}){this.securityLicense=r,!1===i.anonymousPaths.isAnonymous(window.location.pathname)&&function(e,t,s){e.registerContextProvider({name:"user_id",context$:(0,x.from)(t.getCurrentUser()).pipe((0,x.map)((e=>e.elastic_cloud_user?{userId:e.username,isElasticCloudUser:!0}:{userId:s?`${s}:${e.username}`:e.username,isElasticCloudUser:!1})),(0,x.map)((({userId:e,isElasticCloudUser:t})=>{return{userId:(s=e,(new S.Sha256).update(s,"utf8").digest("hex")),isElasticCloudUser:t};var s})),(0,x.catchError)((()=>(0,x.of)({userId:void 0,isElasticCloudUser:!1})))),schema:{userId:{type:"keyword",_meta:{description:"The user id scoped as seen by Cloud (hashed)",optional:!0}},isElasticCloudUser:{type:"boolean",_meta:{description:"`true` if the user is managed by ESS."}}}})}(e,t,s)}start({http:e}){this.securityFeaturesSubscription=this.securityLicense.features$.pipe((0,x.filter)((({allowLogin:e})=>e)),(0,x.throttleTime)(5e3),(0,x.switchMap)((async()=>{try{await AnalyticsService.recordAuthTypeAnalytics(e)}catch{}}))).subscribe()}stop(){this.securityFeaturesSubscription&&(this.securityFeaturesSubscription.unsubscribe(),this.securityFeaturesSubscription=void 0)}static async recordAuthTypeAnalytics(e){localStorage.setItem(AnalyticsService.AuthTypeInfoStorageKey,JSON.stringify(await e.post("/internal/security/analytics/_record_auth_type",{body:localStorage.getItem(AnalyticsService.AuthTypeInfoStorageKey)})))}}(0,i.default)(AnalyticsService,"AuthTypeInfoStorageKey","kibana.security.userAuthType");const P=Object.freeze({isEnabled:!1,accessURLParameters:null});class AnonymousAccessService{constructor(){(0,i.default)(this,"internalService",void 0)}setup({share:e}){e.setAnonymousAccessServiceProvider((()=>this.internalService))}start({http:e}){this.internalService={getCapabilities:()=>e.get("/internal/security/anonymous_access/capabilities"),getState:()=>e.anonymousPaths.isAnonymous(window.location.pathname)?Promise.resolve(P):e.get("/internal/security/anonymous_access/state").catch((()=>P))}}}const C=Object.freeze({id:"security_access_agreement",create({application:e,getStartServices:t}){e.register({id:this.id,title:r.i18n.translate("xpack.security.accessAgreementAppTitle",{defaultMessage:"Access Agreement"}),chromeless:!0,appRoute:"/security/access_agreement",async mount({element:e}){const[[i],{renderAccessAgreementPage:r}]=await Promise.all([t(),Promise.all([s.e(483),s.e(256),s.e(744)]).then(s.bind(s,7744))]);return r(i,{element:e},{http:i.http,notifications:i.notifications,fatalErrors:i.fatalErrors})}})}});var A=s(2787);const _=Object.freeze({id:"security_capture_url",create({application:e,fatalErrors:t,http:i}){i.anonymousPaths.register("/internal/security/capture-url"),e.register({id:this.id,title:"Capture URL",chromeless:!0,appRoute:"/internal/security/capture-url",async mount(){try{const{parseNextURL:e}=await Promise.resolve().then(s.t.bind(s,9433,23)),t=new URL(e(window.location.href,i.basePath.serverBasePath),window.location.origin);t.searchParams.append(A.pJ,window.location.hash),window.location.replace(t.toString())}catch(e){t.add(new Error(`Cannot parse current URL: ${e&&e.message}.`))}return()=>{}}})}}),w=Object.freeze({id:"security_logged_out",create({application:e,http:t,getStartServices:i}){t.anonymousPaths.register("/security/logged_out"),e.register({id:this.id,title:r.i18n.translate("xpack.security.loggedOutAppTitle",{defaultMessage:"Logged out"}),chromeless:!0,appRoute:"/security/logged_out",async mount({element:e}){const[[t],{renderLoggedOutPage:r}]=await Promise.all([i(),Promise.all([s.e(483),s.e(716)]).then(s.bind(s,2716))]);return r(t,{element:e},{basePath:t.http.basePath,customBranding:t.customBranding})}})}}),j=Object.freeze({id:"security_login",create({application:e,http:t,getStartServices:i,config:n}){t.anonymousPaths.register("/login"),e.register({id:this.id,title:r.i18n.translate("xpack.security.loginAppTitle",{defaultMessage:"Login"}),chromeless:!0,appRoute:"/login",async mount({element:e}){const[[t],{renderLoginPage:r}]=await Promise.all([i(),Promise.all([s.e(483),s.e(256),s.e(694)]).then(s.bind(s,1694))]);return r(t,{element:e},{customBranding:t.customBranding,http:t.http,notifications:t.notifications,fatalErrors:t.fatalErrors,loginAssistanceMessage:n.loginAssistanceMessage,sameSiteCookies:n.sameSiteCookies})}})}}),R=Object.freeze({id:"security_logout",create({application:e,http:t}){t.anonymousPaths.register("/logout"),e.register({id:this.id,title:r.i18n.translate("xpack.security.logoutAppTitle",{defaultMessage:"Logout"}),chromeless:!0,appRoute:"/logout",mount:async()=>(window.sessionStorage.clear(),window.localStorage.removeItem(AnalyticsService.AuthTypeInfoStorageKey),window.location.href=t.basePath.prepend(`/api/security/logout${window.location.search}`),()=>{})})}}),E=Object.freeze({id:"security_overwritten_session",create({application:e,authc:t,getStartServices:i}){e.register({id:this.id,title:r.i18n.translate("xpack.security.overwrittenSessionAppTitle",{defaultMessage:"Overwritten Session"}),chromeless:!0,appRoute:"/security/overwritten_session",async mount({element:e}){const[[r],{renderOverwrittenSessionPage:n}]=await Promise.all([i(),Promise.all([s.e(483),s.e(704)]).then(s.bind(s,9704))]);return n(r,{element:e},{authc:t,basePath:r.http.basePath})}})}});class AuthenticationService{setup({application:e,fatalErrors:t,config:s,getStartServices:i,http:r}){const n=async()=>await r.get("/internal/security/me",{asSystemRequest:!0});return C.create({application:e,getStartServices:i}),_.create({application:e,fatalErrors:t,http:r}),j.create({application:e,config:s,getStartServices:i,http:r}),R.create({application:e,http:r}),w.create({application:e,getStartServices:i,http:r}),E.create({application:e,authc:{getCurrentUser:n},getStartServices:i}),{getCurrentUser:n,areAPIKeysEnabled:async()=>(await r.get("/internal/security/api_key/_enabled")).apiKeysEnabled}}}var I=s(9942),M=s(8558);const k=Object.freeze({id:"api_keys",create({authc:e,getStartServices:t}){return{id:this.id,order:30,title:r.i18n.translate("xpack.security.management.apiKeysTitle",{defaultMessage:"API keys"}),async mount({element:i,setBreadcrumbs:n,history:a}){const[[l],{APIKeysGridPage:u}]=await Promise.all([t(),Promise.all([s.e(240),s.e(424),s.e(728)]).then(s.bind(s,2728))]);return(0,o.render)((0,f.jsx)(T,{services:l,history:a,authc:e,onChange:(0,v.$c)(l.chrome,n)},(0,f.jsx)(v.Qp,{text:r.i18n.translate("xpack.security.management.apiKeysTitle",{defaultMessage:"API keys"}),href:"/"},(0,f.jsx)(u,null))),i),()=>{(0,o.unmountComponentAtNode)(i)}}}}}),T=({services:e,history:t,authc:s,onChange:i,children:n})=>(0,f.jsx)(c.KibanaRenderContextProvider,e,(0,f.jsx)(u.KibanaContextProvider,{services:e},(0,f.jsx)(I.sH,{authc:s},(0,f.jsx)(h.Router,{history:t},(0,f.jsx)(M.G,{featureId:"api_keys",tooltip:r.i18n.translate("xpack.security.management.api_keys.readonlyTooltip",{defaultMessage:"Unable to create or edit API keys"})}),(0,f.jsx)(v.gb,{onChange:i},n)))));var U=s(1493),L=s(2527);const $=Object.freeze({id:"role_mappings",create({getStartServices:e}){const t=r.i18n.translate("xpack.security.management.roleMappingsTitle",{defaultMessage:"Role Mappings"});return{id:this.id,order:40,title:t,async mount({element:i,setBreadcrumbs:n,history:a}){const[[l],{RoleMappingsGridPage:d},{EditRoleMappingPage:p},{RoleMappingsAPIClient:g},{RolesAPIClient:m},{SecurityFeaturesAPIClient:y}]=await Promise.all([e(),Promise.all([s.e(240),s.e(362)]).then(s.bind(s,9362)),s.e(502).then(s.bind(s,6502)),s.e(648).then(s.bind(s,3648)),Promise.resolve().then(s.bind(s,1726)),s.e(482).then(s.bind(s,3482))]);l.chrome.docTitle.change(t);const b=new g(l.http),x=new y(l.http),S=({action:e})=>{const{name:t}=(0,U.useParams)(),s=t?(0,L.R)(t):void 0,i="edit"===e&&t&&s?{text:s,href:`/edit/${encodeURIComponent(t)}`}:{text:r.i18n.translate("xpack.security.roleMappings.createBreadcrumb",{defaultMessage:"Create"})};return(0,f.jsx)(v.Qp,{text:i.text,href:i.href},(0,f.jsx)(p,{action:e,name:s,roleMappingsAPI:b,securityFeaturesAPI:x,rolesAPIClient:new m(l.http),notifications:l.notifications,docLinks:l.docLinks,history:a,readOnly:!l.application.capabilities.role_mappings.save}))};return(0,o.render)((0,f.jsx)(c.KibanaRenderContextProvider,l,(0,f.jsx)(u.KibanaContextProvider,{services:l},(0,f.jsx)(h.Router,{history:a},(0,f.jsx)(M.G,{"data-test-subj":"readOnlyBadge",featureId:"role_mappings",tooltip:r.i18n.translate("xpack.security.management.roleMappings.readonlyTooltip",{defaultMessage:"Unable to create or edit role mappings"})}),(0,f.jsx)(v.gb,{onChange:(0,v.$c)(l.chrome,n)},(0,f.jsx)(v.Qp,{text:t,href:"/"},(0,f.jsx)(h.Route,{path:["/",""],exact:!0},(0,f.jsx)(d,{notifications:l.notifications,rolesAPIClient:new m(l.http),roleMappingsAPI:b,securityFeaturesAPI:x,docLinks:l.docLinks,history:a,navigateToApp:l.application.navigateToApp,readOnly:!l.application.capabilities.role_mappings.save})),(0,f.jsx)(h.Route,{path:"/edit/:name?"},(0,f.jsx)(S,{action:"edit"})),(0,f.jsx)(h.Route,{path:"/clone/:name"},(0,f.jsx)(S,{action:"clone"}))))))),i),()=>{(0,o.unmountComponentAtNode)(i)}}}}});var O=s(1726),F=s(5587);class ManagementService{constructor(e){var t,s;(0,i.default)(this,"license",void 0),(0,i.default)(this,"licenseFeaturesSubscription",void 0),(0,i.default)(this,"securitySection",void 0),(0,i.default)(this,"userManagementEnabled",void 0),(0,i.default)(this,"roleManagementEnabled",void 0),(0,i.default)(this,"roleMappingManagementEnabled",void 0),this.userManagementEnabled=!1!==(null===(t=e.ui)||void 0===t?void 0:t.userManagementEnabled),this.roleManagementEnabled=!1!==e.roleManagementEnabled,this.roleMappingManagementEnabled=!1!==(null===(s=e.ui)||void 0===s?void 0:s.roleMappingManagementEnabled)}setup({getStartServices:e,management:t,authc:s,license:i,fatalErrors:r,buildFlavor:n}){this.license=i,this.securitySection=t.sections.section.security,this.userManagementEnabled&&this.securitySection.registerApp(F.usersManagementApp.create({authc:s,getStartServices:e})),this.roleManagementEnabled&&this.securitySection.registerApp(O.rolesManagementApp.create({fatalErrors:r,license:i,getStartServices:e,buildFlavor:n})),this.securitySection.registerApp(k.create({authc:s,getStartServices:e})),this.roleMappingManagementEnabled&&this.securitySection.registerApp($.create({getStartServices:e}))}start({capabilities:e}){this.licenseFeaturesSubscription=this.license.features$.subscribe((t=>{const s=this.securitySection,i=[[s.getApp(k.id),t.showLinks]];this.userManagementEnabled&&i.push([s.getApp(F.usersManagementApp.id),t.showLinks]),this.roleManagementEnabled&&i.push([s.getApp(O.rolesManagementApp.id),t.showLinks]),this.roleMappingManagementEnabled&&i.push([s.getApp($.id),t.showLinks&&t.showRoleMappingsManagement]);for(const[t,s]of i)!0===e.management.security[t.id]?t.enabled!==s&&(s?t.enable():t.disable()):t.disable()}))}stop(){this.licenseFeaturesSubscription&&(this.licenseFeaturesSubscription.unsubscribe(),this.licenseFeaturesSubscription=void 0)}}var N=s(869);class AuthorizationService{setup({config:e,http:t}){const s=new O.RolesAPIClient(t),i=new O.PrivilegesAPIClient(t);return{isRoleManagementEnabled:()=>e.roleManagementEnabled,roles:{getRoles:s.getRoles,getRole:s.getRole,deleteRole:s.deleteRole,saveRole:s.saveRole,bulkUpdateRoles:s.bulkUpdateRoles},privileges:{getAll:i.getAll.bind(i)}}}}var B=s(6183),D=s(1243);const z=({children:e,...t})=>{if((e=>void 0!==e.coreStart)(t)){const{coreStart:s,...i}=t,r=(0,f.jsx)(B.V,i,e);return(0,f.jsx)(D.m4,{coreStart:s},r)}const{navigateToUrl:s,currentAppId:i,...r}=t,n=(0,f.jsx)(B.V,r,e);return(0,f.jsx)(D.gx,{currentAppId:i,navigateToUrl:s},n)};var K=s(1319),V=s(7880),H=s(5879),W=s(8856),G=s(1672);const q=({items:e,closePopover:t})=>(0,f.jsx)(a().Fragment,null,(0,f.jsx)(K.EuiContextMenuPanel,null,e.map(((e,s)=>e.content?(0,f.jsx)(n.Fragment,{key:s},"function"==typeof e.content?e.content({closePopover:t}):e.content):(0,f.jsx)(K.EuiContextMenuItem,{key:s,icon:e.icon,size:"s",href:e.href,"data-test-subj":e["data-test-subj"]},e.name))))),J=({editProfileUrl:e,logoutUrl:t,userMenuLinks$:s})=>{const i=(0,V.A)(s,[]),[a,o]=(0,n.useState)(!1),l=(0,g.sb)("avatar,userSettings"),u=(0,g.iZ)(),c=u.value?(0,G.Nc)(u.value):"",d=(0,f.jsx)(K.EuiHeaderSectionItemButton,{"aria-controls":"headerUserMenu","aria-expanded":a,"aria-haspopup":"true","aria-label":r.i18n.translate("xpack.security.navControlComponent.accountMenuAriaLabel",{defaultMessage:"Account menu"}),onClick:()=>o((e=>!!u.value&&!e)),"data-test-subj":"userMenuButton",style:{lineHeight:"normal"}},l.value?(0,f.jsx)(W.H,{user:l.value.user,avatar:l.value.data.avatar,size:"s","data-test-subj":"userMenuAvatar"}):u.value&&l.error?(0,f.jsx)(W.H,{user:u.value,size:"s","data-test-subj":"userMenuAvatar"}):(0,f.jsx)(K.EuiLoadingSpinner,{size:"m"})),h=[];if(i.length){const e=i.sort((({order:e=1/0},{order:t=1/0})=>e-t)).map((({label:e,iconType:t,href:s,content:i})=>({name:e,icon:(0,f.jsx)(K.EuiIcon,{type:t,size:"m"}),href:s,"data-test-subj":`userMenuLink__${e}`,content:i})));h.push(...e)}const p=!!u.value&&(0,G.FL)(u.value),v=i.some((({setAsProfile:e})=>!0===e));if(!p&&!v){const t={name:(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.navControlComponent.editProfileLinkText",defaultMessage:"Edit profile"}),icon:(0,f.jsx)(K.EuiIcon,{type:"user",size:"m"}),href:e,onClick:()=>{o(!1)},"data-test-subj":"profileLink"};h.unshift(t)}return h.push({name:p?(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.navControlComponent.loginLinkText",defaultMessage:"Log in"}):(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.navControlComponent.logoutLinkText",defaultMessage:"Log out"}),icon:(0,f.jsx)(K.EuiIcon,{type:"exit",size:"m"}),href:t,"data-test-subj":"logoutLink"}),(0,f.jsx)(K.EuiPopover,{id:"headerUserMenu",ownFocus:!0,button:d,isOpen:a,anchorPosition:"downRight",repositionOnScroll:!0,closePopover:()=>o(!1),panelPaddingSize:"none",buffer:0},(0,f.jsx)(K.EuiContextMenu,{className:"chrNavControl__userMenu",initialPanelId:0,panels:[{id:0,title:c,content:(0,f.jsx)(q,{items:h,closePopover:()=>o(!1)})}],"data-test-subj":"userMenu"}))};class SecurityNavControlService{constructor(){(0,i.default)(this,"securityLicense",void 0),(0,i.default)(this,"logoutUrl",void 0),(0,i.default)(this,"securityApiClients",void 0),(0,i.default)(this,"navControlRegistered",void 0),(0,i.default)(this,"securityFeaturesSubscription",void 0),(0,i.default)(this,"stop$",new x.ReplaySubject(1)),(0,i.default)(this,"userMenuLinks$",new x.BehaviorSubject([]))}setup({securityLicense:e,logoutUrl:t,securityApiClients:s}){this.securityLicense=e,this.logoutUrl=t,this.securityApiClients=s}start({core:e,authc:t}){return this.securityFeaturesSubscription=this.securityLicense.features$.subscribe((({showLinks:s})=>{!e.http.anonymousPaths.isAnonymous(window.location.pathname)&&s&&!this.navControlRegistered&&this.registerSecurityNavControl(e,t)})),{getUserMenuLinks$:()=>this.userMenuLinks$.pipe((0,x.map)(this.sortUserMenuLinks),(0,x.takeUntil)(this.stop$)),addUserMenuLinks:e=>{const t=this.userMenuLinks$.value,s=t.find((({setAsProfile:e})=>!0===e)),i=e.filter((({setAsProfile:e})=>!0===e)).length;if(s&&i>0)throw new Error(`Only one custom profile link can be set. A custom profile link named ${s.label} (${s.href}) already exists`);if(i>1)throw new Error(`Only one custom profile link can be passed at a time (found ${i})`);const r=[...t,...e];this.userMenuLinks$.next(r)}}}stop(){this.securityFeaturesSubscription&&(this.securityFeaturesSubscription.unsubscribe(),this.securityFeaturesSubscription=void 0),this.navControlRegistered=!1,this.stop$.next()}registerSecurityNavControl(e,t){e.chrome.navControls.registerRight({order:4e3,mount:s=>(l().render((0,f.jsx)(Q,{services:e,authc:t,securityApiClients:this.securityApiClients},(0,f.jsx)(J,{editProfileUrl:e.http.basePath.prepend("/security/account"),logoutUrl:this.logoutUrl,userMenuLinks$:this.userMenuLinks$})),s),()=>l().unmountComponentAtNode(s))}),this.navControlRegistered=!0}sortUserMenuLinks(e){return(0,b.sortBy)(e,"order")}}const Q=({authc:e,services:t,securityApiClients:s,children:i})=>(0,f.jsx)(c.KibanaRenderContextProvider,t,(0,f.jsx)(u.KibanaContextProvider,{services:t},(0,f.jsx)(g.sH,{authc:e},(0,f.jsx)(g.Sh,s,(0,f.jsx)(z,{coreStart:t},i))))),Z=r.i18n.translate("xpack.security.checkup.insecureClusterTitle",{defaultMessage:"Your data is not secure"}),Y=Object.freeze({displayAlert:!1});class SecurityCheckupService{constructor(e,t){(0,i.default)(this,"enabled",void 0),(0,i.default)(this,"alertVisibility$",void 0),(0,i.default)(this,"storage",void 0),(0,i.default)(this,"alertToast",void 0),(0,i.default)(this,"storageKey",void 0),this.storage=t,this.enabled=e.showInsecureClusterWarning,this.alertVisibility$=new x.BehaviorSubject(this.enabled)}setup({http:e}){const t=e.basePath.serverBasePath;this.storageKey=`insecureClusterWarningVisibility${t}`,this.enabled=this.enabled&&this.getPersistedVisibilityPreference(),this.alertVisibility$.next(this.enabled)}start(e){this.enabled&&this.initializeAlert(e)}initializeAlert({http:e,notifications:t,...s}){const i=(0,x.from)(this.getSecurityCheckupState(e));(0,x.combineLatest)([i,this.alertVisibility$]).pipe((0,x.map)((([{displayAlert:e},t])=>e&&t)),(0,x.distinctUntilChanged)()).subscribe((e=>{var i,a;e&&!this.alertToast?this.alertToast=t.toasts.addWarning({title:Z,text:(i=s,a=e=>this.setAlertVisibility(!1,e),e=>{const{docLinks:t,...s}=i;return(0,o.render)((0,f.jsx)((()=>{const[e,i]=(0,n.useState)(!1),o=`${t.links.security.elasticsearchEnableSecurity}?blade=kibanasecuritymessage`;return(0,f.jsx)(c.KibanaRenderContextProvider,s,(0,f.jsx)("div",{"data-test-subj":"insecureClusterAlertText"},(0,f.jsx)(K.EuiText,{size:"s"},(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.checkup.insecureClusterMessage",defaultMessage:"Don’t lose one bit. Enable our free security features."})),(0,f.jsx)(K.EuiSpacer,null),(0,f.jsx)(K.EuiCheckbox,{id:"persistDismissedAlertPreference",checked:e,onChange:e=>i(e.target.checked),label:r.i18n.translate("xpack.security.checkup.dontShowAgain",{defaultMessage:"Don't show again"})}),(0,f.jsx)(K.EuiSpacer,null),(0,f.jsx)(K.EuiFlexGroup,{justifyContent:"spaceBetween"},(0,f.jsx)(K.EuiFlexItem,{grow:!1},(0,f.jsx)(K.EuiButton,{size:"s",color:"primary",fill:!0,href:o,target:"_blank","data-test-subj":"learnMoreButton"},r.i18n.translate("xpack.security.checkup.enableButtonText",{defaultMessage:"Enable security"}))),(0,f.jsx)(K.EuiFlexItem,{grow:!1},(0,f.jsx)(K.EuiButton,{size:"s",onClick:()=>a(e),"data-test-subj":"dismissAlertButton"},r.i18n.translate("xpack.security.checkup.dismissButtonText",{defaultMessage:"Dismiss"}))))))}),null),e),()=>(0,o.unmountComponentAtNode)(e)}),iconType:"warning"},{toastLifeTimeMs:864e6}):!e&&this.alertToast&&(t.toasts.remove(this.alertToast),this.alertToast=void 0)}))}getSecurityCheckupState(e){return e.anonymousPaths.isAnonymous(window.location.pathname)?Promise.resolve(Y):e.get("/internal/security/security_checkup/state").catch((()=>Y))}setAlertVisibility(e,t){this.enabled&&(this.alertVisibility$.next(e),t&&this.setPersistedVisibilityPreference(e))}getPersistedVisibilityPreference(){var e;const t=null!==(e=this.storage.getItem(this.storageKey))&&void 0!==e?e:"{}";try{const{show:e=!0}=JSON.parse(t);return e}catch(e){return!0}}setPersistedVisibilityPreference(e){this.storage.setItem(this.storageKey,JSON.stringify({show:e}))}}class SessionExpired{constructor(e,t,s){this.application=e,this.logoutUrl=t,this.tenant=s}logout(e){const t=(()=>{const{location:e}=window,t=encodeURIComponent(`${e.pathname}${e.search}${e.hash}`);return`&${A.Vd}=${t}`})(),s=(()=>{const e=`${this.tenant}/session_provider`,t=sessionStorage.getItem(e);return t?`&${A.QI}=${encodeURIComponent(t)}`:""})();this.application.navigateToUrl(`${this.logoutUrl}?${A.nz}=${e}${t}${s}`,{forceRedirect:!0,skipAppLeave:!0})}}var X=s(5053);const ee=({sessionState$:e,onExtend:t})=>{const s=(0,V.A)(e),[{loading:i},r]=(0,X.default)(t);if(!s||!s.expiresInMs)return null;const n=Math.max(s.expiresInMs-A.rX,0)/1e3,o=(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.sessionExpirationToast.body",defaultMessage:"You will be logged out {timeout}.",values:{timeout:(0,f.jsx)(H.FormattedRelativeTime,{value:n,updateIntervalInSeconds:1})}});return s.canBeExtended?(0,f.jsx)(a().Fragment,null,o,(0,f.jsx)(K.EuiSpacer,{size:"m"}),(0,f.jsx)(K.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},(0,f.jsx)(K.EuiFlexItem,{grow:!1},(0,f.jsx)(K.EuiButton,{size:"s",color:"warning",isLoading:i,onClick:r},(0,f.jsx)(H.FormattedMessage,{id:"xpack.security.sessionExpirationToast.extendButton",defaultMessage:"Stay logged in"}))))):o};let te=function(e){return e.SESSION_EXPIRED="SESSION_EXPIRED",e.CONCURRENCY_LIMIT="CONCURRENCY_LIMIT",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.LOGGED_OUT="LOGGED_OUT",e.UNAUTHENTICATED="UNAUTHENTICATED",e}({});var se=s(3721);class SessionTimeout{constructor(e,t,s,n,a){(0,i.default)(this,"channel",void 0),(0,i.default)(this,"isVisible","hidden"!==document.visibilityState),(0,i.default)(this,"isFetchingSessionInfo",!1),(0,i.default)(this,"consecutiveErrorCount",0),(0,i.default)(this,"snoozedWarningState",void 0),(0,i.default)(this,"sessionState$",new x.BehaviorSubject({lastExtensionTime:0,expiresInMs:null,canBeExtended:!1})),(0,i.default)(this,"subscription",void 0),(0,i.default)(this,"warningToast",void 0),(0,i.default)(this,"stopActivityMonitor",void 0),(0,i.default)(this,"stopVisibilityMonitor",void 0),(0,i.default)(this,"removeHttpInterceptor",void 0),(0,i.default)(this,"stopRefreshTimer",void 0),(0,i.default)(this,"stopWarningTimer",void 0),(0,i.default)(this,"stopLogoutTimer",void 0),(0,i.default)(this,"handleChannelMessage",(e=>{this.isSessionState(e.data)&&this.sessionState$.next(e.data)})),(0,i.default)(this,"isSessionState",(e=>"object"==typeof e&&Object.hasOwn(null!=e?e:{},"canBeExtended"))),(0,i.default)(this,"handleHttpRequest",(e=>{if(-1===e.path.indexOf("://")&&!e.path.startsWith("//"))return e.asSystemRequest?void 0:{...e,asSystemRequest:!this.isVisible}})),(0,i.default)(this,"handleUserActivity",(()=>{this.shouldExtend()&&this.fetchSessionInfo(!0)})),(0,i.default)(this,"handleVisibilityChange",(e=>{this.isVisible=e,e&&this.handleUserActivity()})),(0,i.default)(this,"resetTimers",(({lastExtensionTime:e,expiresInMs:t})=>{var s,i,r;if(this.stopRefreshTimer=null===(s=this.stopRefreshTimer)||void 0===s?void 0:s.call(this),this.stopWarningTimer=null===(i=this.stopWarningTimer)||void 0===i?void 0:i.call(this),this.stopLogoutTimer=null===(r=this.stopLogoutTimer)||void 0===r?void 0:r.call(this),null!==t){const s=Math.max(t-A.rX,0),i=Math.max(s-A.Vz,this.snoozedWarningState?this.snoozedWarningState.lastExtensionTime+this.snoozedWarningState.expiresInMs-A.rX-e:0,0),r=i-A.B;this.stopLogoutTimer=ie((()=>this.sessionExpired.logout(te.SESSION_EXPIRED)),s),i>0&&this.hideWarning(),i<s&&(this.stopWarningTimer=ie(this.showWarning,i)),r>0&&r<s&&(this.stopRefreshTimer=ie(this.fetchSessionInfo,r))}})),(0,i.default)(this,"toggleEventHandlers",(({expiresInMs:e,canBeExtended:t})=>{var s,i,r;null!==e?(t&&!this.stopActivityMonitor&&(this.stopActivityMonitor=function(e){const t=["mousemove","mousedown","wheel","touchstart","keydown"];for(const s of t)window.addEventListener(s,e);return()=>{for(const s of t)window.removeEventListener(s,e)}}(this.handleUserActivity)),this.removeHttpInterceptor||(this.removeHttpInterceptor=this.http.intercept({request:this.handleHttpRequest})),this.stopVisibilityMonitor||(this.stopVisibilityMonitor=function(e){const t=()=>e("hidden"!==document.visibilityState);return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}(this.handleVisibilityChange))):(this.removeHttpInterceptor=null===(s=this.removeHttpInterceptor)||void 0===s?void 0:s.call(this),this.stopActivityMonitor=null===(i=this.stopActivityMonitor)||void 0===i?void 0:i.call(this),this.stopVisibilityMonitor=null===(r=this.stopVisibilityMonitor)||void 0===r?void 0:r.call(this))})),(0,i.default)(this,"fetchSessionInfo",(async(e=!1)=>{this.isFetchingSessionInfo=!0;try{const t=await this.http.fetch(A.LV,{method:e?"POST":"GET",asSystemRequest:!e});if(this.consecutiveErrorCount=0,t){const{expiresInMs:e,canBeExtended:s}=t,i={lastExtensionTime:Date.now(),expiresInMs:e,canBeExtended:s};return this.sessionState$.next(i),this.channel&&this.channel.postMessage(i),i}}catch(e){this.consecutiveErrorCount++}finally{this.isFetchingSessionInfo=!1}})),(0,i.default)(this,"showWarning",(()=>{if(!this.warningToast){const e=async()=>{const{canBeExtended:e}=this.sessionState$.getValue();e&&await this.fetchSessionInfo(!0)},t=()=>(this.hideWarning(!0),e()),s=((e,t,s,i)=>({color:"warning",iconType:"clock",title:r.i18n.translate("xpack.security.sessionExpirationToast.title",{defaultMessage:"Session timeout"}),text:(0,d.Pv)((0,f.jsx)(ee,{sessionState$:t,onExtend:s}),e),onClose:i,toastLifeTimeMs:2147483647}))(this.startServices,this.sessionState$,e,t);this.warningToast=this.notifications.toasts.add(s)}})),(0,i.default)(this,"hideWarning",((e=!1)=>{this.warningToast&&(this.notifications.toasts.remove(this.warningToast),this.warningToast=void 0,e&&(this.snoozedWarningState=this.sessionState$.getValue()))})),this.startServices=e,this.notifications=t,this.sessionExpired=s,this.http=n,this.tenant=a}async start(){if(!this.http.anonymousPaths.isAnonymous(window.location.pathname)){this.subscription=this.sessionState$.pipe((0,x.skip)(1),(0,x.throttleTime)(1e3),(0,x.tap)(this.toggleEventHandlers)).subscribe(this.resetTimers);try{this.channel=new BroadcastChannel(`${this.tenant}/session_timeout`),this.channel.onmessage=e=>this.handleChannelMessage(e)}catch(e){se.warn("Failed to load broadcast channel. Session management will not be kept in sync when multiple tabs are loaded.",e)}return this.fetchSessionInfo()}}stop(){var e,t;const s={lastExtensionTime:0,expiresInMs:null,canBeExtended:!1};this.toggleEventHandlers(s),this.resetTimers(s),null===(e=this.subscription)||void 0===e||e.unsubscribe(),null===(t=this.channel)||void 0===t||t.close()}shouldExtend(){const{lastExtensionTime:e}=this.sessionState$.getValue();return!this.isFetchingSessionInfo&&!this.warningToast&&Date.now()>e+A.dZ*Math.exp(this.consecutiveErrorCount)}}function ie(e,t,s){var i;const r=2147483647;let n;return(s=null!==(i=s)&&void 0!==i?i:e=>n=e)(t>r?window.setTimeout((()=>ie(e,t-r,s)),r):window.setTimeout(e,t)),()=>clearTimeout(n)}class UnauthorizedResponseHttpInterceptor{constructor(e,t){this.sessionExpired=e,this.anonymousPaths=t}responseError(e,t){if(this.anonymousPaths.isAnonymous(window.location.pathname))return;if("omit"===e.request.credentials)return;const{response:s}=e;if(s&&401===s.status){const e=s.headers.get(A.x);this.sessionExpired.logout(e===te.SESSION_EXPIRED||e===te.CONCURRENCY_LIMIT?e:te.AUTHENTICATION_ERROR),t.halt()}}}var re=s(3185);class SuspenseErrorBoundary extends n.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{error:null})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){const{notifications:t}=this.props;if(t){const s=r.i18n.translate("xpack.security.uiApi.errorBoundaryToastTitle",{defaultMessage:"Failed to load Kibana asset"}),i=r.i18n.translate("xpack.security.uiApi.errorBoundaryToastMessage",{defaultMessage:"Reload page to continue."});t.toasts.addError(e,{title:s,toastMessage:i})}}render(){const{children:e,notifications:t}=this.props,{error:s}=this.state;return!t||s?null:(0,f.jsx)(n.Suspense,{fallback:(0,f.jsx)(K.EuiLoadingSpinner,null)},e)}}const ne=({fn:e,core:t,props:s})=>{const{notifications:i}=t,r=(0,n.useMemo)((()=>(0,n.lazy)((()=>e().then((e=>({default:e})))))),[e]);return i?(0,f.jsx)(SuspenseErrorBoundary,{notifications:i},(0,f.jsx)(r,s)):null},ae=async()=>{const{PersonalInfo:e}=await s.e(643).then(s.bind(s,2643));return t=>(0,f.jsx)(e,t)},oe=({core:e})=>{function t(t){return s=>(0,f.jsx)(ne,{fn:t,core:e,props:s})}return{getPersonalInfo:t(ae),getChangePassword:t((()=>(async e=>{const{ChangePassword:t}=await s.e(39).then(s.bind(s,3039));return s=>(0,f.jsx)(t,(0,re.default)({notifications:e.notifications,userAPIClient:new F.UserAPIClient(e.http)},s))})(e)))}},le=({core:e})=>({components:oe({core:e})});class SecurityLicenseService{constructor(){(0,i.default)(this,"licenseSubscription",void 0)}setup({license$:e}){let t;return this.licenseSubscription=e.subscribe((e=>{t=e})),{license:Object.freeze({isLicenseAvailable:()=>{var e,s;return null!==(e=null===(s=t)||void 0===s?void 0:s.isAvailable)&&void 0!==e&&e},getLicenseType:()=>{var e,s;return null!==(e=null===(s=t)||void 0===s?void 0:s.type)&&void 0!==e?e:void 0},getUnavailableReason:()=>{var e;return null===(e=t)||void 0===e?void 0:e.getUnavailableReason()},isEnabled:()=>this.isSecurityEnabledFromRawLicense(t),hasAtLeast:e=>{var s;return null===(s=t)||void 0===s?void 0:s.hasAtLeast(e)},getFeatures:()=>this.calculateFeaturesFromRawLicense(t),features$:e.pipe((0,x.map)((e=>this.calculateFeaturesFromRawLicense(e))))})}}stop(){this.licenseSubscription&&(this.licenseSubscription.unsubscribe(),this.licenseSubscription=void 0)}isSecurityEnabledFromRawLicense(e){if(!e)return!1;const t=e.getFeature("security");return void 0!==t&&t.isAvailable&&t.isEnabled}calculateFeaturesFromRawLicense(e){if(null==e||!e.isAvailable)return{showLogin:!0,allowLogin:!1,showLinks:!1,showRoleMappingsManagement:!1,allowAccessAgreement:!1,allowAuditLogging:!1,allowRoleDocumentLevelSecurity:!1,allowRoleFieldLevelSecurity:!1,allowRoleRemoteIndexPrivileges:!1,allowRemoteClusterPrivileges:!1,allowRbac:!1,allowSubFeaturePrivileges:!1,allowUserProfileCollaboration:!1,allowFips:!1,layout:void 0===e||null!=e&&e.isAvailable?"error-es-unavailable":"error-xpack-unavailable"};if(!this.isSecurityEnabledFromRawLicense(e))return{showLogin:!1,allowLogin:!1,showLinks:!1,showRoleMappingsManagement:!1,allowAccessAgreement:!1,allowAuditLogging:!1,allowRoleDocumentLevelSecurity:!1,allowRoleFieldLevelSecurity:!1,allowRoleRemoteIndexPrivileges:!1,allowRemoteClusterPrivileges:!1,allowRbac:!1,allowSubFeaturePrivileges:!1,allowUserProfileCollaboration:!1,allowFips:!1};const t=e.hasAtLeast("standard"),s=e.hasAtLeast("gold"),i=e.hasAtLeast("platinum");return{showLogin:!0,allowLogin:!0,showLinks:!0,showRoleMappingsManagement:s,allowAccessAgreement:s,allowAuditLogging:s,allowSubFeaturePrivileges:s,allowRoleDocumentLevelSecurity:i,allowRoleFieldLevelSecurity:i,allowRoleRemoteIndexPrivileges:i,allowRemoteClusterPrivileges:i,allowRbac:!0,allowUserProfileCollaboration:t,allowFips:i}}}class SecurityPlugin{constructor(e){(0,i.default)(this,"config",void 0),(0,i.default)(this,"sessionTimeout",void 0),(0,i.default)(this,"authenticationService",new AuthenticationService),(0,i.default)(this,"authorizationService",new AuthorizationService),(0,i.default)(this,"navControlService",void 0),(0,i.default)(this,"securityLicenseService",new SecurityLicenseService),(0,i.default)(this,"managementService",void 0),(0,i.default)(this,"securityCheckupService",void 0),(0,i.default)(this,"anonymousAccessService",new AnonymousAccessService),(0,i.default)(this,"analyticsService",new AnalyticsService),(0,i.default)(this,"authc",void 0),(0,i.default)(this,"authz",void 0),(0,i.default)(this,"securityApiClients",void 0),(0,i.default)(this,"buildFlavor",void 0),this.initializerContext=e,this.buildFlavor=e.env.packageInfo.buildFlavor,this.config=this.initializerContext.config.get(),this.securityCheckupService=new SecurityCheckupService(this.config,localStorage),this.navControlService=new SecurityNavControlService,this.managementService=new ManagementService(this.config)}setup(e,{cloud:t,home:s,licensing:i,management:n,share:a}){const{license:o}=this.securityLicenseService.setup({license$:i.license$});return this.securityCheckupService.setup({http:e.http}),this.authc=this.authenticationService.setup({application:e.application,fatalErrors:e.fatalErrors,config:this.config,getStartServices:e.getStartServices,http:e.http}),this.authz=this.authorizationService.setup({config:this.config,http:e.http}),this.securityApiClients={userProfiles:new UserProfileAPIClient(e.http),users:new N.UserAPIClient(e.http)},this.navControlService.setup({securityLicense:o,logoutUrl:ue(e.http),securityApiClients:this.securityApiClients}),this.analyticsService.setup({analytics:e.analytics,authc:this.authc,cloudId:null==t?void 0:t.cloudId,http:e.http,securityLicense:o}),m.create({authc:this.authc,application:e.application,getStartServices:e.getStartServices,securityApiClients:this.securityApiClients}),e.security.registerSecurityDelegate((({authc:e})=>({authc:{getCurrentUser:()=>e.getCurrentUser()}}))({authc:this.authc})),e.userProfile.registerUserProfileDelegate((({userProfile:e})=>e)({userProfile:this.securityApiClients.userProfiles})),n&&this.managementService.setup({license:o,management:n,authc:this.authc,fatalErrors:e.fatalErrors,getStartServices:e.getStartServices,buildFlavor:this.buildFlavor}),n&&s&&s.featureCatalogue.register({id:"security",title:r.i18n.translate("xpack.security.registerFeature.securitySettingsTitle",{defaultMessage:"Manage permissions"}),description:r.i18n.translate("xpack.security.registerFeature.securitySettingsDescription",{defaultMessage:"Control who has access and what tasks they can perform."}),icon:"securityApp",path:"/app/management/security/roles",showOnHomePage:!0,category:"admin",order:600}),a&&this.anonymousAccessService.setup({share:a}),{authc:this.authc,authz:this.authz,license:o}}start(e,{management:t,share:s}){const{application:i,http:r,notifications:n}=e,{anonymousPaths:a}=r,o=ue(r),l=r.basePath.serverBasePath,u=new SessionExpired(i,o,l);return r.intercept(new UnauthorizedResponseHttpInterceptor(u,a)),this.sessionTimeout=new SessionTimeout(e,n,u,r,l),this.sessionTimeout.start(),this.securityCheckupService.start(e),this.securityApiClients.userProfiles.start(),t&&this.managementService.start({capabilities:i.capabilities}),s&&this.anonymousAccessService.start({http:r}),this.analyticsService.start({http:e.http}),{uiApi:le({core:e}),navControlService:this.navControlService.start({core:e,authc:this.authc}),authc:this.authc,authz:this.authz,userProfiles:{getCurrent:this.securityApiClients.userProfiles.getCurrent.bind(this.securityApiClients.userProfiles),bulkGet:this.securityApiClients.userProfiles.bulkGet.bind(this.securityApiClients.userProfiles),suggest:this.securityApiClients.userProfiles.suggest.bind(this.securityApiClients.userProfiles),update:this.securityApiClients.userProfiles.update.bind(this.securityApiClients.userProfiles),partialUpdate:this.securityApiClients.userProfiles.partialUpdate.bind(this.securityApiClients.userProfiles),userProfile$:this.securityApiClients.userProfiles.userProfile$,userProfileLoaded$:this.securityApiClients.userProfiles.userProfileLoaded$,enabled$:this.securityApiClients.userProfiles.enabled$}}}stop(){var e;null===(e=this.sessionTimeout)||void 0===e||e.stop(),this.navControlService.stop(),this.securityLicenseService.stop(),this.managementService.stop(),this.analyticsService.stop()}}function ue(e){return`${e.basePath.serverBasePath}/logout`}const ce=e=>new SecurityPlugin(e)},8558:(e,t,s)=>{"use strict";s.d(t,{G:()=>o});var i=s(5008),r=s(4286),n=s(409),a=s(1221);const o=({featureId:e,tooltip:t})=>{const{save:s}=(0,a.E)(e);return function(e,t=[null==e?void 0:e.iconType,null==e?void 0:e.text,null==e?void 0:e.tooltip]){const{services:s}=(0,n.useKibana)();(0,r.useEffect)((()=>{if(e)return s.chrome.setBadge(e),()=>s.chrome.setBadge()}),t)}(s?void 0:{iconType:"glasses",text:i.i18n.translate("xpack.security.management.readonlyBadge.text",{defaultMessage:"Read only"}),tooltip:t},[s]),null}},1726:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PrivilegesAPIClient:()=>f.PrivilegesAPIClient,RolesAPIClient:()=>v.RolesAPIClient,rolesManagementApp:()=>g});var i=s(3185),r=(s(4286),s(2874)),n=s(1493),a=s(5008),o=s(409),l=s(482),u=s(193),c=s(38),d=s(8558),h=s(2527),p=s(6791);const g=Object.freeze({id:"roles",create({license:e,getStartServices:t,buildFlavor:g}){const v="serverless"===g?a.i18n.translate("xpack.security.management.rolesTitleServerless",{defaultMessage:"Custom Roles"}):a.i18n.translate("xpack.security.management.rolesTitle",{defaultMessage:"Roles"});return{id:this.id,order:20,title:v,async mount({element:f,setBreadcrumbs:m,history:y}){const[[b,{dataViews:x,features:S,spaces:P,cloud:C}],{RolesGridPage:A},{EditRolePage:_},{RolesAPIClient:w},{IndicesAPIClient:j},{PrivilegesAPIClient:R},{UserAPIClient:E}]=await Promise.all([t(),Promise.all([s.e(240),s.e(252)]).then(s.bind(s,252)),s.e(734).then(s.bind(s,4734)),Promise.resolve().then(s.bind(s,8680)),s.e(436).then(s.bind(s,8436)),Promise.resolve().then(s.bind(s,3979)),Promise.resolve().then(s.bind(s,5587))]),{application:I,http:M,chrome:k}=b;k.docTitle.change(v);const T=new w(M),U=({action:t})=>{const{roleName:s}=(0,n.useParams)(),r=s?(0,h.R)(s):void 0,o="edit"===t&&s&&r?{text:r,href:`/edit/${encodeURIComponent(s)}`}:{text:a.i18n.translate("xpack.security.roles.createBreadcrumb",{defaultMessage:"Create"})},l=null==P?void 0:P.ui;return(0,p.jsx)(c.Qp,{text:o.text,href:o.href},(0,p.jsx)(_,(0,i.default)({action:t,roleName:r,rolesAPIClient:T,userAPIClient:new E(M),indicesAPIClient:new j(M),privilegesAPIClient:new R(M),getFeatures:S.getFeatures,license:e,uiCapabilities:I.capabilities,dataViews:x,history:y,spacesApiUi:l,buildFlavor:g,cloudOrgUrl:null==C?void 0:C.organizationUrl},b)))};return(0,r.render)((0,p.jsx)(l.KibanaRenderContextProvider,b,(0,p.jsx)(o.KibanaContextProvider,{services:b},(0,p.jsx)(u.Router,{history:y},(0,p.jsx)(d.G,{featureId:"roles",tooltip:a.i18n.translate("xpack.security.management.roles.readonlyTooltip",{defaultMessage:"Unable to create or edit roles"})}),(0,p.jsx)(c.gb,{onChange:(0,c.$c)(k,m)},(0,p.jsx)(c.Qp,{text:v,href:"/"},(0,p.jsx)(u.Route,{path:["/",""],exact:!0},(0,p.jsx)(A,(0,i.default)({rolesAPIClient:T,history:y,readOnly:!b.application.capabilities.roles.save,buildFlavor:g,cloudOrgUrl:null==C?void 0:C.organizationUrl},b))),(0,p.jsx)(u.Route,{path:"/edit/:roleName?"},(0,p.jsx)(U,{action:"edit"})),(0,p.jsx)(u.Route,{path:"/clone/:roleName"},(0,p.jsx)(U,{action:"clone"}))))))),f),()=>{(0,r.unmountComponentAtNode)(f)}}}}});var v=s(8680),f=s(3979)},3979:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PrivilegesAPIClient:()=>PrivilegesAPIClient});class PrivilegesAPIClientPublicContract{}class PrivilegesAPIClient extends PrivilegesAPIClientPublicContract{constructor(e){super(),this.http=e}async getAll({includeActions:e,respectLicenseLevel:t=!0}){return await this.http.get("/api/security/privileges",{query:{includeActions:e,respectLicenseLevel:t}})}async getBuiltIn(){return await this.http.get("/internal/security/esPrivileges/builtin")}}},8680:(e,t,s)=>{"use strict";s.r(t),s.d(t,{RolesAPIClient:()=>RolesAPIClient});var i=s(8915),r=s(2787),n=s(1672);const a=r.Bo.roles.public.v1;class RolesAPIClient{constructor(e){(0,i.default)(this,"getRoles",(async()=>await this.http.get("/api/security/role",{version:a,query:{replaceDeprecatedPrivileges:!0}}))),(0,i.default)(this,"queryRoles",(async e=>await this.http.post("/api/security/role/_query",{version:a,body:JSON.stringify(e||{})}))),(0,i.default)(this,"getRole",(async e=>await this.http.get(`/api/security/role/${encodeURIComponent(e)}`,{version:a,query:{replaceDeprecatedPrivileges:!0}}))),(0,i.default)(this,"deleteRole",(async e=>{await this.http.delete(`/api/security/role/${encodeURIComponent(e)}`,{version:a})})),(0,i.default)(this,"saveRole",(async({role:e,createOnly:t=!1})=>{await this.http.put(`/api/security/role/${encodeURIComponent(e.name)}`,{version:a,body:JSON.stringify(this.transformRoleForSave((0,n.iY)(e))),query:{createOnly:t}})})),(0,i.default)(this,"bulkUpdateRoles",(async({rolesUpdate:e})=>await this.http.post("/api/security/roles",{version:a,body:JSON.stringify({roles:Object.fromEntries(e.map((e=>[e.name,this.transformRoleForSave((0,n.iY)(e))])))})}))),(0,i.default)(this,"transformRoleForSave",(e=>{var t,s;const i=e=>!("clusters"in e&&e.clusters&&e.clusters.length>0)&&0===e.names.length&&0===e.privileges.length;return e.elasticsearch.indices=e.elasticsearch.indices.filter((e=>!i(e))),e.elasticsearch.remote_indices=null===(t=e.elasticsearch.remote_indices)||void 0===t?void 0:t.filter((e=>!i(e))),e.elasticsearch.indices.forEach((e=>e.query||delete e.query)),null===(s=e.elasticsearch.remote_indices)||void 0===s||s.forEach((e=>e.query||delete e.query)),e.kibana.forEach((e=>{e.base.length>0&&(e.feature={})})),delete e.name,delete e.transient_metadata,delete e._unrecognized_applications,delete e._transform_error,e})),this.http=e}}},2527:(e,t,s)=>{"use strict";s.d(t,{R:()=>i});const i=e=>{try{return decodeURIComponent(e)}catch{return e}}},5587:(e,t,s)=>{"use strict";s.r(t),s.d(t,{UserAPIClient:()=>i.UserAPIClient,usersManagementApp:()=>v});var i=s(869),r=(s(4286),s(2874)),n=s(1493),a=s(5008),o=s(409),l=s(482),u=s(193),c=s(38),d=s(9942),h=s(8558),p=s(2527),g=s(6791);const v=Object.freeze({id:"users",create({authc:e,getStartServices:t}){const i=a.i18n.translate("xpack.security.management.usersTitle",{defaultMessage:"Users"});return{id:this.id,order:10,title:i,async mount({element:i,setBreadcrumbs:o,history:l}){const[[d],{UsersGridPage:v},{CreateUserPage:m,EditUserPage:y},{UserAPIClient:b},{RolesAPIClient:x}]=await Promise.all([t(),s.e(226).then(s.bind(s,6226)),s.e(945).then(s.bind(s,4945)),Promise.resolve().then(s.bind(s,869)),Promise.resolve().then(s.bind(s,1726))]);return(0,r.render)((0,g.jsx)(f,{services:d,history:l,authc:e,onChange:(0,c.$c)(d.chrome,o)},(0,g.jsx)(h.G,{featureId:"users",tooltip:a.i18n.translate("xpack.security.management.users.readonlyTooltip",{defaultMessage:"Unable to create or edit users"})}),(0,g.jsx)(c.Qp,{text:a.i18n.translate("xpack.security.users.breadcrumb",{defaultMessage:"Users"}),href:"/"},(0,g.jsx)(u.Routes,null,(0,g.jsx)(u.Route,{path:["/",""],exact:!0},(0,g.jsx)(v,{notifications:d.notifications,userAPIClient:new b(d.http),rolesAPIClient:new x(d.http),history:l,navigateToApp:d.application.navigateToApp,readOnly:!d.application.capabilities.users.save})),(0,g.jsx)(u.Route,{path:"/create"},(0,g.jsx)(c.Qp,{text:a.i18n.translate("xpack.security.users.editUserPage.createBreadcrumb",{defaultMessage:"Create"}),href:"/create"},(0,g.jsx)(m,null))),(0,g.jsx)(u.Route,{path:"/edit/:username",render:e=>{const t=(0,p.R)(e.match.params.username);return(0,g.jsx)(c.Qp,{text:t,href:`/edit/${encodeURIComponent(t)}`},(0,g.jsx)(y,{username:t}))}}),(0,g.jsx)(u.Route,{path:"/edit"},(0,g.jsx)(n.Redirect,{to:"/create"}))))),i),()=>{(0,r.unmountComponentAtNode)(i)}}}}}),f=({services:e,history:t,authc:s,onChange:i,children:r})=>(0,g.jsx)(l.KibanaRenderContextProvider,e,(0,g.jsx)(o.KibanaContextProvider,{services:e},(0,g.jsx)(d.sH,{authc:s},(0,g.jsx)(u.Router,{history:t},(0,g.jsx)(c.gb,{onChange:i},r)))))},869:(e,t,s)=>{"use strict";s.r(t),s.d(t,{UserAPIClient:()=>UserAPIClient});const i="/internal/security/users";class UserAPIClient{constructor(e){this.http=e}async getUsers(){return await this.http.get(i)}async getUser(e){return await this.http.get(`${i}/${encodeURIComponent(e)}`)}async deleteUser(e){await this.http.delete(`${i}/${encodeURIComponent(e)}`)}async saveUser(e){await this.http.post(`${i}/${encodeURIComponent(e.username)}`,{body:JSON.stringify(e)})}async changePassword(e,t,s){const r={newPassword:t};s&&(r.password=s),await this.http.post(`${i}/${encodeURIComponent(e)}/password`,{body:JSON.stringify(r)})}async disableUser(e){await this.http.post(`${i}/${encodeURIComponent(e)}/_disable`)}async enableUser(e){await this.http.post(`${i}/${encodeURIComponent(e)}/_enable`)}}},3160:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s(4286);s(3721);var r={};const n=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];var a=[],o=[],l=function(e){var t=(0,i.createContext)(r);a.push(t),o.push(function(e){return function(){return(0,i.useContext)(e)}}(t))};s.length?s.forEach((function(e){return l(e.name)})):l(e.name);return[function(t){for(var r=t.children,n=function(e,t){if(null==e)return{};var s,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)s=n[i],t.indexOf(s)>=0||(r[s]=e[s]);return r}(t,["children"]),o=e(n),l=r,u=0;u<a.length;u+=1){var c=a[u],d=s[u]||function(e){return e};l=(0,i.createElement)(c.Provider,{value:d(o)},l)}return l}].concat(o)}},1777:(e,t,s)=>{"use strict";var i=s(1941),r=s(4286),n=i.__importDefault(s(5053));t.A=function(e,t){void 0===t&&(t=[]);var s=n.default(e,t,{loading:!0}),i=s[0],a=s[1];return r.useEffect((function(){a()}),[a]),i}},5053:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(1941),r=s(4286),n=i.__importDefault(s(9812));t.default=function(e,t,s){void 0===t&&(t=[]),void 0===s&&(s={loading:!1});var a=r.useRef(0),o=n.default(),l=r.useState(s),u=l[0],c=l[1],d=r.useCallback((function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var r=++a.current;return c((function(e){return i.__assign(i.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return o()&&r===a.current&&c({value:e,loading:!1}),e}),(function(e){return o()&&r===a.current&&c({error:e,loading:!1}),e}))}),t);return[u,d]}},6943:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(4286),r="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=r},9812:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(4286);t.default=function(){var e=i.useRef(!1),t=i.useCallback((function(){return e.current}),[]);return i.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},7880:(e,t,s)=>{"use strict";var i=s(1941),r=s(4286),n=i.__importDefault(s(6943));t.A=function(e,t){var s=r.useState(t),i=s[0],a=s[1];return n.default((function(){var t=e.subscribe(a);return function(){return t.unsubscribe()}}),[e]),i}},7073:(e,t,s)=>{s.p=window.__kbnPublicPath__.security},8744:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},9118:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/features/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},409:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},6323:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/remoteClusters/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},1254:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/spaces/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},9610:(e,t,s)=>{s.r(t);var i=__kbnBundles__.get("plugin/spaces/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},3721:(e,t,s)=>{e.exports=s(2497)(4971)},3185:(e,t,s)=>{e.exports=s(2497)(51858)},8915:(e,t,s)=>{e.exports=s(2497)(67493)},5927:e=>{"use strict";e.exports=__kbnSharedDeps__.Classnames},1319:e=>{"use strict";e.exports=__kbnSharedDeps__.ElasticEui},6791:e=>{"use strict";e.exports=__kbnSharedDeps__.EmotionReact},7043:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnCodeEditor},5008:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18n},5879:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnI18nReact},911:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnMonaco},482:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnReactKibanaContextRender},193:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnSharedUxRouter},9433:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnStd},3803:e=>{"use strict";e.exports=__kbnSharedDeps__.KbnUiTheme},770:e=>{"use strict";e.exports=__kbnSharedDeps__.Lodash},1783:e=>{"use strict";e.exports=__kbnSharedDeps__.Moment},2488:e=>{"use strict";e.exports=__kbnSharedDeps__.MomentTimezone},4286:e=>{"use strict";e.exports=__kbnSharedDeps__.React},2874:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactDom},1493:e=>{"use strict";e.exports=__kbnSharedDeps__.ReactRouterDom},190:e=>{"use strict";e.exports=__kbnSharedDeps__.Rxjs},5079:e=>{"use strict";e.exports=__kbnSharedDeps__.SaferLodashSet},1941:e=>{"use strict";e.exports=__kbnSharedDeps__.TsLib},2497:e=>{"use strict";e.exports=__kbnSharedDeps_npm__}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={id:e,exports:{}};return i[e](s,s.exports,n),s.exports}n.m=i,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(s,i){if(1&i&&(s=this(s)),8&i)return s;if("object"==typeof s&&s){if(4&i&&s.__esModule)return s;if(16&i&&"function"==typeof s.then)return s}var r=Object.create(null);n.r(r);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&s;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>s[e]));return a.default=()=>s,n.d(r,a),r},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,s)=>(n.f[s](e,t),t)),[])),n.u=e=>"security.chunk."+e+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},n.l=(e,t,i,r)=>{if(s[e])s[e].push(t);else{var a,o;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==e){a=c;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.src=e),s[e]=[t];var d=(t,i)=>{a.onerror=a.onload=null,clearTimeout(h);var r=s[e];if(delete s[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(i))),t)return t(i)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),o&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=s[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{n.b=document.baseURI||self.location.href;var e={977:0};n.f.j=(t,s)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise(((s,r)=>i=e[t]=[s,r]));s.push(i[2]=r);var a=n.p+n.u(t),o=new Error;n.l(a,(s=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,s)=>{var i,r,[a,o,l]=s,u=0;if(a.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);l&&l(n)}for(t&&t(s);u<a.length;u++)r=a[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},s=self.security_bundle_jsonpfunction=self.security_bundle_jsonpfunction||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.nc=void 0,n(7073),__kbnBundles__.define("plugin/security/public",n,8666)})();